{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*********************","webpack:///webpack/bootstrap a983de776e3686600b94?4bc9*********************","webpack:///./widget-bb-product-summary-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114******","webpack:///external \"lib-bb-widget-ng\"?84ad*","webpack:///external \"lib-bb-model-errors\"?7567**","webpack:///external \"lib-bb-widget-extension-ng\"?b547*","webpack:///external \"model-bb-product-summary-ng\"?4945*","webpack:///external \"lib-bb-intent-ng\"?add1*","webpack:///external \"lib-bb-event-bus-ng\"?8215*","webpack:///./widget-bb-product-summary-ng/scripts/index.js","webpack:///./widget-bb-product-summary-ng/scripts/controller.js","webpack:///./widget-bb-product-summary-ng/scripts/constants.js","webpack:///./widget-bb-product-summary-ng/scripts/message.js","webpack:///./widget-bb-product-summary-ng/scripts/default-hooks.js"],"names":["hooksKey","angular","module","modelProductSummaryModuleKey","eventBusModuleKey","widgetModuleKey","bbIntentModuleKey","factory","defaultHooks","controller","modelProductSummaryKey","eventBusKey","widgetKey","bbIntentKey","Controller","run","bus","widget","bbIntent","publish","id","getId","init","name","ProductSummaryController","PRODUCT_SELECTED","message","PRODUCTS_SELECTED","REFLOW_TRIGGERED","model","hooks","eventBus","enableIntentOnProductSelection","getBooleanPreference","enableLoadingDetails","isMultiCurrencyEnabled","$ctrl","intents","selectProduct","product","setProductSelected","kind","productSelected","selectProducts","products","setProductsSelected","hasValue","value","loadProductDetails","getProductDetails","then","extendedProduct","productKindName","Object","assign","productTypeName","processExtendedProduct","catch","productDetailsError","dataProductsErrorMessage","error","updateProductSelected","getProductSelected","processProductSelected","productKindsError","updateProductsSelected","initial","getProductsSelected","productsSelected","processProductsSelected","loadProducts","forceLoad","isProductLoading","load","productKinds","total","processKinds","isSelectMultiple","bindEvents","subscribe","viewManageProducts","initIntent","create","Intent","VIEW_MANAGE_PRODUCTS","handle","VIEW_PRODUCT_SUMMARY","$onInit","undefined","hasProducts","length","errorMessages","E_AUTH","E_CONNECTIVITY","E_USER","E_UNEXPECTED","DataProductsErrorMessage","BadRequestError","ERR_PRODUCT_SUMMARY_LEGAL_ENTITY_NOT_ALLOWED","ERR_PRODUCT_SUMMARY_REQUEST_SIZE","ERR_PRODUCT_SUMMARY_REQUEST_FROM","ERR_PRODUCT_SUMMARY_REQUEST_ORDER_BY","ERR_PRODUCT_SUMMARY_REQUEST_DIRECTION","ERR_ARRANGEMENT_NOT_FOUND","ERR_ARRANGEMENT_NOT_EXIST_PRODUCT_KIND_NAME","modelError","codes","map","e","code","identity","a"],"mappings":"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","file":"widget-bb-product-summary-ng/scripts/widget-bb-product-summary-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-product-summary-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-widget-extension-ng\", \"model-bb-product-summary-ng\", \"lib-bb-intent-ng\", \"lib-bb-event-bus-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-product-summary-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"));\n\telse\n\t\troot[\"widget-bb-product-summary-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-widget-extension-ng\"], root[\"model-bb-product-summary-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-event-bus-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_99__, __WEBPACK_EXTERNAL_MODULE_103__, __WEBPACK_EXTERNAL_MODULE_105__, __WEBPACK_EXTERNAL_MODULE_119__, __WEBPACK_EXTERNAL_MODULE_121__, __WEBPACK_EXTERNAL_MODULE_122__, __WEBPACK_EXTERNAL_MODULE_124__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a983de776e3686600b94","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-product-summary-ng/model.xml\n// module id = 0\n// module chunks = 22","module.exports = __WEBPACK_EXTERNAL_MODULE_99__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 99\n// module chunks = 15 16 17 18 19 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_103__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 103\n// module chunks = 15 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_105__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 105\n// module chunks = 15 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_119__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 119\n// module chunks = 20 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_121__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-product-summary-ng\"\n// module id = 121\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_122__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 122\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_124__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 124\n// module chunks = 20 21 22 23 24","/**\n * @module widget-bb-product-summary-ng\n *\n * @description\n * Product summary.\n *\n * @borrows module:model-bb-product-summary-ng.Product as Product\n * @borrows module:model-bb-product-summary-ng.ProductKind as ProductKind\n * @borrows module:lib-bb-model-errors.ModelError as ModelError\n *\n * @example\n *  <div ng-controller=\"ProductSummaryController as $ctrl\">\n *    <ul>\n *       <li ng-repeat=\"product in $ctrl.products\">{{product.id}}</li>\n *    </ul>\n *  </div>\n */\nimport angular from 'vendor-bb-angular';\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\n\nimport modelProductSummaryModuleKey, {\n  modelProductSummaryKey,\n} from 'model-bb-product-summary-ng';\n\nimport eventBusModuleKey, {\n  eventBusKey,\n} from 'lib-bb-event-bus-ng';\n\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\n\nimport Controller from './controller';\nimport defaultHooks from './default-hooks';\n\nconst hooksKey = 'widget-bb-product-summary-ng:hooks';\n\n/**\n * @name default\n * @type {string}\n * @description Angular module name\n */\nexport default angular\n  .module('widget-bb-product-summary-ng', [\n    modelProductSummaryModuleKey,\n    eventBusModuleKey,\n    widgetModuleKey,\n    bbIntentModuleKey,\n  ])\n\n  .factory(hooksKey, extendHooks(defaultHooks))\n\n  .controller('ProductSummaryController', [\n    modelProductSummaryKey,\n    hooksKey,\n    eventBusKey,\n    widgetKey,\n    bbIntentKey,\n    /* into */\n    Controller,\n  ])\n\n  .run([eventBusKey, widgetKey, bbIntentKey, (bus, widget, bbIntent) => {\n    bus.publish('cxp.item.loaded', {\n      id: widget.getId(),\n    });\n    bbIntent.init();\n  }])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/index.js","import {\n  Intent,\n} from './constants';\n\nimport message from './message';\n\nconst { PRODUCT_SELECTED, PRODUCTS_SELECTED, REFLOW_TRIGGERED } = message;\n\n\nexport default function ProductSummaryController(model, hooks, eventBus, widget, bbIntent) {\n  const enableIntentOnProductSelection =\n    widget.getBooleanPreference('enableIntentOnProductSelection');\n\n  /**\n   * @description\n   * CXP preference for loading arrangement details.\n   *\n   * @name enableLoadingDetails\n   * @type {boolean}\n   * @inner\n   */\n  const enableLoadingDetails = widget.getBooleanPreference('enableLoadingDetails');\n\n  /**\n   * @description\n   * CXP preference for identifying if multicurrency should be disabled.\n   * This is added on the explorer not widget preferences.\n   * It will be used only for insights page to prevent multicurrency.\n   *\n   * @name isMultiCurrencyEnabled\n   * @type {boolean}\n   * @inner\n   */\n  const isMultiCurrencyEnabled = widget.getBooleanPreference('multicurrency');\n\n  /**\n   * @name ProductSummaryController\n   * @ngkey ProductSummaryController\n   * @type {object}\n   * @description\n   * Product summary controller.\n   *\n   */\n  const $ctrl = this;\n\n  /**\n   * @description\n   * A set of intents that the controller uses or handles.\n   *\n   * @name intents\n   * @type {Object}\n   * @inner\n   */\n  const intents = {};\n\n  /**\n   * @description\n   * Sets the alternate workflow when a user selects a Product from the overview.\n   *\n   * @name ProductSummaryController#selectProduct\n   * @type {function}\n   * @param {Product} product Product to select.\n   * @fires bb.event.product.selected\n   * @fires bb.event.product.selected.[product-kind]\n   */\n  const selectProduct = (product) => {\n    model.setProductSelected(product);\n    eventBus.publish(PRODUCT_SELECTED, { product });\n    // for all accounts selection, do not send per kind event\n    if (product && product.kind) {\n      eventBus.publish(`${PRODUCT_SELECTED}.${product.kind}`, { product });\n    }\n\n    if (enableIntentOnProductSelection) {\n      intents.productSelected({ product });\n    }\n  };\n\n  /**\n   * @description\n   * Sets the alternate workflow when a user selects multiple Products from the overview or selector\n   *\n   * @name ProductSummaryController#selectProducts\n   * @type {function}\n   * @param {Product[]} products Array of Products to select\n   * @fires bb.event.products.selected\n   */\n  const selectProducts = (products) => {\n    model.setProductsSelected(products);\n    eventBus.publish(PRODUCTS_SELECTED, { products });\n  };\n\n  /**\n   * @description\n   * Check if value is defined, not null and not empty\n   * @inner\n   * @name hasValue\n   * @type {function}\n   * @param  {*} value  The value to check\n   * @return {boolean}\n   */\n  const hasValue = (value) => typeof value !== 'undefined' && value !== null && value !== '';\n\n  /**\n   * @description\n   * Loading extended parameters for a given product\n   *\n   * @inner\n   * @name ProductSummaryController#loadProductDetails\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  const loadProductDetails = (product) => {\n    model.getProductDetails(product.id)\n      .then(extendedProduct => {\n        if (!hasValue(extendedProduct.productKindName)) {\n          Object.assign(extendedProduct, {\n            productKindName: product.productKindName,\n          });\n        }\n        Object.assign(extendedProduct, {\n          productTypeName: product.productKindName,\n        });\n        $ctrl.extendedProduct = hooks.processExtendedProduct(extendedProduct);\n      })\n      .catch(error => {\n        $ctrl.productDetailsError = { message: message.dataProductsErrorMessage(error) };\n      });\n  };\n\n  /**\n   * @description\n   * Handles product select\n   *\n   * @name ProductSummaryController#updateProductSelected\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  function updateProductSelected() {\n    model.getProductSelected()\n      .then(productSelected => {\n        $ctrl.productSelected = hooks.processProductSelected(productSelected);\n        if (productSelected !== null && enableLoadingDetails) {\n          loadProductDetails(productSelected);\n        }\n      })\n      .catch(error => {\n        $ctrl.productKindsError = { message: message.dataProductsErrorMessage(error) };\n      });\n  }\n\n  /**\n   * @description\n   * Handles multiple product selection\n   *\n   * @name ProductSummaryController#updateProductsSelected\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  function updateProductsSelected(initial = false) {\n    model.getProductsSelected(initial)\n      .then(productsSelected => {\n        $ctrl.productsSelected = hooks.processProductsSelected(productsSelected);\n        if (initial) {\n          eventBus.publish(PRODUCTS_SELECTED, { products: $ctrl.productsSelected });\n        }\n      });\n  }\n\n  /**\n   * @description\n   * Products loading logic\n   *\n   * @name ProductSummaryController#loadProducts\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  const loadProducts = ({ initial = false, forceLoad = true }) => {\n    $ctrl.isProductLoading = true;\n\n    return model.load(forceLoad)\n      .then(({ productKinds, total }) => {\n        $ctrl.isProductLoading = false;\n        $ctrl.total = total;\n        $ctrl.productKinds = hooks.processKinds(productKinds);\n      })\n      .then(() => (\n        hooks.isSelectMultiple() ?\n          updateProductsSelected(initial) : updateProductSelected()\n      ))\n      .catch(error => {\n        $ctrl.isProductLoading = false;\n        $ctrl.productKindsError = { message: message.dataProductsErrorMessage(error) };\n      });\n  };\n\n  /**\n   * @description\n   * Adds subscriptions to bus events\n   *\n   * @name ProductSummaryController#bindEvents\n   * @type {function}\n   */\n  function bindEvents() {\n    eventBus.subscribe(PRODUCT_SELECTED, updateProductSelected);\n    // updateProductsSelected should not take payload as argument\n    eventBus.subscribe(PRODUCTS_SELECTED, () => updateProductsSelected());\n    eventBus.subscribe(REFLOW_TRIGGERED, loadProducts);\n  }\n\n  /**\n   * @description\n   * Handles the intent to switch the view to product summary\n   *\n   * @type {function}\n   * @name ProductSummary#viewManageProducts\n   */\n  const viewManageProducts = () => {\n    if (intents.viewManageProducts) {\n      intents.viewManageProducts();\n    }\n  };\n\n  /**\n   * @description\n   * Inits the bbIntent and adds intent handlers.\n   *\n   * @inner\n   * @name ManageProductsController#initIntent\n   * @type {function}\n   */\n  const initIntent = () => {\n    intents.viewManageProducts = bbIntent.create(Intent.VIEW_MANAGE_PRODUCTS);\n    intents.productSelected = bbIntent.create(Intent.PRODUCT_SELECTED);\n\n    bbIntent.handle(Intent.VIEW_PRODUCT_SUMMARY, () => {\n      loadProducts();\n    });\n  };\n\n\n  /*\n   * Widget initialization logic.\n   */\n  const $onInit = () => {\n    /**\n     * This event (cxp.item.loaded) is deprecated in Mobile SDK version > 3.0\n     * and will be removed with the update to widget collection 3 (WC3)\n     */\n    eventBus.publish('cxp.item.loaded', {\n      id: widget.getId(),\n    });\n\n    eventBus.publish('bb.item.loaded', {\n      id: widget.getId(),\n    });\n\n    return loadProducts({ initial: true })\n      .then(bindEvents)\n      .then(initIntent);\n  };\n\n  Object.assign($ctrl, {\n    /**\n     * @description\n     * If you use product-select-multiple extension with another widget that\n     * does not support multicurrencies like Insights page, you will need to\n     * add this property to false on explorer properties\n     *\n     * @name ProductSummaryController#isMultiCurrencyEnabled\n     * @type {boolean}\n     */\n    get isMultiCurrencyEnabled() {\n      return isMultiCurrencyEnabled === undefined ? true : isMultiCurrencyEnabled;\n    },\n    /**\n     * @description\n     * The selected product.\n     * The value returned from {@link Hooks.processProductSelected} hook\n     *\n     * @name ProductSummaryController#productSelected\n     * @type {any}\n     */\n    productSelected: null,\n    /**\n     * @description\n     * Array of selected products.\n     * The value returned from {@link Hooks.processProductsSelected} hook\n     *\n     * @name ProductSummaryController#productsSelected\n     * @type {array}\n     */\n    productsSelected: [],\n    /**\n     * @description\n     * The selected product extended with arrangement details.\n     *\n     * @name ProductSummaryController#extendedProduct\n     * @type {any}\n     */\n    extendedProduct: null,\n    /**\n     * @description\n     * The value returned from {@link Hooks.processKinds} hook.\n     * null if the products aren't loaded.\n     *\n     * @name ProductSummaryController#productKinds\n     * @type {any}\n     */\n    productKinds: null,\n    /**\n     * @description\n     * Loading status of the products\n     *\n     * @name ProductSummaryController#isProductLoading\n     * @type {boolean}\n     */\n    isProductLoading: false,\n    /**\n     * @description\n     * The error encountered when attempting to fetch the products from the model\n     *\n     * @name ProductSummaryController#productKindsError\n     * @type {ModelError}\n     */\n    productKindsError: null,\n    /**\n     * @description\n     * The error encountered when attempting to fetch the\n     * selected product details from the model\n     *\n     * @name ProductSummaryController#productDetailsError\n     * @type {ModelError}\n     */\n    productDetailsError: null,\n    /**\n     * @description\n     * Checks the list is empty or not\n     *\n     * @name ProductSummaryController#hasProducts\n     * @type {function}\n     * @returns {boolean} false if product list is empty\n     */\n    hasProducts: () => !!$ctrl.productKinds.length,\n    /**\n     * @description\n     * The total balance for the products\n     *\n     * @name ProductSummaryController#total\n     * @type {TotalBalance}\n     */\n    total: null,\n    selectProduct,\n    selectProducts,\n    $onInit,\n    viewManageProducts,\n  });\n}\n\n/**\n * @typedef {Object} TotalBalance\n * @property {string} aggregatedBalance - aggregated balance\n * @property {string} currency - currency code\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/controller.js","import { E_AUTH, E_CONNECTIVITY, E_USER, E_UNEXPECTED } from 'lib-bb-model-errors';\n\n/**\n * @name errorMessages\n *\n * @description\n * Error messages keys for connectivity, user, auth and unexpected errors.\n *\n * @type {object}\n */\nexport const errorMessages = {\n  [E_AUTH]: 'model.error.auth',\n  [E_CONNECTIVITY]: 'model.error.connectivity',\n  [E_USER]: 'model.error.user',\n  [E_UNEXPECTED]: 'model.error.unexpected',\n};\n\n/**\n * Widget intent enum\n * @type {object}\n */\nexport const Intent = {\n  VIEW_PRODUCT_SUMMARY: 'intent.bb.product.summary.view',\n  VIEW_MANAGE_PRODUCTS: 'intent.bb.manage.products.view',\n  PRODUCT_SELECTED: 'intent.rb.product.selected',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/constants.js","import { E_AUTH, E_CONNECTIVITY, E_USER, E_UNEXPECTED } from 'lib-bb-model-errors';\nimport { BadRequestError } from 'model-bb-product-summary-ng';\n\n/**\n * @name MessageHandler#DataProductsErrorMessage\n * @description\n * Object for mapping errors used in extension\n * @type {Object}\n */\nexport const DataProductsErrorMessage = {\n  [E_AUTH]:\n    'model.error.auth',\n  [E_CONNECTIVITY]:\n    'model.error.connectivity',\n  [E_USER]:\n    'model.error.user',\n  [E_UNEXPECTED]:\n    'model.error.unexpected',\n  [BadRequestError.ERR_PRODUCT_SUMMARY_LEGAL_ENTITY_NOT_ALLOWED]:\n    'product.summary.error.legal.entity.not.allowed',\n  [BadRequestError.ERR_PRODUCT_SUMMARY_REQUEST_SIZE]:\n    'product.summary.error.paging.size',\n  [BadRequestError.ERR_PRODUCT_SUMMARY_REQUEST_FROM]:\n    'product.summary.error.paging.from',\n  [BadRequestError.ERR_PRODUCT_SUMMARY_REQUEST_ORDER_BY]:\n    'product.summary.error.sorting.orderBy',\n  [BadRequestError.ERR_PRODUCT_SUMMARY_REQUEST_DIRECTION]:\n    'product.summary.error.sorting.direction',\n\n  [BadRequestError.ERR_ARRANGEMENT_NOT_FOUND]:\n    'arrangements.error.not.found',\n  [BadRequestError.ERR_ARRANGEMENT_NOT_EXIST_PRODUCT_KIND_NAME]:\n    'arrangements.error.not.exist.product.kindName',\n};\n\n/**\n * @name MessageHandler#dataProductsErrorMessage\n * @description\n * Create error message array for product\n * Checks if message has one or more then one error\n * @type {function}\n * @param {ModelError} modelError response error object\n * @returns {MessageArray} message array\n */\nconst dataProductsErrorMessage = modelError => {\n  if (modelError.codes) {\n    return modelError.codes.map(e => DataProductsErrorMessage[e]);\n  }\n\n  return [DataProductsErrorMessage[modelError.code]];\n};\n\nexport default {\n  /**\n   * Triggered when product is selected.\n   * @event bb.event.product.selected\n   * @type {Product}\n   */\n  PRODUCT_SELECTED: 'bb.event.product.selected',\n  /**\n   * Triggered when multiple products are selected.\n   * @event bb.event.products.selected\n   * @type {Product[]}\n   */\n  PRODUCTS_SELECTED: 'bb.event.products.selected',\n  REFLOW_TRIGGERED: 'bb.event.product.accounts.reflow',\n  dataProductsErrorMessage,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/message.js","/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bb-product-summary-ng\n */\n\nconst identity = a => a;\n\nexport default {\n/**\n * @name Hooks#isSelectMultiple\n * @type {function}\n *\n * @description\n * Hook for extension to specify whether it depends on multiple or single products\n *\n * @returns {boolean} Depends on hook implementation.\n */\n  isSelectMultiple: () => false,\n/**\n * @name Hooks#processKinds\n * @type {function}\n *\n * @description\n * Hook for processing product kinds after initialization.\n * Assigned to [$ctrl.productKinds]{@link ProductSummaryController#productKinds}\n *\n * @param items {array} ProductKinds to process\n * @returns {array} Depends on hook implementation.\n */\n  processKinds: identity,\n\n/**\n * @name Hooks#processProductSelected\n * @type {function}\n *\n * @description\n * Hook for processing selected product after selection update\n * Assigned to [$ctrl.productSelected]{@link ProductSummaryController#productSelected}\n *\n * @param item {object} Product to process\n * @returns {object} Depends on hook implementation.\n */\n  processProductSelected: identity,\n\n/**\n * @name Hooks#processProductsSelected\n * @type {function}\n *\n * @description\n * Hook for processing selected array of products after selection update\n * Assigned to [$ctrl.productsSelected]{@link ProductSummaryController#productsSelected}\n *\n * @param products {array} Products to process\n * @returns {array} Depends on hook implementation.\n */\n  processProductsSelected: identity,\n\n/**\n * @name Hooks#processExtendedProduct\n * @type {function}\n *\n * @description\n * Hook for processing extended product after selection update\n * Assigned to [$ctrl.extendedProduct]{@link ProductSummaryController#extendedProduct}\n *\n * @param product {Product} Product to process\n * @returns {any} Depends on hook implementation.\n */\n  processExtendedProduct: identity,\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/default-hooks.js"],"sourceRoot":""}