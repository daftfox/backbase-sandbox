{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6****************************","webpack:///webpack/bootstrap 70052c6c6190d07a36f3?d006****************************","webpack:///./widget-bb-manage-payment-drafts-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*******************","webpack:///external \"lib-bb-model-errors\"?7567**","webpack:///external \"lib-bb-widget-extension-ng\"?b547*","webpack:///external \"lib-bb-intent-ng\"?add1*","webpack:///external \"model-bb-payment-orders-ng\"?e196*","webpack:///./widget-bb-manage-payment-drafts-ng/scripts/index.js","webpack:///./widget-bb-manage-payment-drafts-ng/scripts/controller.js","webpack:///./widget-bb-manage-payment-drafts-ng/scripts/default-hooks.js"],"names":["defaultHooks","hooksKey","angular","module","modelPaymentOrdersModuleKey","intentModuleKey","factory","extensionContextKey","modelPaymentOrdersKey","model","controller","bbIntentKey","Controller","name","PaymentDraftController","errorMessages","E_AUTH","E_USER","E_CONNECTIVITY","E_UNEXPECTED","DEFAULT_PAGE_SIZE","DEFAULT_MAX_NAV_PAGES","DEFAULT_PAGINATION_TYPE","uiError","error","modelError","code","message","hooks","$ctrl","preferences","getPaymentDraftsPreferences","pageSize","paymentDraftsPageSize","maxNavPages","paymentDraftsMaxNavPages","paginationType","paymentDraftsPaginationType","dismissTime","Math","abs","paymentDraftsNotificationDismissTime","paymentDrafts","rawItems","params","from","size","currentPage","totalItems","orderBy","defaultSortableColumn","direction","defaultSortableDirection","query","state","notifications","data","loading","hasMore","pageParams","initialLoading","loadMorePromise","append","newItems","existingItems","replace","items","load","merge","Object","assign","requestParams","truncateParams","getPaymentDrafts","then","raw","length","totalCount","processPaymentDrafts","processedPaymentDrafts","catch","loadMore","done","getRequestParams","changePage","currentParams","reload","onSort","$onInit","deleteDraft","draftPaymentId","drafts"],"mappings":"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","file":"widget-bb-manage-payment-drafts-ng/scripts/widget-bb-manage-payment-drafts-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"model-bb-payment-orders-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-manage-payment-drafts-ng\", [\"vendor-bb-angular\", \"lib-bb-model-errors\", \"lib-bb-widget-extension-ng\", \"lib-bb-intent-ng\", \"model-bb-payment-orders-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-manage-payment-drafts-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"model-bb-payment-orders-ng\"));\n\telse\n\t\troot[\"widget-bb-manage-payment-drafts-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-widget-extension-ng\"], root[\"lib-bb-intent-ng\"], root[\"model-bb-payment-orders-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_148__, __WEBPACK_EXTERNAL_MODULE_194__, __WEBPACK_EXTERNAL_MODULE_195__, __WEBPACK_EXTERNAL_MODULE_196__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70052c6c6190d07a36f3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-manage-payment-drafts-ng/model.xml\n// module id = 0\n// module chunks = 29","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 18\n// module chunks = 0 8 9 10 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_148__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 148\n// module chunks = 16 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_194__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 194\n// module chunks = 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_195__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 195\n// module chunks = 27 28 29 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_196__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-payment-orders-ng\"\n// module id = 196\n// module chunks = 27 28 29 30 31 32 33","/**\n * @module widget-bb-manage-payment-drafs-ng\n *\n * @description\n * Widget for the payment order drafts functionalities\n */\nimport angular from 'vendor-bb-angular';\nimport extendHooks, { extensionContextKey } from 'lib-bb-widget-extension-ng';\nimport modelPaymentOrdersModuleKey, { modelPaymentOrdersKey } from 'model-bb-payment-orders-ng';\nimport intentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\n\nimport Controller from './controller';\nimport * as defaultHooks from './default-hooks';\n\nconst hooksKey = 'widget-bb-payment-order-ng:hooks';\n\nexport default angular\n  .module('widget-bb-manage-payment-drafts-ng', [\n    modelPaymentOrdersModuleKey,\n    intentModuleKey,\n  ])\n\n  .factory(hooksKey, extendHooks(defaultHooks))\n\n  .factory(extensionContextKey, [\n    modelPaymentOrdersKey,\n    (model) => ({\n      model,\n    }),\n  ])\n\n  .controller('PaymentDraftController', [\n    // dependencies to inject\n    modelPaymentOrdersKey,\n    hooksKey,\n    bbIntentKey,\n    /* into */\n    Controller,\n  ])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-drafts-ng/scripts/index.js","import { E_AUTH, E_USER, E_CONNECTIVITY, E_UNEXPECTED } from 'lib-bb-model-errors';\n\nconst errorMessages = {\n  [E_AUTH]: 'error.auth',\n  [E_USER]: 'error.user',\n  [E_CONNECTIVITY]: 'error.connectivity',\n  [E_UNEXPECTED]: 'error.unexpected',\n};\n\n/**\n * Defines the default pageSize for the payment drafts page\n * as defined in the widget model.xml\n * @type {number}\n */\nconst DEFAULT_PAGE_SIZE = 50;\n\n/**\n * Defines the default maxNavPages for payment drafts page\n * as defined in the widget model.xml\n * @type {int}\n */\nconst DEFAULT_MAX_NAV_PAGES = 3;\n\n/**\n * Defines the default paginationType for payment drafts page\n * as defined in the widget model.xml\n * @type {string}\n */\nconst DEFAULT_PAGINATION_TYPE = 'load-more';\n\n/**\n * @description\n * Creates an error object for template\n *\n * @name uiError\n *\n * @inner\n * @param {object} modelError Error object\n * @type {function}\n * @returns {{message: string}}\n */\nconst uiError = modelError => {\n  let error = '';\n\n  if (modelError && modelError.code) {\n    error = errorMessages[modelError.code];\n  }\n\n  return {\n    message: error,\n  };\n};\n\n/**\n * @name PaymentDraftController\n * @type {object}\n * @description\n * Shows paymant drafts list\n *\n * @usage\n * <div ng-controller=\"PaymentDraftController as $ctrl\">\n *   <!-- ... -->\n * </div>\n */\nexport default function PaymentDraftController(model, hooks) {\n  const $ctrl = this;\n  const preferences = model.getPaymentDraftsPreferences();\n  const pageSize = preferences.paymentDraftsPageSize || DEFAULT_PAGE_SIZE;\n  const maxNavPages = preferences.paymentDraftsMaxNavPages || DEFAULT_MAX_NAV_PAGES;\n  const paginationType = preferences.paymentDraftsPaginationType || DEFAULT_PAGINATION_TYPE;\n  const dismissTime = Math.abs(preferences.paymentDraftsNotificationDismissTime) || 3;\n\n  const paymentDrafts = {\n    rawItems: [],\n    params: {\n      from: 0,\n      size: pageSize,\n      currentPage: 1,\n      totalItems: 0,\n      maxNavPages,\n      paginationType,\n      orderBy: hooks.defaultSortableColumn(),\n      direction: hooks.defaultSortableDirection(),\n      query: null,\n    },\n  };\n\n  const state = {\n    notifications: [],\n    paymentDrafts: {\n      data: [],\n      get orderBy() { return paymentDrafts.params.orderBy; },\n      get direction() { return paymentDrafts.params.direction; },\n      loading: false,\n      hasMore: false,\n      error: null,\n    },\n    pageParams: paymentDrafts.params,\n    initialLoading: true,\n    error: null,\n  };\n\n  /**\n   * @type {promise.<void>} loadMorePromise\n   */\n  let loadMorePromise = null;\n\n  /**\n   * Merges new orders with existing ones\n   *\n   * @inner\n   * @name append\n   * @type {function}\n   * @returns {array} Merged array of old and new orders\n   */\n  const append = (newItems, existingItems) => [...existingItems, ...newItems];\n\n  /**\n   * Replaces existing orders with new ones\n   *\n   * @inner\n   * @name replace\n   * @type {function}\n   * @returns {array} New payments\n   */\n  const replace = items => items;\n\n  /**\n   * @name load\n   *\n   * @description\n   * Loading payment drafts\n   *\n   * @inner\n   * @type {function}\n   *\n   * @param {function} merge\n   * @param {object} params\n   * @return {Promise.<module:model-bb-payment-ng.PaymentDrafts, ModelError>} A promise\n   */\n  const load = (merge, params) => {\n    if (!merge) {\n      // eslint-disable-next-line no-param-reassign\n      merge = Object.assign(replace);\n    }\n    const requestParams = Object.assign({}, hooks.truncateParams(paymentDrafts.params), params);\n    state.paymentDrafts.loading = true;\n\n    return model.getPaymentDrafts(requestParams)\n      .then(raw => {\n        state.paymentDrafts.loading = false;\n        paymentDrafts.rawItems = merge(raw.data, paymentDrafts.rawItems);\n        state.paymentDrafts.hasMore = paymentDrafts.rawItems.length < raw.totalCount;\n\n        state.pageParams.totalItems = raw.totalCount || 0;\n        state.pageParams.currentPage = requestParams.currentPage;\n\n        return paymentDrafts.rawItems;\n      })\n      .then(hooks.processPaymentDrafts)\n      .then(processedPaymentDrafts => {\n        state.paymentDrafts.data = processedPaymentDrafts;\n      })\n      .catch(error => {\n        state.error = uiError(error);\n        state.paymentDrafts.loading = false;\n      });\n  };\n\n  /**\n   * @name PaymentDraftController#loadMore\n   *\n   * @description\n   * Loads more payment drafts if they are available.\n   *\n   * @type {function}\n   * @param {function} done Callback to stop loading\n   * @return {Promise.<module:model-bb-payment-ng.PaymentDrafts, ModelError>} A promise\n   */\n  const loadMore = done => {\n    if (state.paymentDrafts.loading) {\n      return loadMorePromise;\n    }\n\n    paymentDrafts.params.from++;\n\n    loadMorePromise = load(append)\n      .then(() => {\n        loadMorePromise = null;\n        done();\n      })\n      .catch(() => {\n        loadMorePromise = null;\n        paymentDrafts.params.from--;\n        done();\n      });\n\n    return loadMorePromise;\n  };\n\n  /**\n   * @description\n   * Get params for request.\n   *\n   * @name PaymentDraftController#getRequestParams\n   *\n   * @inner\n   * @param {Object} params Custom params\n   * @type {function}\n   * @returns {Object} A request params\n   */\n  const getRequestParams = (params) => Object.assign({}, paymentDrafts.params, {\n    // In BE services pagination starts from 0 page, but in bootstrap directive it's 1\n    from: params.currentPage - 1,\n  }, params);\n\n  /**\n   * @description\n   * Change page of payment drafts.\n   *\n   * @name PaymentDraftController#changePage\n   * @type {function}\n   * @returns {Promise.<module:model-bb-payment-ng.PaymentDrafts, ModelError>}\n   * A Promise with loaded accounts\n   */\n  const changePage = (params = {}) => {\n    const currentParams = getRequestParams(params);\n\n    return load(replace, currentParams);\n  };\n\n  /**\n   * @name reload\n   *\n   * @description\n   * Reloads the current collection\n   *\n   * @inner\n   * @type {function}\n   * @returns {Promise.<void>}\n   */\n  const reload = () => {\n    const params = paymentDrafts.params;\n    const currentPage = state.pageParams.currentPage;\n    const from = state.pageParams.currentPage ? (state.pageParams.currentPage - 1) : 0;\n    const size = (params.from + 1) * params.size;\n    return load(replace, { currentPage, from, size });\n  };\n\n  /**\n   * @name onSort\n   * @type {function}\n   * @description\n   * Loads sorted list of payment drafts\n   * @param  {string} orderBy   Column key to sort\n   * @param  {string} direction Sort direction\n   */\n  const onSort = (orderBy, direction) => {\n    Object.assign(paymentDrafts.params, {\n      orderBy,\n      direction,\n    });\n    reload();\n  };\n\n  /**\n   * AngularJS Lifecycle hook used to initialize the controller\n   *\n   * @name PaymentDraftController#$onInit\n   * @type {function}\n   * @returns {Promise.<module:model-bb-payment-ng.PaymentDrafts, ModelError>}\n   */\n  const $onInit = () => load(replace)\n    .then(() => {\n      state.initialLoading = false;\n    })\n    .catch(() => {\n      state.initialLoading = false;\n    });\n\n  /**\n   * @name deleteDraft\n   * @type {function}\n   * @description\n   * Save draft payment\n   *\n   * @param {string} draftPaymentId\n   * @returns {Promise}\n   */\n  const deleteDraft = draftPaymentId => model.deleteDraft(draftPaymentId);\n\n  Object.assign($ctrl, {\n    state,\n    dismissTime,\n    load,\n    $onInit,\n    loadMore,\n    onSort,\n    changePage,\n    deleteDraft,\n    reload,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-drafts-ng/scripts/controller.js","/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bb-mangage-payment-drafts-ng\n */\n\n/**\n * @name Hooks#processPaymentDrafts\n * @type {function}\n *\n * @description\n * Hook for processing payment drafts.\n *\n * @param drafts {array} drafts to process\n * @returns {array} Processed drafts\n */\nexport const processPaymentDrafts = drafts => drafts;\n\n/**\n * @name Hooks#defaultSortableColumn\n *\n * @description\n * defaultSortableColumn default hook\n *\n * @type {function}\n * @returns {?string}\n */\nexport const defaultSortableColumn = () => null;\n\n/**\n * @name Hooks#defaultSortableDirection\n *\n * @description\n * defaultSortableDirection default hook\n *\n * @type {function}\n * @returns {?string}\n */\nexport const defaultSortableDirection = () => null;\n\n/**\n * @name Hooks#truncateParams\n *\n * @description\n * truncateParams default hook\n *\n * @type {function}\n * @returns {object}\n */\nexport const truncateParams = params => params;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-drafts-ng/scripts/default-hooks.js"],"sourceRoot":""}