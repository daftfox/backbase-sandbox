{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6***************","webpack:///webpack/bootstrap d55e1b15032dbd9fb9d3?118c***************","webpack:///./widget-bus-contact-approvals-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*******","webpack:///external \"lib-bb-widget-ng\"?84ad**","webpack:///external \"lib-bb-model-errors\"?7567***","webpack:///external \"lib-bb-widget-extension-ng\"?b547*","webpack:///external \"lib-bb-event-bus-ng\"?8215*","webpack:///external \"lib-bb-intent-ng\"?add1*","webpack:///./widget-bus-contact-approvals-ng/scripts/index.js","webpack:///external \"model-bus-contact-approvals-ng\"","webpack:///./widget-bus-contact-approvals-ng/scripts/controller.js","webpack:///./widget-bus-contact-approvals-ng/scripts/constants.js","webpack:///./widget-bus-contact-approvals-ng/scripts/default-hooks.js"],"names":["defaultHooks","hooksKey","angular","module","modelContactApprovalsModuleKey","eventBusModuleKey","widgetModuleKey","bbIntentModuleKey","factory","controller","modelContactApprovalsKey","eventBusKey","widgetKey","Controller","run","bbIntentKey","bbIntent","init","name","ContactApprovalsController","errorMessages","E_AUTH","E_CONNECTIVITY","E_USER","E_UNEXPECTED","DEFAULT_PAGE_SIZE","DEFAULT_MAX_NAV_PAGES","DEFAULT_PAGINATION_TYPE","DEFAULT_DISMISS_TIME","Page","DETAILS","LIST","uiError","message","modelError","code","model","hooks","bus","Promise","widget","pageSize","getLongPreference","maxNavPages","paginationType","getStringPreference","dismissTime","approvals","rawItems","params","from","size","state","approval","data","updating","loading","hasMore","error","initialLoading","page","pageParams","notifications","navigateTo","closeContactApprovalDetails","getSelectedApproval","defaultValue","copy","hasApprovals","Boolean","length","selectApproval","append","newItems","existingItems","replace","items","getLoadMethod","methodType","LoadMethod","APPROVALS","getApprovals","USER_APPROVALS","getUserApprovals","Error","load","merge","loadApprovals","getLoadMethodType","requestParams","processRequestParams","then","raw","totalCount","totalItems","processApprovals","processedApprovals","catch","publish","Event","CONTACT_SERVER_ERROR","getRequestParams","Object","assign","currentPage","changePage","currentParams","reload","pagesCount","loadMore","done","resolve","bindEvents","subscribe","NOTIFICATION_EVENT","notification","push","notifyOnAuthSuccess","CONTACT_AUTH_SUCCESS","res","notifyOnAuthFail","CONTACT_AUTH_FAIL","err","authorize","authorizeContact","requestId","notifyOnRejectSuccess","CONTACT_REJECT_SUCCESS","notifyOnRejectFail","CONTACT_REJECT_FAIL","reject","rejectContact","$onInit","loadPromise","CXP_ITEM_LOADED","id","getId","BB_ITEM_LOADED","selectedApproval","defaultParams"],"mappings":"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","file":"widget-bus-contact-approvals-ng/scripts/widget-bus-contact-approvals-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"), require(\"model-bus-contact-approvals-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bus-contact-approvals-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-widget-extension-ng\", \"lib-bb-event-bus-ng\", \"lib-bb-intent-ng\", \"model-bus-contact-approvals-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bus-contact-approvals-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"), require(\"model-bus-contact-approvals-ng\"));\n\telse\n\t\troot[\"widget-bus-contact-approvals-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-widget-extension-ng\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-intent-ng\"], root[\"model-bus-contact-approvals-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_69__, __WEBPACK_EXTERNAL_MODULE_73__, __WEBPACK_EXTERNAL_MODULE_84__, __WEBPACK_EXTERNAL_MODULE_86__, __WEBPACK_EXTERNAL_MODULE_87__, __WEBPACK_EXTERNAL_MODULE_109__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d55e1b15032dbd9fb9d3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bus-contact-approvals-ng/model.xml\n// module id = 0\n// module chunks = 16","module.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 53\n// module chunks = 5 9 10 11 12 13 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_69__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 69\n// module chunks = 9 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_73__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 73\n// module chunks = 9 10 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_84__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 84\n// module chunks = 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_86__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 86\n// module chunks = 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_87__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 87\n// module chunks = 14 15 16","/* global window */\n/**\n * @module widget-bus-contact-approvals-ng\n *\n * @description\n * Contact Approvals widget\n */\nimport angular from 'vendor-bb-angular';\n\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport modelContactApprovalsModuleKey,\n  { modelContactApprovalsKey } from 'model-bus-contact-approvals-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport eventBusModuleKey, { eventBusKey } from 'lib-bb-event-bus-ng';\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\n\nimport Controller from './controller';\nimport * as defaultHooks from './default-hooks';\n\nconst hooksKey = 'widget-bus-contact-approvals-ng:hooks';\n\n/**\n * @name default\n * @type {string}\n * @description Angular module name\n */\nexport default angular\n  .module('widget-bus-contact-approvals-ng', [\n    modelContactApprovalsModuleKey,\n    eventBusModuleKey,\n    widgetModuleKey,\n    bbIntentModuleKey,\n  ])\n  .factory(hooksKey, extendHooks(defaultHooks))\n  .controller('ContactApprovalsController', [\n    modelContactApprovalsKey,\n    hooksKey,\n    eventBusKey,\n    '$q',\n    widgetKey,\n    /* into */\n    Controller,\n  ])\n  .run([bbIntentKey, (bbIntent) => {\n    bbIntent.init();\n  }])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bus-contact-approvals-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_109__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bus-contact-approvals-ng\"\n// module id = 109\n// module chunks = 16","/* global window */\nimport angular from 'vendor-bb-angular';\nimport { E_AUTH, E_CONNECTIVITY, E_USER, E_UNEXPECTED } from 'lib-bb-model-errors';\nimport { Event, LoadMethod } from './constants';\n\nconst errorMessages = {\n  [E_AUTH]: 'approval.model.error.auth',\n  [E_CONNECTIVITY]: 'approval.model.error.connectivity',\n  [E_USER]: 'approval.model.error.user',\n  [E_UNEXPECTED]: 'approval.model.error.unexpected',\n};\n\n/**\n * Defines the default pageSize for the contact approvals page\n * which is 50, as defined in the widget model.xml\n * @inner\n * @type {number}\n */\nconst DEFAULT_PAGE_SIZE = 50;\n\n/**\n * Defines the default maxNavPages for the contact approvals page\n * as defined in the widget model.xml\n * @inner\n * @type {number}\n */\nconst DEFAULT_MAX_NAV_PAGES = 3;\n\n/**\n * Defines the default paginationType for the contact approvals page\n * as defined in the widget model.xml\n * @inner\n * @type {string}\n */\nconst DEFAULT_PAGINATION_TYPE = 'load-more';\n\n/**\n * @description\n * Defines default time in seconds after which\n * notification dismisses\n * @inner\n * @type {number}\n */\nconst DEFAULT_DISMISS_TIME = 3;\n\n/**\n * Defines widget page enumeration\n * @inner\n * @enum {string}\n * @type {object}\n */\nconst Page = {\n  DETAILS: 'details',\n  LIST: 'list',\n};\n\n/**\n * @description\n * Creates an error object for template\n *\n * @name uiError\n *\n * @inner\n * @param {object} modelError Error object\n * @type {function}\n * @returns {{message: string}}\n */\nconst uiError = modelError => {\n  let message = '';\n\n  if (modelError && modelError.code) {\n    message = errorMessages[modelError.code];\n  }\n\n  return { message };\n};\n\n/**\n * @name ContactApprovalsController\n *\n * @description\n * Contact Approvals widget controller\n *\n * @type {function}\n */\nexport default function ContactApprovalsController(model, hooks, bus, Promise, widget) {\n  const pageSize = widget.getLongPreference('bb.contact-approvals.pageSize') || DEFAULT_PAGE_SIZE;\n  const maxNavPages = widget.getLongPreference('bb.contact-approvals.maxNavPages') ||\n    DEFAULT_MAX_NAV_PAGES;\n  const paginationType =\n    widget.getStringPreference('bb.contact-approvals.paginationType') || DEFAULT_PAGINATION_TYPE;\n  const dismissTime = widget.getLongPreference('bb.contact-approvals.notificationDismissTime') ||\n    DEFAULT_DISMISS_TIME;\n\n  const approvals = {\n    rawItems: [],\n    params: {\n      from: 0,\n      size: pageSize,\n      maxNavPages,\n      paginationType,\n    },\n  };\n\n  /**\n   * @description\n   * Holds current controller state made by\n   * previous method executions\n   *\n   * @name state\n   *\n   * @type {object}\n   */\n  const state = {\n    approval: {\n      data: null,\n      updating: false,\n    },\n    approvals: {\n      data: null,\n      loading: false,\n      hasMore: false,\n    },\n    error: null,\n    initialLoading: true,\n    page: Page.LIST,\n    pageParams: approvals.params,\n    notifications: [],\n  };\n\n  /**\n   * @name navigateTo\n   * @description Changes current page in widget\n   * @type {function}\n   * @inner\n   * @param {string} page Page to navigate to\n   */\n  function navigateTo(page) {\n    state.page = page;\n  }\n\n  /**\n   * @name closeContactApprovalDetails\n   *\n   * @description\n   * Handles click on Back button on Contact Approval details page.\n   * Navigates the user to the Contact Approvals list view.\n   *\n   * @type {function}\n   */\n  function closeContactApprovalDetails() {\n    navigateTo(Page.LIST);\n  }\n\n  /**\n   * Returns deep copy of currently selected approval\n   *\n   * @inner\n   * @param {object} defaultValue Default value to return\n   * @returns {object} Selected approval\n   */\n  function getSelectedApproval(defaultValue) {\n    return angular.copy(hooks.getSelectedApproval(state.approvals.data, defaultValue));\n  }\n\n  /**\n   * @name hasApprovals\n   * @description\n   * If contact approvals found returns true, else false\n   *\n   * @type {function}\n   * @returns {boolean}\n   */\n  function hasApprovals() {\n    return Boolean(state.approvals.data && state.approvals.data.length);\n  }\n\n  /**\n   * @name selectApproval\n   * @description\n   * Handles clicks on contact approval in the list.\n   * Navigates the user to the details view.\n   *\n   * @param {object} contact Contact approval object\n   * @type {function}\n   * @fires bb.event.contact.selected\n   */\n  function selectApproval(approval) {\n    state.approval.data = angular.copy(approval);\n\n    navigateTo(Page.DETAILS);\n  }\n\n  /**\n   * Merges new items with existing items\n   *\n   * @inner\n   * @name append\n   * @type {function}\n   * @returns {array} merged array of old and new items\n   */\n  function append(newItems, existingItems) {\n    return [...existingItems, ...newItems];\n  }\n\n  /**\n   * Replaces existing items with new items\n   *\n   * @inner\n   * @name replace\n   * @type {function}\n   * @returns {array} new items\n   */\n  function replace(items) {\n    return items;\n  }\n\n  /**\n   * Returns Model method based on the provided type\n   *\n   * @name getLoadMethod\n   * @inner\n   * @type {function}\n   * @param {string} methodType Model method type\n   */\n  function getLoadMethod(methodType) {\n    switch (methodType) {\n      case LoadMethod.APPROVALS:\n        return model.getApprovals;\n      case LoadMethod.USER_APPROVALS:\n        return model.getUserApprovals;\n      default:\n        throw new Error(`Model method of type ${methodType} doesn't exist.`);\n    }\n  }\n\n  /**\n   * @name load\n   *\n   * @description\n   * Loads contact approval data\n   *\n   * @inner\n   * @type {function}\n   * @param {{ size: {number} }} params Request params\n   * @param {function} merge Function to merge loaded contact approvals to the previous ones\n   * @returns {Promise} Promise which is resolved once contact approvals\n   * are loaded and processed, or rejected in case of errors.\n   */\n  function load(params, merge = replace) {\n    const loadApprovals = getLoadMethod(hooks.getLoadMethodType(LoadMethod));\n    const requestParams = hooks.processRequestParams(approvals.params, params);\n\n    state.approvals.loading = true;\n\n    return loadApprovals(requestParams)\n      .then(raw => {\n        approvals.rawItems = merge(raw.data, approvals.rawItems);\n        state.approvals.hasMore = approvals.rawItems.length < raw.totalCount;\n        state.pageParams.totalItems = raw.totalCount || 0;\n        return approvals.rawItems;\n      })\n      .then(hooks.processApprovals)\n      .then(processedApprovals => {\n        state.approvals.data = processedApprovals;\n        state.approval.data = getSelectedApproval(state.approval.data);\n        state.approvals.loading = false;\n      })\n      .catch(error => {\n        state.error = uiError(error);\n        state.approvals.loading = false;\n        bus.publish(Event.CONTACT_SERVER_ERROR, error);\n      });\n  }\n\n  /**\n   * @description\n   * Get params for request.\n   *\n   * @name ContactApprovalsController#getRequestParams\n   *\n   * @inner\n   * @param {Object} params Custom params\n   * @type {function}\n   * @returns {Object} A request params\n   */\n  const getRequestParams = (params) => Object.assign({}, approvals.params, {\n    // In BE services pagination starts from 0 page, but in bootstrap directive it's 1\n    from: params.currentPage - 1,\n  }, params);\n\n  /**\n   * @description\n   * Change page of displayed contact approvals.\n   *\n   * @name ContactApprovalsController#changePage\n   * @type {function}\n   * @returns {Promise.<module:model-bus-contact-approvals-ng.ContactApprovals, ModelError>}\n   * A Promise with loaded contact approvals\n   */\n  const changePage = (params = {}) => {\n    const currentParams = getRequestParams(params);\n\n    return load(currentParams);\n  };\n\n  /**\n   * @name reload\n   *\n   * @description\n   * Reloads the entire list of stored contact approvals\n   *\n   * @inner\n   * @type {function}\n   * @return {Promise}\n   */\n  function reload() {\n    const from = 0;\n\n    const pagesCount = approvals.params.from + 1;\n    const size = pagesCount * approvals.params.size;\n\n    return load({ from, size }, replace);\n  }\n\n  /**\n   * @name loadMore\n   *\n   * @description\n   * Loads more contact approvals if they are available.\n   *\n   * @type {function}\n   * @param {function} done Callback to be called when load action finishes\n   * @returns {Promise}\n   */\n  function loadMore(done) {\n    if (!state.approvals.hasMore || state.approvals.loading) {\n      return Promise.resolve();\n    }\n\n    approvals.params.from++;\n\n    return load({}, append)\n      .then(done)\n      .catch(() => {\n        approvals.params.from--;\n        done();\n      });\n  }\n\n  /**\n   * @name bindEvents\n   *\n   * @description\n   * Adds subscriptions to bus events\n   *\n   * @inner\n   * @type {function}\n   */\n  function bindEvents() {\n    bus.subscribe(Event.NOTIFICATION_EVENT, (notification) => {\n      state.notifications.push(notification);\n    });\n  }\n\n  /**\n   * @name notifyOnAuthSuccess\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Emit events based on authorization request's success.\n   *\n   * @fires bb.event.contact.auth.success\n   *\n   * @returns {object}\n   */\n  const notifyOnAuthSuccess = res => {\n    bus.publish(Event.CONTACT_AUTH_SUCCESS, res);\n  };\n\n  /**\n   * @name notifyOnAuthFail\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Emit events based on authorization request's failure.\n   *\n   * @fires bb.event.contact.auth.fail\n   *\n   * @returns {object}\n   */\n  const notifyOnAuthFail = err => {\n    bus.publish(Event.CONTACT_AUTH_FAIL, err);\n  };\n\n  /**\n   * @name authorize\n   * @type {function}\n   *\n   * @description\n   * Authorize contact approval request\n   *\n   * @param {string} requestId Id of the contact approval request\n   * @returns {Promise}\n   */\n  const authorize = requestId => {\n    state.approval.updating = true;\n\n    return model.authorizeContact(requestId)\n      .then(res => {\n        state.approval.updating = false;\n\n        notifyOnAuthSuccess(res);\n        closeContactApprovalDetails();\n        reload();\n      })\n      .catch(error => {\n        state.approval.updating = false;\n        notifyOnAuthFail(error);\n      });\n  };\n\n  /**\n   * @name notifyOnRejectSuccess\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Emit events based on rejection request's success.\n   *\n   * @fires bb.event.contact.reject.success\n   *\n   * @returns {object}\n   */\n  const notifyOnRejectSuccess = (res) => {\n    bus.publish(Event.CONTACT_REJECT_SUCCESS, res);\n  };\n\n  /**\n   * @name notifyOnRejectFail\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Emit events based on rejection request's failure.\n   *\n   * @fires bb.event.contact.reject.fail\n   *\n   * @returns {object}\n   */\n  const notifyOnRejectFail = (err) => {\n    bus.publish(Event.CONTACT_REJECT_FAIL, err);\n  };\n\n  /**\n   * @name reject\n   * @type {function}\n   *\n   * @description\n   * Reject contact approval request\n   *\n   * @param {string} requestId Id of the contact approval request\n   * @returns {Promise}\n   */\n  const reject = requestId => {\n    state.approval.updating = true;\n\n    return model.rejectContact(requestId)\n      .then(res => {\n        state.approval.updating = false;\n\n        notifyOnRejectSuccess(res);\n        closeContactApprovalDetails();\n        reload();\n      })\n      .catch(error => {\n        state.approval.updating = false;\n        notifyOnRejectFail(error);\n      });\n  };\n\n  /**\n   * @name ContactApprovalsController#$onInit\n   *\n   * @description\n   * AngularJS Lifecycle hook used to initialize the controller\n   *\n   * @type {function}\n   * @returns {Promise} Promise which is resolved once contoller is initialized,\n   *   or rejected in case of errors\n   */\n  function $onInit() {\n    const loadPromise = load().then(() => {\n      state.initialLoading = false;\n    });\n\n    bindEvents();\n\n    bus.publish(Event.CXP_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    bus.publish(Event.BB_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    return loadPromise;\n  }\n\n  Object.assign(this, {\n    state,\n    dismissTime,\n    selectApproval,\n    hasApprovals,\n    loadMore,\n    closeContactApprovalDetails,\n    authorize,\n    reject,\n    changePage,\n    /* Lifecycle hooks */\n    $onInit,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bus-contact-approvals-ng/scripts/controller.js","/**\n * @description\n * Widget events enum (events generated by the widget)\n *\n * @name Event\n * @type {object}\n */\nexport const Event = {\n  CONTACT_AUTH_SUCCESS: 'bb.event.contact-approvals.auth.success',\n  CONTACT_AUTH_FAIL: 'bb.event.contact-approvals.auth.fail',\n  CONTACT_REJECT_SUCCESS: 'bb.event.contact-approvals.reject.success',\n  CONTACT_REJECT_FAIL: 'bb.event.contact-approvals.reject.fail',\n  CONTACT_SERVER_ERROR: 'bb.event.contact-approvals.server.error',\n  NOTIFICATION_EVENT: 'bb.event.notifications.notify',\n\n  CXP_ITEM_LOADED: 'cxp.item.loaded',\n  BB_ITEM_LOADED: 'bb.item.loaded',\n};\n\n/**\n * @description\n * Widget keys to define which model method\n * to use to load list of contact approvals\n * (depends on extension)\n *\n * @name LoadMethod\n * @type {object}\n */\nexport const LoadMethod = {\n  APPROVALS: 'APPROVALS',\n  USER_APPROVALS: 'USER_APPROVALS',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bus-contact-approvals-ng/scripts/constants.js","/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bus-contact-approvals-ng\n */\n\n/**\n * @name getSelectedApproval\n *\n * @description\n * getSelectedApproval default hook\n *\n * @param {object} approvals Approvals list\n * @param {object} selectedApproval Selected approval\n * @type {function}\n * @returns {object} selectedApproval\n */\nexport function getSelectedApproval(approvals, selectedApproval) {\n  return selectedApproval;\n}\n\n/**\n * @name processApprovals\n *\n * @description\n * processApprovals default hook\n *\n * @param {array.<object>} approvals Raw approvals collection\n * @type {function}\n * @returns {array.<object>} Processed approvals\n */\nexport function processApprovals(approvals) {\n  return approvals;\n}\n\n/**\n * @name processRequestParams\n *\n * @description\n * processRequestParams default hook\n *\n * @param {object} defaultParams\n * @param {object} params\n * @type {function}\n * @returns {object} processed request parameters\n */\nexport function processRequestParams(defaultParams, params) {\n  return Object.assign({}, defaultParams, params);\n}\n\n/**\n * @name getLoadMethodType\n *\n * @description\n * Returns load method type\n *\n * @type {function}\n * @param {object} LoadMethod Predefined enumeration of available load methods\n * @returns {string} Load method type\n */\nexport function getLoadMethodType(LoadMethod) {\n  return LoadMethod.APPROVALS;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bus-contact-approvals-ng/scripts/default-hooks.js"],"sourceRoot":""}