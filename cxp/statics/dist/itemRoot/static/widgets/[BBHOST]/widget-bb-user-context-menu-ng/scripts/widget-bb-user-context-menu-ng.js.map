{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6********************","webpack:///webpack/bootstrap 70daa42420248d0dae68?ba28********************","webpack:///./widget-bb-user-context-menu-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114***********","webpack:///external \"lib-bb-widget-extension-ng\"?b547*","webpack:///external \"lib-bb-intent-ng\"?add1**","webpack:///external \"lib-bb-widget-ng\"?84ad****","webpack:///external \"lib-bb-storage-ng\"?d742","webpack:///external \"model-bb-login-ng\"?ff84","webpack:///external \"lib-bb-user-data-ng\"?1b2b","webpack:///external \"model-bb-select-context-ng\"?a114","webpack:///./widget-bb-user-context-menu-ng/scripts/index.js","webpack:///./widget-bb-user-context-menu-ng/scripts/controller.js","webpack:///./widget-bb-user-context-menu-ng/scripts/constants.js","webpack:///./widget-bb-user-context-menu-ng/scripts/default-hooks.js","webpack:///./widget-bb-user-context-menu-ng/scripts/view-model.js"],"names":["moduleKey","hooksKey","viewModelKey","angular","module","widgetModuleKey","modelLoginModuleKey","modelSelectContextModuleKey","bbIntentModuleKey","bbUserDataModuleKey","bbStorageModuleKey","factory","defaultHooks","ViewModel","controller","modelLoginKey","modelSelectContextKey","bbUserDataServiceKey","widgetKey","bbStorageServiceKey","Controller","run","bbIntentKey","bbIntent","init","name","UserContextMenuController","hooks","model","contextModel","userDataService","widgetInstance","viewModel","$window","bbStorage","$ctrl","portal","window","b$","logoutRedirectPage","getStringPreference","settings","LOGOUT_REDIRECT_PAGE","userDataUrl","USER_DATA_URL","changeContextRedirectPage","CHANGE_CONTEXT_REDIRECT_PAGE","DEFAULT_CHANGE_CONTEXT_REDIRECT_PAGE","cookieTTL","REMEMBER_PREFERENCES_TTL","listSize","getLongPreference","LIST_SIZE","DEFAULT_LIST_SIZE","changeContextRedirectUrl","config","serverRoot","portalName","logoutRedirectUrl","debounce","DEBOUNCE_TIME","from","sa","le","logout","then","removeItem","BbStorageKeys","PRODUCT_SUMMARY","PRODUCT_SELECTED","PRODUCTS_SELECTED","CONTACT_SELECTED","location","assign","loggedUser","console","warn","currentUser","getCurrentContext","contextNames","JSON","parse","getCookie","contextCookieNames","CONTEXT_NAMES","error","NO_CONTEXT_NAMES","getUserFromPortal","getUserData","processProfileData","userData","$onInit","resetServiceAgreements","resetLegalEntity","resetLegalEntities","changeUserContext","serviceAgreementId","legalEntityId","selectUserContext","isSuccess","setCookie","contract","getServiceAgreementName","company","getLegalEntityName","Promise","reject","catch","selectContextError","getLegalEntities","id","options","isLoadMore","requestParams","size","query","searchQuery","getServiceAgreementId","appendLegalEntities","resp","totalItems","setLegalEntity","data","fetchError","selectServiceAgreement","setServiceAgreement","getServiceAgreements","appendServiceAgreements","currentServiceAgreement","find","item","selectLegalEntity","togglePopover","Object","defineProperty","get","state","REMEMBER_ME_COOKIE_NAME","user","value","days","date","Date","setTime","getTime","document","cookie","stringify","toGMTString","split","reduce","cookies","key","decodeURIComponent","append","newItems","existingItems","serviceAgreementName","getLegalEntityId","legalEntityName","isServiceAgreementsShown","Boolean","showServiceAgreements","isLegalEntitiesDisabled","disableLegalEntities","setServiceAgreementsShown","setLegalEntitiesDisabled","hasMoreServiceAgreements","serviceAgreements","hasMore","rawItems","length","raw","hasMoreLegalEntities","legalEntities","getInitialState"],"mappings":"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","file":"widget-bb-user-context-menu-ng/scripts/widget-bb-user-context-menu-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-storage-ng\"), require(\"model-bb-login-ng\"), require(\"lib-bb-user-data-ng\"), require(\"model-bb-select-context-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-user-context-menu-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-extension-ng\", \"lib-bb-intent-ng\", \"lib-bb-widget-ng\", \"lib-bb-storage-ng\", \"model-bb-login-ng\", \"lib-bb-user-data-ng\", \"model-bb-select-context-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-user-context-menu-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-storage-ng\"), require(\"model-bb-login-ng\"), require(\"lib-bb-user-data-ng\"), require(\"model-bb-select-context-ng\"));\n\telse\n\t\troot[\"widget-bb-user-context-menu-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-extension-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-storage-ng\"], root[\"model-bb-login-ng\"], root[\"lib-bb-user-data-ng\"], root[\"model-bb-select-context-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_50__, __WEBPACK_EXTERNAL_MODULE_51__, __WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_62__, __WEBPACK_EXTERNAL_MODULE_64__, __WEBPACK_EXTERNAL_MODULE_68__, __WEBPACK_EXTERNAL_MODULE_69__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70daa42420248d0dae68","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-user-context-menu-ng/model.xml\n// module id = 0\n// module chunks = 21","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 9 10 11 12 13 14 15 16 17 18 19 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_50__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 50\n// module chunks = 15 19 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_51__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 51\n// module chunks = 15 16 18 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 53\n// module chunks = 15 16 17 18 19 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_62__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-storage-ng\"\n// module id = 62\n// module chunks = 18 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_64__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-login-ng\"\n// module id = 64\n// module chunks = 18 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_68__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-user-data-ng\"\n// module id = 68\n// module chunks = 19 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_69__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-select-context-ng\"\n// module id = 69\n// module chunks = 19 21","/**\n * @module widget-bb-user-context-menu-ng\n *\n * @description\n * User Context Menu widget\n */\nimport angular from 'vendor-bb-angular';\n\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\nimport bbUserDataModuleKey, { bbUserDataServiceKey } from 'lib-bb-user-data-ng';\nimport modelLoginModuleKey, { modelLoginKey } from 'model-bb-login-ng';\nimport modelSelectContextModuleKey, { modelSelectContextKey } from 'model-bb-select-context-ng';\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport bbStorageModuleKey, { bbStorageServiceKey } from 'lib-bb-storage-ng';\n\nimport Controller from './controller';\nimport defaultHooks from './default-hooks';\n\nimport ViewModel from './view-model';\n\nconst moduleKey = 'widget-bb-user-context-menu-ng';\nconst hooksKey = `${moduleKey}:hooks`;\nconst viewModelKey = `${moduleKey}:viewModel`;\n\nexport default angular\n  .module(moduleKey, [\n    widgetModuleKey,\n    modelLoginModuleKey,\n    modelSelectContextModuleKey,\n    bbIntentModuleKey,\n    bbUserDataModuleKey,\n    bbStorageModuleKey,\n  ])\n  .factory(hooksKey, extendHooks(defaultHooks))\n  .factory(viewModelKey, [ViewModel])\n  .controller('UserContextMenuController', [\n    // dependencies to inject\n    hooksKey,\n    modelLoginKey,\n    modelSelectContextKey,\n    bbUserDataServiceKey,\n    widgetKey,\n    viewModelKey,\n    '$window',\n    bbStorageServiceKey,\n    /* into */\n    Controller,\n  ])\n\n  .run([bbIntentKey, (bbIntent) => {\n    bbIntent.init();\n  }])\n\n  .name;\n\n/**\n * @typedef {object} User\n * @property {string} name Name that should be displayed on page\n * @property {?string} username Internal user identifier\n */\n\n/**\n * @typedef {object} Portal\n * @property {string} loggedInUserId Internally used unique identification of the user\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-context-menu-ng/scripts/index.js","/* global window */\n\nimport settings, {\n  contextCookieNames,\n  DEFAULT_LIST_SIZE,\n  DEFAULT_CHANGE_CONTEXT_REDIRECT_PAGE,\n  DEBOUNCE_TIME,\n  NO_CONTEXT_NAMES,\n  BbStorageKeys } from './constants';\n\n/**\n * @name UserContextMenuController\n * @type {object}\n *\n * @description\n * User Context Menu widget\n */\nexport default function UserContextMenuController(\n  hooks,\n  model,\n  contextModel,\n  userDataService,\n  widgetInstance,\n  viewModel,\n  $window,\n  bbStorage) {\n  const $ctrl = this;\n  const portal = window.b$ && window.b$.portal;\n\n  const logoutRedirectPage =\n    widgetInstance.getStringPreference(settings.LOGOUT_REDIRECT_PAGE);\n  const userDataUrl = widgetInstance.getStringPreference(settings.USER_DATA_URL);\n  const changeContextRedirectPage =\n    widgetInstance.getStringPreference(settings.CHANGE_CONTEXT_REDIRECT_PAGE)\n    || DEFAULT_CHANGE_CONTEXT_REDIRECT_PAGE;\n  const cookieTTL = widgetInstance.getStringPreference(settings.REMEMBER_PREFERENCES_TTL);\n  const listSize = widgetInstance.getLongPreference(settings.LIST_SIZE) || DEFAULT_LIST_SIZE;\n\n  const changeContextRedirectUrl = portal ?\n    `${portal.config.serverRoot}/${portal.portalName}/${changeContextRedirectPage}` :\n    changeContextRedirectPage;\n\n  const logoutRedirectUrl = portal ?\n    `${portal.config.serverRoot}/${portal.portalName}/${logoutRedirectPage}` :\n    logoutRedirectPage;\n\n  $ctrl.debounce = DEBOUNCE_TIME;\n\n  const from = {\n    sa: 0,\n    le: 0,\n  };\n\n  /**\n   * @name  UserContextMenuController#logout\n   * @type {function}\n   *\n   * @description\n   * Log user out and redirect to the login page\n   */\n  const logout = () => {\n    model.logout()\n      .then(() => {\n        bbStorage.removeItem(BbStorageKeys.PRODUCT_SUMMARY);\n        bbStorage.removeItem(BbStorageKeys.PRODUCT_SELECTED);\n        bbStorage.removeItem(BbStorageKeys.PRODUCTS_SELECTED);\n        bbStorage.removeItem(BbStorageKeys.CONTACT_SELECTED);\n      })\n      .then(() => {\n        $window.location.assign(logoutRedirectUrl);\n      });\n  };\n\n  const loggedUser = () => {\n    // eslint-disable-next-line max-len, no-console\n    console.warn('DEPRECATED - loggedUser method will be removed in the next component major release. Use \\'currentUser\\' object instead.');\n    return $ctrl.currentUser.name || '';\n  };\n\n  /**\n   * @name UserContextMenuController#getCurrentContext\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Read user's context from the cookie. Log user out if context names not found\n   */\n  const getCurrentContext = () => {\n    try {\n      $ctrl.contextNames = JSON.parse(hooks.getCookie(contextCookieNames.CONTEXT_NAMES));\n    } catch (error) {\n      $ctrl.contextNames = NO_CONTEXT_NAMES;\n    }\n  };\n\n  /**\n   * @name getUserFromPortal\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Retrieves information about currently logged in user from CX endpoint or CXP global object\n   *\n   * @returns {Promise}\n   */\n  const getUserFromPortal = () =>\n    userDataService.getUserData()\n      .then(userData => {\n        $ctrl.currentUser = hooks.processProfileData(userData);\n      });\n\n\n  const $onInit = () => {\n    getCurrentContext();\n    return getUserFromPortal();\n  };\n\n  /**\n   * @name UserContextMenuController#resetServiceAgreements\n   * @type {function}\n   *\n   * @desription\n   * Clear Service Agreement selector and reset Legal Entities list\n   *\n   * @param {?boolean} resetLegalEntity Is selected Legal Entity should be reset\n   */\n  const resetServiceAgreements = (resetLegalEntity = false) => {\n    viewModel.resetServiceAgreements(resetLegalEntity);\n    from.sa = 0;\n  };\n\n  /**\n   * @name UserContextMenuController#resetLegalEntities\n   * @type {function}\n   *\n   * @inner\n   *\n   * @desription\n   * Clear Legal Entities selector\n   */\n  const resetLegalEntities = () => {\n    viewModel.resetLegalEntities();\n    from.le = 0;\n  };\n\n  /**\n   * @name  UserContextMenuController#changeUserContext\n   * @type {function}\n   *\n   * @description\n   * Change user context by Service Agreemenet and Legal Entity IDs combination\n   *\n   * @param {string} serviceAgreementId\n   * @param {string} legalEntityId\n   * @return {Promise}\n   */\n  const changeUserContext = (serviceAgreementId, legalEntityId) =>\n    contextModel.selectUserContext(serviceAgreementId, legalEntityId)\n      .then(isSuccess => {\n        if (isSuccess) {\n          // TODO: Enable \"Remember me\" functionality when service is ready\n          // if ($ctrl.savePreferences) {\n          //   hooks.setCookie(contextCookieNames.REMEMBER_ME_COOKIE_NAME, true, cookieTTL);\n          // } else {\n          //   hooks.setCookie(contextCookieNames.REMEMBER_ME_COOKIE_NAME, false, 0);\n          // }\n\n          hooks.setCookie(\n            contextCookieNames.CONTEXT_NAMES,\n            {\n              contract: viewModel.getServiceAgreementName(),\n              company: viewModel.getLegalEntityName(),\n            },\n            cookieTTL);\n\n          $window.location.assign(changeContextRedirectUrl);\n        } else {\n          return Promise.reject('Failed while creating a User Context');\n        }\n\n        return isSuccess;\n      }).catch(() => {\n        $ctrl.selectContextError = true;\n      });\n\n  /**\n   * @name UserContextMenuController#getLegalEntities\n   * @type {function}\n   *\n   * @description\n   * Request Legal Entities list by Service Agreement ID and searched name\n   *\n   * @param {string} id                                   Service Agreement ID\n   * @param  {object} options                             Params to send to the request\n   * @returns {Promise.<ServiceAgreements, ModelError>}   A Promise\n   */\n  const getLegalEntities = (id, options = {}) => {\n    if (!options.isLoadMore) {\n      resetLegalEntities();\n    }\n\n    const requestParams = { from: from.le, size: listSize, query: options.searchQuery };\n\n    return contextModel.getLegalEntities(viewModel.getServiceAgreementId(), requestParams)\n      .then(resp => {\n        viewModel.appendLegalEntities(resp);\n        if (resp.totalItems === 1 && !options.searchQuery) {\n          viewModel.setLegalEntity(resp.data[0].id, resp.data[0].name);\n        }\n\n        from.le++;\n        return viewModel.getLegalEntities();\n      }).catch(() => {\n        from.le--;\n        $ctrl.fetchError = true;\n      });\n  };\n\n  /**\n   * @name  UserContextMenuController#selectServiceAgreement\n   * @type {function}\n   *\n   * @description\n   * Define Service Agreement ID and request Legal Entities list for it\n   *\n   * @param {object} model Service Agreement item\n   */\n  const selectServiceAgreement = ({ id, name }) => {\n    from.le = 0;\n    viewModel.setServiceAgreement(id, name);\n    return getLegalEntities(id);\n  };\n\n  /**\n   * @name UserContextMenuController#getServiceAgreements\n   * @type {function}\n   *\n   * @description\n   * Request Service Agreements list by searched name\n   *\n   * @param  {object} options                             Params to send to the request\n   * @returns {Promise.<ServiceAgreements, ModelError>}   A Promise\n   */\n  const getServiceAgreements = (options = {}) => {\n    if (!options.isLoadMore) {\n      resetServiceAgreements();\n    }\n\n    const requestParams = { from: from.sa, size: listSize, query: options.searchQuery };\n    return contextModel.getServiceAgreements(requestParams)\n      .then(resp => {\n        viewModel.appendServiceAgreements(resp);\n\n        if (!options.isLoadMore) {\n          if (resp.data && $ctrl.contextNames.contract && !viewModel.getServiceAgreementId()) {\n            const currentServiceAgreement =\n              resp.data.find(item => item.name === $ctrl.contextNames.contract);\n            if (currentServiceAgreement) {\n              viewModel.setServiceAgreement(currentServiceAgreement.id);\n              getLegalEntities(currentServiceAgreement.id);\n            }\n          }\n        }\n\n        from.sa++;\n        return viewModel.getServiceAgreements();\n      })\n      .catch(() => {\n        from.sa--;\n        $ctrl.fetchError = true;\n      });\n  };\n\n  /**\n   * @name  SelectContextController#selectLegalEntity\n   * @type {function}\n   *\n   * @description\n   * Define Legal Entity ID\n   *\n   * @param {object} model Legal Entity item\n   */\n  const selectLegalEntity = ({ id, name }) => {\n    viewModel.setLegalEntity(id, name);\n  };\n\n  /**\n   * @name UserContextMenuController#togglePopover\n   * @type {function}\n   *\n   * @desription\n   * Request Service Agreements on toggle popover\n   *\n   * @returns {Promise.<ServiceAgreements, ModelError>}   A Promise\n   */\n  const togglePopover = () => getServiceAgreements();\n\n  Object.defineProperty($ctrl, 'state', {\n    get() {\n      return viewModel.state;\n    },\n  });\n\n  Object.assign($ctrl, {\n    /**\n     * @description AngularJS Lifecycle hook used to initialize the controller\n     * @type {function}\n     *\n     * @name UserContextMenuController#$onInit\n     * @returns {Promise.<void>}\n     */\n    $onInit,\n    /**\n     * @description Logout function\n     * @type {function}\n     *\n     * @name UserContextMenuController#logout\n     * @returns {Promise}\n     */\n    logout,\n    /**\n     * @description Currently logged in user's data object\n     * @name UserContextMenuController#currentUser\n     * @type {User}\n     */\n    currentUser: {},\n    /**\n     * @description Retrieves logged in user id\n     * Returns empty string if user is not found (deprecated)\n     * @type {function}\n     *\n     * @name UserContextMenuController#loggedUser\n     * @returns {string}\n     */\n    loggedUser,\n    /**\n     * @description URL that leads to the page with additional user data\n     * @name UserContextMenuController#userDataUrl\n     * @type {string}\n     */\n    userDataUrl,\n    /**\n     * @description Request available Service Agreements\n     * @type {function}\n     *\n     * @name UserContextMenuController#getServiceAgreements\n     * @returns {Promise}\n     */\n    getServiceAgreements,\n    /**\n     * @description Request available Legal Entities\n     * @type {function}\n     *\n     * @name UserContextMenuController#getLegalEntities\n     * @returns {Promise}\n     */\n    getLegalEntities,\n    /**\n     * @description Select Service Agreement and request available Legal Entities\n     * @type {function}\n     *\n     * @name UserContextMenuController#selectServiceAgreement\n     * @returns {Promise}\n     */\n    selectServiceAgreement,\n    /**\n     * @description Select Legal Entity\n     * @type {function}\n     *\n     * @name UserContextMenuController#selectLegalEntity\n     * @returns {Promise}\n     */\n    selectLegalEntity,\n    /**\n     * @description Change User Context by specifying new combination of\n     * User Agreement and Legal Entity\n     * @type {function}\n     *\n     * @name UserContextMenuController#changeUserContext\n     * @returns {Promise}\n     */\n    changeUserContext,\n    /**\n     * @description Show change User Context form\n     * @type {function}\n     *\n     * @name UserContextMenuController#togglePopover\n     * @returns {Promise}\n     */\n    togglePopover,\n    /**\n     * @description Clear selected Service Agreement and Legal Entities list\n     * @type {function}\n     *\n     * @name UserContextMenuController#resetServiceAgreements\n     * @returns {Promise}\n     */\n    resetServiceAgreements,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-context-menu-ng/scripts/controller.js","/**\n * Context selection page redirection keys\n * @type {Object}\n */\nexport default {\n  CHANGE_CONTEXT_REDIRECT_PAGE: 'changeContextRedirectPage',\n  LOGOUT_REDIRECT_PAGE: 'logoutRedirectPage',\n  REMEMBER_PREFERENCES_TTL: 'rememberPreferencesTTL',\n  USER_DATA_URL: 'userDataUrl',\n  LIST_SIZE: 'listSize',\n};\n\n/**\n * User context cookie names\n * @type {{REMEMBER_ME_COOKIE_NAME: string, CONTEXT_NAMES: string}}\n */\nexport const contextCookieNames = {\n  REMEMBER_ME_COOKIE_NAME: 'REMEMBER_USER_CONTEXT',\n  CONTEXT_NAMES: 'context-names',\n};\n\n/**\n * Amount of items on autocomplete scroll\n * @type {number}\n */\nexport const DEFAULT_LIST_SIZE = 7;\n\n/**\n * Default change context redirect page\n * @type {string}\n */\nexport const DEFAULT_CHANGE_CONTEXT_REDIRECT_PAGE = 'index';\n\n/**\n * Debounce time on autocomplete\n * @type {number}\n */\nexport const DEBOUNCE_TIME = 300;\n\n/**\n * Default empty values for context names\n * @type {object}\n */\nexport const NO_CONTEXT_NAMES = { contract: ' ', company: ' ' };\n\n/**\n * @name BbStorageKeys\n *\n * @description\n * bbStorage keys enum.\n *\n * @type {object}\n */\nexport const BbStorageKeys = {\n  PRODUCT_SUMMARY: 'bb.product.summary.data',\n  PRODUCT_SELECTED: 'bb.product.selected',\n  PRODUCTS_SELECTED: 'bb.event.products.selected',\n  CONTACT_SELECTED: 'bb.contact.selected',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-context-menu-ng/scripts/constants.js","/* global document */\n\n/**\n * @name default-hooks\n * @type {object}\n *\n * @description\n * Default hooks for widget-bb-user-context-menu-ng\n */\n\n/**\n * @name default-hooks#processProfileData\n * @type {function}\n *\n * @description\n * Processes user data retrieved from user profile endpoint\n *\n * @param {User} user User data\n * @returns {User} Processed data\n */\nconst processProfileData = (user) => user;\n\n/**\n * @name default-hooks#setCookie\n * @type {function}\n *\n * @description\n * Save cookie\n *\n * @param {string} name Cookie name\n * @param {*} value     Cookie value\n * @param {number} days Cookie TTL (days)\n */\nexport const setCookie = (name, value, days = 30) => {\n  const date = new Date();\n  date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n  document.cookie = `${name}=${JSON.stringify(value)}; expires=${date.toGMTString()}; path=/`;\n};\n\n/**\n * @name default-hooks#getCookie\n * @type {function}\n *\n * @description\n * Read cookies\n *\n * @param {string} name Cookie name\n * @return {*}\n */\nexport const getCookie = name =>\n  document.cookie.split('; ').reduce((cookies, cookie) => {\n    const [key, value] = cookie.split('=');\n\n    return Object.assign(cookies, { [key]: decodeURIComponent(value) });\n  }, {})[name] || null;\n\nexport default {\n  processProfileData,\n  setCookie,\n  getCookie,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-context-menu-ng/scripts/default-hooks.js","/**\n * @name ViewModel\n * @type {object}\n *\n * @description\n * View model for widget-bb-user-context-menu-ng\n */\n\nexport default () => {\n  const viewModel = {};\n\n  /**\n   * @name ViewModel#append\n   * @inner\n   *\n   * @description\n   * Merges new items with existing items\n   *\n   * @param {array} newItems      Array of new items\n   * @param {array} existingItems Array of existing items to append to\n   *\n   * @type {function}\n   * @returns {array} Merged array of old and new items\n   */\n  const append = (newItems, existingItems) => [...existingItems, ...newItems];\n\n  /**\n   * @name ViewModel#getServiceAgreementId\n   * @type {function}\n   *\n   * @description\n   * Returns the Service Agreement ID\n   *\n   * @returns {string}\n   * @inner\n   */\n  const getServiceAgreementId = () => viewModel.state.serviceAgreementId;\n\n  /**\n   * @name ViewModel#serviceAgreementName\n   * @type {function}\n   *\n   * @description\n   * Returns the Service Agreement name\n   *\n   * @returns {string}\n   * @inner\n   */\n  const getServiceAgreementName = () => viewModel.state.serviceAgreementName;\n\n  /**\n   * @name ViewModel#getLegalEntityId\n   * @type {function}\n   *\n   * @description\n   * Returns the Legal Entity ID\n   *\n   * @returns {string}\n   * @inner\n   */\n  const getLegalEntityId = () => viewModel.state.legalEntityId;\n\n  /**\n   * @name ViewModel#getLegalEntityName\n   * @type {function}\n   *\n   * @description\n   * Returns the Legal Entity name\n   *\n   * @returns {string}\n   * @inner\n   */\n  const getLegalEntityName = () => viewModel.state.legalEntityName;\n\n  /**\n   * @name ViewModel#isServiceAgreementsShown\n   * @type {function}\n   *\n   * @description\n   * Checks if Service Agreements should be displayed\n   *\n   * @returns {boolean}\n   * @inner\n   */\n  const isServiceAgreementsShown = () => Boolean(viewModel.state.showServiceAgreements);\n\n  /**\n   * @name ViewModel#isLegalEntitiesDisabled\n   * @type {function}\n   *\n   * @description\n   * Checks if Legal Entities should be disabled\n   *\n   * @returns {boolean}\n   * @inner\n   */\n  const isLegalEntitiesDisabled = () => Boolean(viewModel.state.disableLegalEntities);\n\n  /**\n   * @name ViewModel#setServiceAgreementId\n   * @type {function}\n   *\n   * @description\n   * Sets the given parameter as the Service Agreement ID\n   *\n   * @param {string} id\n   * @param {string} name\n   * @inner\n   */\n  const setServiceAgreement = (id, name) =>\n    (Object.assign(viewModel.state, { serviceAgreementId: id, serviceAgreementName: name }));\n\n  /**\n   * @name ViewModel#setBeneficiaries\n   * @type {function}\n   *\n   * @description\n   * Sets the given parameter as the Legal Entity ID\n   *\n   * @param {string} id\n   * @param {string} name\n   * @inner\n   */\n  const setLegalEntity = (id = '', name = '') =>\n    (Object.assign(viewModel.state, { legalEntityId: id, legalEntityName: name }));\n\n  /**\n   * @name ViewModel#setServiceAgreementsShown\n   * @type {function}\n   *\n   * @description\n   * Defines is Service Agreements should be displayed\n   *\n   * @param {boolean} value\n   * @inner\n   */\n  const setServiceAgreementsShown =\n    value => (Object.assign(viewModel.state, { showServiceAgreements: value }));\n\n  /**\n   * @name ViewModel#setLegalEntitiesDisabled\n   * @type {function}\n   *\n   * @description\n   * Defines is Legal Entity should be disabled\n   *\n   * @param {boolean} value\n   * @inner\n   */\n  const setLegalEntitiesDisabled =\n    value => (Object.assign(viewModel.state, { disableLegalEntities: value }));\n\n  /**\n   * @name ViewModel#hasMoreServiceAgreements\n   * @type {function}\n   *\n   * @description\n   * Define if there are more Service Agreements available\n   *\n   * @param {number} totalItems Amount of all matched items\n   * @inner\n   */\n  const hasMoreServiceAgreements = totalItems => {\n    viewModel.state.serviceAgreements.totalItems = totalItems;\n\n    viewModel.state.serviceAgreements.hasMore =\n      viewModel.state.serviceAgreements.rawItems.length < totalItems;\n  };\n\n  /**\n   * @name ViewModel#appendServiceAgreements\n   * @type {function}\n   *\n   * @description\n   * Append new results to the existing ones\n   *\n   * @param {array} raw Array of new Service Agreements\n   */\n  const appendServiceAgreements = raw => {\n    viewModel.state.serviceAgreements.rawItems =\n      append(raw.data, viewModel.state.serviceAgreements.rawItems);\n    hasMoreServiceAgreements(raw.totalItems);\n\n    if (raw.totalItems > 1) {\n      setServiceAgreementsShown(true);\n    }\n  };\n\n  /**\n   * @name ViewModel#getServiceAgreements\n   * @type {function}\n   *\n   * @description\n   * Get result list and state\n   *\n   * @returns {object}\n   */\n  const getServiceAgreements = () => ({\n    data: viewModel.state.serviceAgreements.rawItems,\n    totalItems: viewModel.state.serviceAgreements.totalItems,\n    hasMore: viewModel.state.serviceAgreements.hasMore,\n  });\n\n  /**\n   * @name ViewModel#resetServiceAgreements\n   * @type {function}\n   *\n   * @description\n   * Clear Service Agreements array and reset state to initial\n   *\n   * @param {?boolean} resetLegalEntity Is selected Legal Entity should be reset\n   */\n  const resetServiceAgreements = (resetLegalEntity = false) => {\n    viewModel.state.serviceAgreements = {\n      rawItems: [],\n      totalItems: 0,\n      hasMore: false,\n    };\n\n    if (resetLegalEntity) {\n      setLegalEntitiesDisabled(true);\n      setLegalEntity();\n    }\n  };\n\n  /**\n   * @name ViewModel#hasMoreLegalEntities\n   * @type {function}\n   *\n   * @description\n   * Define if there are more Legal Entities available\n   *\n   * @param {number} totalItems Amount of all matched items\n   * @inner\n   */\n  const hasMoreLegalEntities = totalItems => {\n    viewModel.state.legalEntities.totalItems = totalItems;\n\n    viewModel.state.legalEntities.hasMore =\n      viewModel.state.legalEntities.rawItems.length < totalItems;\n  };\n\n  /**\n   * @name ViewModel#appendLegalEntities\n   * @type {function}\n   *\n   * @description\n   * Append new results to the existing ones\n   *\n   * @param {array} raw Array of new Legal Entities\n   */\n  const appendLegalEntities = raw => {\n    viewModel.state.legalEntities.rawItems =\n      append(raw.data, viewModel.state.legalEntities.rawItems);\n    hasMoreLegalEntities(raw.totalItems);\n\n    if (raw.totalItems > 1) {\n      setLegalEntitiesDisabled(false);\n    }\n  };\n\n  /**\n   * @name ViewModel#getLegalEntities\n   * @type {function}\n   *\n   * @description\n   * Get result list and state\n   *\n   * @returns {object}\n   */\n  const getLegalEntities = () => ({\n    data: viewModel.state.legalEntities.rawItems,\n    totalItems: viewModel.state.legalEntities.totalItems,\n    hasMore: viewModel.state.legalEntities.hasMore,\n  });\n\n  /**\n   * @name ViewModel#resetLegalEntities\n   * @type {function}\n   *\n   * @description\n   * Clear Legal Entities array and reset state to initial\n   */\n  const resetLegalEntities = () => {\n    viewModel.state.legalEntities = {\n      rawItems: [],\n      totalItems: 0,\n      hasMore: false,\n    };\n  };\n\n  /**\n   * @description\n   * Returns the initial state of the view model.\n   *\n   * @name ViewModel#getInitialState\n   * @type {function}\n   *\n   * @returns {SelectContextView}\n   * @inner\n   */\n  const getInitialState = () => ({\n    serviceAgreements: {\n      rawItems: [],\n      hasMore: false,\n    },\n    legalEntities: {\n      rawItems: [],\n      hasMore: false,\n    },\n    serviceAgreementId: null,\n    legalEntityId: null,\n    showServiceAgreements: false,\n    disableLegalEntities: true,\n  });\n\n  Object.assign(viewModel, {\n    state: getInitialState(),\n\n    getServiceAgreementId,\n    getServiceAgreementName,\n    getLegalEntityId,\n    getLegalEntityName,\n\n    isServiceAgreementsShown,\n    isLegalEntitiesDisabled,\n\n    setServiceAgreement,\n    setLegalEntity,\n    setServiceAgreementsShown,\n    setLegalEntitiesDisabled,\n\n    appendServiceAgreements,\n    getServiceAgreements,\n\n    appendLegalEntities,\n    getLegalEntities,\n\n    resetServiceAgreements,\n    resetLegalEntities,\n  });\n\n  return viewModel;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-context-menu-ng/scripts/view-model.js"],"sourceRoot":""}