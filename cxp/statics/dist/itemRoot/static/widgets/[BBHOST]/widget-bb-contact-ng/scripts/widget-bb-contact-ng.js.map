{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*************","webpack:///webpack/bootstrap d55e1b15032dbd9fb9d3?118c*************","webpack:///./widget-bb-contact-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*****","webpack:///external \"lib-bb-widget-ng\"?84ad","webpack:///external \"lib-bb-model-errors\"?7567*","webpack:///./widget-bb-contact-ng/scripts/index.js","webpack:///external \"lib-bb-widget-extension-ng\"","webpack:///external \"model-bb-contact-ng\"","webpack:///external \"lib-bb-event-bus-ng\"","webpack:///external \"lib-bb-intent-ng\"","webpack:///external \"lib-bb-permissions-ng\"","webpack:///./widget-bb-contact-ng/scripts/controller.js","webpack:///./widget-bb-contact-ng/scripts/constants.js","webpack:///./widget-bb-contact-ng/scripts/default-hooks.js"],"names":["defaultHooks","hooksKey","angular","module","modelContactModuleKey","eventBusModuleKey","widgetModuleKey","intentModuleKey","libBbPermissionsModuleKey","factory","config","bbPermissionsKey","permissionsProvider","enableDownloadOnInit","setCacheEnabled","controller","modelContactKey","eventBusKey","widgetKey","bbIntentKey","Controller","name","errorMessages","E_AUTH","E_CONNECTIVITY","E_USER","E_UNEXPECTED","DEFAULT_PAGE_SIZE","DEFAULT_MAX_NAV_PAGES","DEFAULT_PAGINATION_TYPE","DEFAULT_DISMISS_TIME","SEARCH_MIN_QUERY","SEARCH_INPUT_THRESHOLD","searchActions","CANCEL","INPUT","Page","DETAILS","EDIT","NEW","LIST","uiError","message","modelError","code","uiStatusSuccess","i18n","key","class","StatusClasses","SUCCESS","isError","uiStatusError","error","ERROR","throttle","fn","threshold","last","timeout","throttledFn","args","context","now","Date","timeDifference","clearTimeout","setTimeout","apply","getInitialContactsSearch","data","loading","hasMore","totalCount","currentPage","query","ContactController","model","hooks","bus","Promise","scope","window","widget","bbIntents","ctrl","preferences","getContactPreferences","pageSize","maxNavPages","paginationType","dismissTime","notificationDismissTime","CONTACT_SELECTED","groupName","Message","contacts","rawItems","params","from","size","contactsSearch","activeSearches","contactToBeSelectedNext","state","contact","schema","deleting","updating","accountsChanged","dirty","status","initialLoading","showAvatar","editing","searching","page","contactNew","pageParams","totalItems","Object","assign","notifications","navigateTo","closeContactDetails","getSelectedContact","defaultValue","copy","restoreSelection","getCurrentContact","then","cancelContactForm","showNewContactForm","getNewContactObject","showEditContactForm","hasContacts","Boolean","length","hasSearchContacts","selectContact","storeContactAsCurrent","publish","onContactSelect","append","newItems","existingItems","replace","items","load","merge","requestParams","processRequestParams","getContacts","raw","processContacts","processedContacts","catch","CONTACT_SERVER_ERROR","changeSearchingState","search","processSearchRequestParams","processSearchContacts","processedSearchContacts","reject","changePage","promise","requestParameters","reload","cb","pagesCount","result","loadMore","done","resolve","searchMore","selectActiveContact","returnContactIfExists","index","findIndex","item","id","selectPrevContact","onContactCreateStart","CONTACT_CREATE_START","onContactCreateDone","response","isApprovalRequired","TranslationKeys","CONTACT_CREATE_ACCEPTED","CONTACT_CREATE_SUCCESS","CONTACT_CREATE_DONE","onContactCreateFail","CONTACT_CREATE_FAILED","onContactDeleteStart","onContactDeleteDone","CONTACT_DELETE_ACCEPTED","CONTACT_DELETE_SUCCESS","CONTACT_DELETE_DONE","onContactDeleteFail","CONTACT_DELETE_FAILED","onContactUpdateStart","CONTACT_UPDATE_START","onContactUpdateDone","CONTACT_UPDATE_ACCEPTED","CONTACT_UPDATE_SUCCESS","CONTACT_UPDATE_DONE","onContactUpdateFail","CONTACT_UPDATE_FAILED","applyUpdatedContact","updateContact","createContact","saveContact","processedContact","processContactBeforeSave","getAccount","accountIndex","accounts","addAccount","account","push","updateAccount","deleteContactAccount","splice","onContactDeleteConfirm","Error","CONTACT_DELETE_START","deleteContact","onContactDeleteAction","setupContact","setupContactSchema","getContactSchema","cancelSearch","onContactsSearchInput","value","onContactsSearchCancel","onContactUpdate","bindEvents","addEventListener","CONTACT_DELETE","CONTACT_CREATE","CONTACT_EDIT","subscribe","CONTACT_SEARCH","detail","action","text","$digest","NOTIFICATION_EVENT","notification","$onInit","loadRequest","handle","IntentsKeys","init","CXP_ITEM_LOADED","getId","BB_ITEM_LOADED","Event","Action","CONTACT_UNEXPECTED","confirm","selectedContact","contactIndex","firstContact","Array","isArray","defaultParams"],"mappings":"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","file":"widget-bb-contact-ng/scripts/widget-bb-contact-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-contact-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-permissions-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-contact-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-widget-extension-ng\", \"model-bb-contact-ng\", \"lib-bb-event-bus-ng\", \"lib-bb-intent-ng\", \"lib-bb-permissions-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-contact-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-contact-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-permissions-ng\"));\n\telse\n\t\troot[\"widget-bb-contact-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-widget-extension-ng\"], root[\"model-bb-contact-ng\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-permissions-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_69__, __WEBPACK_EXTERNAL_MODULE_73__, __WEBPACK_EXTERNAL_MODULE_84__, __WEBPACK_EXTERNAL_MODULE_85__, __WEBPACK_EXTERNAL_MODULE_86__, __WEBPACK_EXTERNAL_MODULE_87__, __WEBPACK_EXTERNAL_MODULE_88__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d55e1b15032dbd9fb9d3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-contact-ng/model.xml\n// module id = 0\n// module chunks = 14","module.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 53\n// module chunks = 5 9 10 11 12 13 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_69__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 69\n// module chunks = 9 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_73__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 73\n// module chunks = 9 10 14 15 16","/* global window */\n/**\n * @module widget-bb-contact-ng\n *\n * @description\n * Contact widget\n *\n * @example\n *  <div data-ng-controller=\"ContactController as $ctrl\">\n *    <ul>\n *       <li data-ng-repeat=\"contact in $ctrl.state.contacts.data\">{{contact.id}}</li>\n *    </ul>\n *  </div>\n */\nimport angular from 'vendor-bb-angular';\n\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport modelContactModuleKey, { modelContactKey } from 'model-bb-contact-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport eventBusModuleKey, { eventBusKey } from 'lib-bb-event-bus-ng';\nimport intentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\nimport libBbPermissionsModuleKey, { bbPermissionsKey } from 'lib-bb-permissions-ng';\n\nimport Controller from './controller';\nimport * as defaultHooks from './default-hooks';\n\nconst hooksKey = 'widget-bb-contact-ng:hooks';\n\n/**\n * @name default\n * @type {string}\n * @description Angular module name\n */\nexport default angular\n  .module('widget-bb-contact-ng', [\n    modelContactModuleKey,\n    eventBusModuleKey,\n    widgetModuleKey,\n    intentModuleKey,\n    libBbPermissionsModuleKey,\n  ])\n  .factory(hooksKey, extendHooks(defaultHooks))\n  .config([`${bbPermissionsKey}Provider`, (permissionsProvider) => {\n    permissionsProvider.enableDownloadOnInit(true);\n    permissionsProvider.setCacheEnabled(false);\n  }])\n  .controller('ContactController', [\n    modelContactKey,\n    hooksKey,\n    eventBusKey,\n    '$q',\n    '$scope',\n    '$window',\n    widgetKey,\n    bbIntentKey,\n    /* into */\n    Controller,\n  ])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-contact-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_84__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 84\n// module chunks = 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_85__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-contact-ng\"\n// module id = 85\n// module chunks = 14 15","module.exports = __WEBPACK_EXTERNAL_MODULE_86__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 86\n// module chunks = 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_87__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 87\n// module chunks = 14 15 16","module.exports = __WEBPACK_EXTERNAL_MODULE_88__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-permissions-ng\"\n// module id = 88\n// module chunks = 14","/* global window */\nimport angular from 'vendor-bb-angular';\nimport { E_AUTH, E_CONNECTIVITY, E_USER, E_UNEXPECTED } from 'lib-bb-model-errors';\nimport { Message, StatusClasses, TranslationKeys, IntentsKeys } from './constants';\n\nconst errorMessages = {\n  [E_AUTH]: 'contact.model.error.auth',\n  [E_CONNECTIVITY]: 'contact.model.error.connectivity',\n  [E_USER]: 'contact.model.error.user',\n  [E_UNEXPECTED]: 'contact.model.error.unexpected',\n};\n\n/**\n * Defines the default pageSize for the contact page\n * which is 50, as defined in the widget model.xml\n * @inner\n * @type {number}\n */\nconst DEFAULT_PAGE_SIZE = 50;\n\n/**\n * Defines the default maxNavPages for the accounts page\n * as defined in the widget model.xml\n * @inner\n * @type {number}\n */\nconst DEFAULT_MAX_NAV_PAGES = 3;\n\n/**\n * Defines the default paginationType for the accounts page\n * as defined in the widget model.xml\n * @inner\n * @type {string}\n */\nconst DEFAULT_PAGINATION_TYPE = 'load-more';\n\n/**\n * @description\n * Defines default time in seconds after which\n * notification dismisses\n * @inner\n * @type {number}\n */\nconst DEFAULT_DISMISS_TIME = 3;\n\n/**\n * Defines the min length for the search query\n * @inner\n * @type {number}\n */\nconst SEARCH_MIN_QUERY = 2;\n\n/**\n * Defines the debouncing time for a search to happen (in ms)\n * @inner\n * @type {number}\n */\nconst SEARCH_INPUT_THRESHOLD = 1000;\n\n/**\n * Defines widget search action enumeration\n * @inner\n * @enum {string}\n * @type {object}\n */\nconst searchActions = {\n  CANCEL: 'cancel',\n  INPUT: 'input',\n};\n\n/**\n * Defines widget page enumeration\n * @inner\n * @enum {string}\n * @type {object}\n */\nconst Page = {\n  DETAILS: 'details',\n  EDIT: 'edit',\n  NEW: 'new',\n  LIST: 'list',\n};\n\n/**\n * @description\n * Creates an error object for template\n *\n * @name uiError\n *\n * @inner\n * @param {object} modelError Error object\n * @type {function}\n * @returns {{message: string}}\n */\nconst uiError = modelError => {\n  let message = '';\n\n  if (modelError && modelError.code) {\n    message = errorMessages[modelError.code];\n  }\n\n  return { message };\n};\n\n/**\n * @description\n * Creates an success status object for template\n *\n * @name uiStatusSuccess\n *\n * @inner\n * @param {string} key Translation keys\n * @type {function}\n * @returns {{i18n: string, class: string, isError: boolean}}\n */\nconst uiStatusSuccess = key => ({\n  i18n: key,\n  class: StatusClasses.SUCCESS,\n  isError: false,\n});\n\n/**\n * @description\n * Creates an error status object for template\n *\n * @name uiStatusError\n *\n * @inner\n * @param {object} error Error object\n * @type {function}\n * @returns {{i18n: string, class: string, isError: boolean}}\n */\nconst uiStatusError = error => ({\n  i18n: uiError(error).message,\n  class: StatusClasses.ERROR,\n  isError: true,\n});\n\n/**\n * @description\n * Throttles some action by a given delay (threshold)\n *\n * @name throttle\n *\n * @inner\n * @param {function} fn - function to execute\n * @param {int} threshold - delay in execution (in ms)\n * @type {function}\n * @returns {function}\n */\nconst throttle = (fn, threshold) => {\n  let last;\n  let timeout;\n\n  return function throttledFn(...args) {\n    const context = this;\n    const now = Date.now();\n    const timeDifference = now - last;\n\n    if (last && timeDifference < threshold) {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        last = now;\n        fn.apply(context, args);\n      }, threshold - timeDifference);\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n};\n\n/**\n * @name getInitialContactsSearch\n * @description\n * Get default contacts search state object\n * @type {Function}\n * @inner\n * @returns {Object}\n */\nconst getInitialContactsSearch = () => ({\n  data: null,\n  loading: false,\n  error: null,\n  hasMore: false,\n  totalCount: 0,\n  currentPage: 1,\n  query: '',\n});\n\n/**\n * @name ContactController\n *\n * @description\n * Contact widget controller\n *\n * @type {function}\n */\nfunction ContactController(model, hooks, bus, Promise, scope, window, widget, bbIntents) {\n  const ctrl = this;\n  const preferences = model.getContactPreferences();\n  const pageSize = preferences.pageSize || DEFAULT_PAGE_SIZE;\n  const maxNavPages = preferences.maxNavPages || DEFAULT_MAX_NAV_PAGES;\n  const paginationType = preferences.paginationType || DEFAULT_PAGINATION_TYPE;\n  const dismissTime = preferences.notificationDismissTime || DEFAULT_DISMISS_TIME;\n  const CONTACT_SELECTED = preferences.groupName ?\n    `${Message.CONTACT_SELECTED}.${preferences.groupName}` : Message.CONTACT_SELECTED;\n\n  const contacts = {\n    rawItems: [],\n    params: {\n      from: 0,\n      size: pageSize,\n    },\n  };\n\n  const contactsSearch = {\n    rawItems: [],\n    activeSearches: 0,\n    params: {\n      from: 0,\n      size: pageSize,\n      query: null,\n    },\n  };\n\n  let contactToBeSelectedNext;\n\n  /**\n   * @description\n   * Holds current controller state made by\n   * previous method executions\n   *\n   * @name state\n   *\n   * @type {object}\n   */\n  const state = {\n    contact: {\n      data: null,\n      schema: null,\n      deleting: false,\n      updating: false,\n      accountsChanged: false,\n    },\n    contacts: {\n      data: null,\n      loading: false,\n      error: null,\n      hasMore: false,\n      totalCount: 0,\n      currentPage: 1,\n      dirty: false,\n    },\n    contactsSearch: getInitialContactsSearch(),\n    status: null,\n    initialLoading: true,\n    error: null,\n    showAvatar: preferences.showAvatar,\n    editing: false,\n    searching: false,\n    page: preferences.contactNew ? Page.NEW : Page.LIST,\n    pageParams: {\n      get from() { return state.searching ? contactsSearch.params.from : contacts.params.from; },\n      get size() { return state.searching ? contactsSearch.params.size : contacts.params.size; },\n      get query() { return contactsSearch.params.query; },\n      get totalItems() {\n        return state.searching ? state.contactsSearch.totalCount : state.contacts.totalCount;\n      },\n      get currentPage() {\n        return state.searching ? state.contactsSearch.currentPage : state.contacts.currentPage;\n      },\n      set currentPage(page) {\n        if (state.searching) {\n          Object.assign(state.contactsSearch, { currentPage: page });\n        } else {\n          Object.assign(state.contacts, { currentPage: page });\n        }\n      },\n      maxNavPages,\n      paginationType,\n    },\n    notifications: [],\n  };\n\n  /**\n   * @name navigateTo\n   * @description Changes current page in widget\n   * @type {function}\n   * @inner\n   * @param {string} page Page to navigate to\n   */\n  function navigateTo(page) {\n    state.contact.accountsChanged = false;\n    state.page = page;\n  }\n\n  /**\n   * @name closeContactDetails\n   *\n   * @description\n   * Handles click on Back button on Contact details page.\n   * Navigates the user to the Contact list view.\n   *\n   * @type {function}\n   */\n  function closeContactDetails() {\n    navigateTo(Page.LIST);\n  }\n\n  /**\n   * Returns deep copy of currently selected contact\n   *\n   * @inner\n   * @param {object} defaultValue Default value to return\n   * @returns {object} Selected contact\n   */\n  function getSelectedContact(defaultValue) {\n    return angular.copy(hooks.getSelectedContact(state.contacts.data, defaultValue));\n  }\n\n  /**\n   * @name restoreSelection\n   * @description Restores previously selected contact in selection\n   * @type {function}\n   * @inner\n   */\n  function restoreSelection() {\n    model.getCurrentContact()\n      .then(contact => {\n        state.contact.data = getSelectedContact(contact);\n      });\n  }\n\n  /**\n   * @name cancelContactForm\n   *\n   * @description\n   * Handles click on Back/Cancel button on Contact form page.\n   * Restores selected contact, and navigates the user to the Contact list view.\n   *\n   * @type {function}\n   */\n  function cancelContactForm() {\n    restoreSelection();\n    navigateTo(Page.LIST);\n  }\n\n  /**\n   * @name showNewContactForm\n   *\n   * @description\n   * Handles click on Create new contact button.\n   * Navigates the user to the Create new contact view.\n   *\n   * @type {function}\n   */\n  function showNewContactForm() {\n    if (state.page !== Page.NEW) {\n      state.status = null;\n      state.contact.data = angular.copy(hooks.getNewContactObject(model.getNewContactObject()));\n      navigateTo(Page.NEW);\n    }\n  }\n\n  /**\n   * @name showEditContactForm\n   *\n   * @description\n   * Handles click on Edit button on contact details.\n   * Navigates the user to the Create new contact view.\n   *\n   * @type {function}\n   */\n  function showEditContactForm() {\n    if (state.page !== Page.EDIT) {\n      state.status = null;\n      navigateTo(Page.EDIT);\n    }\n  }\n\n  /**\n   * @name hasContacts\n   * @description\n   * if contacts found returns true else false\n   *\n   * @type {function}\n   * @returns {boolean}\n   */\n  function hasContacts() {\n    return Boolean(state.contacts.data && state.contacts.data.length);\n  }\n\n  /**\n   * @name hasSearchContacts\n   * @description\n   * if contacts found returns true else false\n   *\n   * @type {function}\n   * @returns {boolean}\n   */\n  function hasSearchContacts() {\n    return Boolean(state.contactsSearch.data && state.contactsSearch.data.length);\n  }\n\n  /**\n   * @name selectContact\n   * @description\n   * Handles clicks on contact in the list.\n   * Navigates the user to the details view.\n   *\n   * @param {object} contact Contact object\n   * @type {function}\n   * @fires bb.event.contact.selected\n   */\n  function selectContact(contact) {\n    state.contact.data = angular.copy(contact);\n    state.status = null;\n\n    navigateTo(Page.DETAILS);\n    model.storeContactAsCurrent(angular.copy(contact));\n\n    bus.publish(CONTACT_SELECTED, {\n      contact: state.contact.data,\n    });\n  }\n\n  /**\n   * @name onContactSelect\n   *\n   * @description\n   * Handles contact select\n   *\n   * @inner\n   * @param {object} data Contact data\n   * @type {function}\n   */\n  function onContactSelect(data) {\n    state.contact.data = angular.copy(data.contact);\n  }\n\n  /**\n   * Merges new items with existing items\n   *\n   * @inner\n   * @name append\n   * @type {function}\n   * @returns {array} merged array of old and new items\n   */\n  function append(newItems, existingItems) {\n    return [...existingItems, ...newItems];\n  }\n\n  /**\n   * Replaces existing items with new items\n   *\n   * @inner\n   * @name replace\n   * @type {function}\n   * @returns {array} new items\n   */\n  function replace(items) {\n    return items;\n  }\n\n  /**\n   * @name load\n   *\n   * @description\n   * Loads contacts data, called from $onInit\n   *\n   * @see $onInit\n   *\n   * @type {function}\n   * @param {object} params Request params\n   * @param {number} params.from Page number\n   * @param {number} params.size Page size\n   * @param {function} merge Function to merge loaded contacts to the previous ones\n   * @returns {Promise} Promise which is resolved once contacts are loaded and processed,\n   *   or rejected in case of errors\n   */\n  function load(params, merge = replace) {\n    const requestParams = hooks.processRequestParams(contacts.params, params);\n\n    state.contacts.loading = true;\n\n    return model.getContacts(requestParams)\n      .then(raw => {\n        contacts.rawItems = merge(raw.data, contacts.rawItems);\n        state.contacts.hasMore = contacts.rawItems.length < raw.totalCount;\n        state.contacts.totalCount = raw.totalCount || 0;\n        return contacts.rawItems;\n      })\n      .then(hooks.processContacts)\n      .then(processedContacts => {\n        state.contacts.data = processedContacts;\n        state.contacts.loading = false;\n        state.contacts.error = null;\n      })\n      .catch(error => {\n        state.error = uiError(error);\n        state.contacts.error = uiError(error);\n        state.contacts.loading = false;\n        bus.publish(Message.CONTACT_SERVER_ERROR, error);\n      });\n  }\n\n  /**\n   * @name changeSearchingState\n   *\n   * @description\n   * Change \"loading\" state of the contactsSearch\n   *\n   * @type {function}\n   * @inner\n   */\n  function changeSearchingState() {\n    // Set \"contactsSearch.loading\" will only be set to false,\n    // when there are no more active search processes\n    state.contactsSearch.loading = !!--contactsSearch.activeSearches;\n  }\n\n  /**\n   * @name search\n   *\n   * @description\n   * Searches contacts data, called when searching and query length is big enough\n   *\n   * @type {function}\n   * @param {string} query - query to search on\n   * @param {function} merge Function to merge loaded contacts to the previous ones\n   * @returns {Promise} Promise which is resolved once contacts are loaded and processed,\n   *   or rejected in case of errors\n   */\n  function search(query, merge = replace, params = {}) {\n    state.searching = state.contactsSearch.loading = true;\n    contactsSearch.params.query = query;\n    contactsSearch.activeSearches++;\n\n    const requestParams = hooks.processSearchRequestParams(contactsSearch.params, params);\n    return model.getContacts(requestParams)\n      .then(raw => {\n        contactsSearch.rawItems = merge(raw.data, contactsSearch.rawItems);\n        state.contactsSearch.hasMore = contactsSearch.rawItems.length < raw.totalCount;\n        state.contactsSearch.totalCount = raw.totalCount;\n        return contactsSearch.rawItems;\n      })\n      .then(hooks.processSearchContacts)\n      .then(processedSearchContacts => {\n        state.contactsSearch.data = processedSearchContacts;\n        state.contactsSearch.error = null;\n\n        // Select first found contact\n        if (state.contactsSearch.data.length && state.contactsSearch.data[0].contacts) {\n          state.contact.data = getSelectedContact(state.contactsSearch.data[0].contacts[0]);\n        }\n        changeSearchingState();\n      })\n      .catch(error => {\n        state.error = uiError(error);\n        state.contactsSearch.error = uiError(error);\n        changeSearchingState();\n        bus.publish(Message.CONTACT_SERVER_ERROR, error);\n        return Promise.reject(state.error);\n      });\n  }\n\n  /**\n   * @description\n   * Change page of displayed contacts.\n   *\n   * @name ContactController#changePage\n   * @type {Function}\n   * @param {Object} params\n   * @returns {Promise.<module:model-bb-contact-ng.Contacts, ModelError>}\n   * A Promise with loaded contacts\n   */\n  const changePage = (params = { currentPage: 1 }) => {\n    let promise;\n    const requestParameters = {\n      from: params.currentPage - 1,\n    };\n\n    if (state.searching) {\n      promise = search(contactsSearch.params.query, replace, {\n        ...contactsSearch.params,\n        ...requestParameters,\n      });\n    } else {\n      promise = load({\n        ...contacts.params,\n        ...requestParameters,\n      });\n    }\n\n    return promise.then(() => {\n      state.pageParams.currentPage = params.currentPage;\n    });\n  };\n\n  /**\n   * @name reload\n   *\n   * @description\n   * Reloads the entire list of stored contacts\n   *\n   * @inner\n   * @type {function}\n   * @param {function} cb Callback to be called on page reload\n   *\n   * @return {Promise}\n   */\n  function reload(cb = () => {}) {\n    const from = 0;\n    const pagesCount = contacts.params.from + 1;\n    const size = pagesCount * contacts.params.size;\n    let result;\n\n    if (state.searching) {\n      result = search(contactsSearch.params.query, replace, { from, size });\n      state.contacts.dirty = true;\n    } else {\n      result = load({ from, size }, replace);\n      state.contacts.dirty = false;\n    }\n\n    return result.then(cb);\n  }\n\n  /**\n   * @name loadMore\n   *\n   * @description\n   * Loads more contacts if they are available.\n   *\n   * @type {function}\n   * @param {function} done callback to stop loading more\n   * @returns {Promise}\n   */\n  function loadMore(done) {\n    if (!state.contacts.hasMore || state.contacts.loading) {\n      return Promise.resolve();\n    }\n\n    contacts.params.from++;\n\n    return load({}, append)\n      .then(done)\n      .catch(() => {\n        contacts.params.from--;\n        done();\n      });\n  }\n\n  /**\n   * @name searchMore\n   *\n   * @description\n   * Searches more contacts if they are available.\n   *\n   * @type {function}\n   * @param {function} done callback to stop loading more\n   * @returns {Promise}\n   */\n  function searchMore(done) {\n    if (!state.contactsSearch.hasMore || state.contactsSearch.loading) {\n      return Promise.resolve();\n    }\n\n    contactsSearch.params.from++;\n\n    return search(contactsSearch.params.query, append)\n      .then(done)\n      .catch(error => {\n        contactsSearch.params.from--;\n        done();\n        return Promise.reject(error);\n      });\n  }\n\n  /**\n   * @name selectActiveContact\n   * @type {function}\n   * @inner\n   * @description\n   * Selects a new contact if previous does not exist in a contacts group anymore\n   */\n  function selectActiveContact() {\n    contactToBeSelectedNext = hooks.returnContactIfExists(state.contacts.data, state.contact.data);\n\n    if (!contactToBeSelectedNext) {\n      const index = (state.contacts.data || [])\n        .findIndex((item) => item.id === state.contact.data.id);\n\n      contactToBeSelectedNext = hooks\n        .selectPrevContact(state.contacts.data, index, state.contact.data);\n    }\n\n    state.contact.data = angular.copy(contactToBeSelectedNext);\n  }\n\n  /**\n   * @name onContactCreateStart\n   *\n   * @description\n   * Handles contact create start\n   *\n   * @inner\n   * @param {object} contact Contact object\n   * @type {function}\n   * @returns {*}\n   */\n  function onContactCreateStart() {\n    state.contact.updating = true;\n    bus.publish(Message.CONTACT_CREATE_START);\n  }\n\n  /**\n   * @name onContactCreateDone\n   *\n   * @description\n   * Handles contact create done\n   *\n   * @inner\n   * @param {object} response Contact delete response object\n   * @type {function}\n   */\n  function onContactCreateDone(response) {\n    state.contact.updating = false;\n\n    const key = response.isApprovalRequired ?\n      TranslationKeys.CONTACT_CREATE_ACCEPTED : TranslationKeys.CONTACT_CREATE_SUCCESS;\n    state.status = uiStatusSuccess(key);\n\n    if (!response.isApprovalRequired) {\n      state.contact.data = angular.copy(response.data);\n\n      navigateTo(Page.DETAILS);\n      bus.publish(Message.CONTACT_CREATE_DONE);\n    } else {\n      cancelContactForm();\n    }\n  }\n\n  /**\n   * @name onContactCreateFail\n   *\n   * @description\n   * Handles contact create fail\n   *\n   * @inner\n   * @param {object} err Error object\n   * @type {function}\n   */\n  function onContactCreateFail(error) {\n    state.contact.updating = false;\n    state.status = uiStatusError(error);\n\n    bus.publish(Message.CONTACT_CREATE_FAILED, { error });\n    return Promise.reject(error);\n  }\n\n  /**\n   * @name onContactDeleteStart\n   *\n   * @description\n   * Handles preparations for contact delete\n   *\n   * @inner\n   * @type {function}\n   */\n  function onContactDeleteStart() {\n    state.status = null;\n    state.contact.deleting = true;\n  }\n\n  /**\n   * @name onContactDeleteDone\n   *\n   * @description\n   * Handles contact delete\n   *\n   * @inner\n   * @param {object} response Contact delete response object\n   * @type {function}\n   */\n  function onContactDeleteDone(response) {\n    state.contact.deleting = false;\n\n    const key = response.isApprovalRequired ?\n      TranslationKeys.CONTACT_DELETE_ACCEPTED : TranslationKeys.CONTACT_DELETE_SUCCESS;\n    state.status = uiStatusSuccess(key);\n\n    if (!response.isApprovalRequired) {\n      navigateTo(Page.LIST);\n\n      // Pass a callback to the reload function\n      bus.publish(Message.CONTACT_DELETE_DONE);\n    }\n    contactToBeSelectedNext = null;\n  }\n\n  /**\n   * @name onContactDeleteFail\n   *\n   * @description\n   * Handles contact delete failed\n   *\n   * @inner\n   * @param {object} err Error object\n   * @type {function}\n   */\n  function onContactDeleteFail(error) {\n    state.contact.deleting = false;\n    state.status = uiStatusError(error);\n\n    bus.publish(Message.CONTACT_DELETE_FAILED, { error });\n  }\n\n  /**\n   * @name onContactUpdateStart\n   *\n   * @description\n   * Handles contact update start\n   *\n   * @inner\n   * @type {function}\n   */\n  function onContactUpdateStart() {\n    state.contact.updating = true;\n    bus.publish(Message.CONTACT_UPDATE_START);\n  }\n\n  /**\n   * @name onContactUpdateDone\n   *\n   * @description\n   * Response handler for successful Contact update request\n   *\n   * @inner\n   * @param {object} response Contact update response object\n   * @type {function}\n   */\n  function onContactUpdateDone(response) {\n    state.contact.updating = false;\n\n    const key = response.isApprovalRequired ?\n      TranslationKeys.CONTACT_UPDATE_ACCEPTED : TranslationKeys.CONTACT_UPDATE_SUCCESS;\n    state.status = uiStatusSuccess(key);\n\n    const contact = response.isApprovalRequired ? null : state.contact.data;\n    bus.publish(Message.CONTACT_UPDATE_DONE, { contact });\n\n    navigateTo(Page.DETAILS);\n  }\n\n  /**\n   * @name onContactUpdateFail\n   *\n   * @description\n   * Handles contact update fail\n   *\n   * @inner\n   * @param {object} error Error object\n   * @type {function}\n   */\n  function onContactUpdateFail(error) {\n    state.contact.updating = false;\n\n    state.status = uiStatusError(error);\n    bus.publish(Message.CONTACT_UPDATE_FAILED, { error });\n    return Promise.reject(error);\n  }\n\n  /**\n   * @name applyUpdatedContact\n   *\n   * @description\n   * Applies the updated contact to the state\n   *\n   * @inner\n   * @param {object} contact data\n   * @type {function}\n   */\n  function applyUpdatedContact({ contact }) {\n    state.contact.data = angular.copy(contact);\n    model.storeContactAsCurrent(contact);\n  }\n\n  /**\n   * @name updateContact\n   *\n   * @description\n   * Updates a contact\n   *\n   * @inner\n   * @param {object} form Contact form object\n   * @type {function}\n   * @return {Promise}\n   */\n  function updateContact(contact) {\n    if (!contact) {\n      return Promise.reject('[Contacts] Current contact is not defined');\n    }\n\n    return Promise.resolve(contact)\n      .then(onContactUpdateStart)\n      .then(() => model.updateContact(contact))\n      .then(onContactUpdateDone)\n      .catch(error => onContactUpdateFail(error));\n  }\n\n  /**\n   * @name createContact\n   *\n   * @description\n   * create a new contact\n   *\n   * @inner\n   * @param {object} form Contact form object\n   * @type {function}\n   * @return {Promise}\n   */\n  function createContact(contact) {\n    onContactCreateStart();\n\n    return model.createContact(contact)\n      .then(onContactCreateDone)\n      .catch(error => onContactCreateFail(error));\n  }\n\n  /**\n   * @name saveContact\n   *\n   * @description\n   * Save new or update existing contact\n   *\n   * @param {object} contact Contact form data\n   * @type {function}\n   * @return {Promise} Promise which is resolved once the contact is created or updated\n   */\n  function saveContact(contact) {\n    const processedContact = hooks.processContactBeforeSave(contact);\n    return state.page === Page.NEW ?\n      createContact(processedContact) : updateContact(processedContact);\n  }\n\n  /**\n   * @name ContactController#getAccount\n   * @type {function}\n   *\n   * @description\n   * Return account by its index, return empty object if it does not exist\n   *\n   * @param {number} accountIndex Account index in list of accounts\n   * @return {Object}\n   */\n  function getAccount(accountIndex) {\n    return (state.contact.data && state.contact.data.accounts[accountIndex]) ?\n      Object.assign({}, state.contact.data.accounts[accountIndex]) : null;\n  }\n\n  /**\n   * @name ContactController#addAccount\n   * @type {function}\n   *\n   * @description\n   * Add account to contact\n   *\n   * @param {Object} account Account data object\n   */\n  function addAccount(account) {\n    if (state.contact.data) {\n      state.contact.data.accounts.push(account);\n      state.contact.accountsChanged = true;\n    }\n  }\n\n  /**\n   * @name ContactController#updateAccount\n   * @type {function}\n   *\n   * @description\n   * Update existing account by accountIndex\n   *\n   * @param {Object} account Account data object\n   * @param {number} accountIndex Account index in list of accounts\n   */\n  function updateAccount(account, accountIndex) {\n    if (getAccount(accountIndex)) {\n      state.contact.data.accounts[accountIndex] = account;\n      state.contact.accountsChanged = true;\n    }\n  }\n\n  /**\n   * ContactController@delectContactAccount\n   * @type {function}\n   *\n   * @description\n   * Remove account from accounts list of contact by index\n   *\n   * @param {number} accountIndex Account index in list of accounts\n   */\n  function deleteContactAccount(accountIndex) {\n    if (getAccount(accountIndex)) {\n      state.contact.data.accounts.splice(accountIndex, 1);\n      state.contact.accountsChanged = true;\n    }\n  }\n\n  /**\n   * @name onContactDeleteConfirm\n   *\n   * @description\n   * Handles delete confirmed\n   *\n   * @inner\n   * @type {function}\n   * @return {Promise} Promise for delete contact model action\n   */\n  function onContactDeleteConfirm() {\n    const contact = state.contact.data;\n\n    if (!contact) {\n      throw new Error('[Contacts] Current contact is not defined');\n    }\n\n    bus.publish(Message.CONTACT_DELETE_START);\n    onContactDeleteStart();\n\n    return model.deleteContact(contact)\n      .then(onContactDeleteDone)\n      .catch(onContactDeleteFail);\n  }\n\n  /**\n   * @name deleteContact\n   *\n   * @description\n   * Deletes a contact by calling the `deleteContact` hook.\n   *\n   * @type {function}\n   */\n  function deleteContact() {\n    if (!state.contact.deleting) {\n      hooks.deleteContact(state.contact.data, onContactDeleteConfirm);\n    }\n  }\n\n  /**\n   * @name onContactDeleteAction\n   *\n   * @description\n   * Handles contact delete action\n   *\n   * @inner\n   * @type {function}\n   */\n  function onContactDeleteAction() {\n    deleteContact();\n  }\n\n  /**\n   * @name setupContact\n   *\n   * @description\n   * Sets the current contact or create a new contact\n   *\n   * @inner\n   * @type {function}\n   */\n  function setupContact() {\n    if (state.page === Page.NEW) {\n      state.contact.data = angular.copy(hooks.getNewContactObject(model.getNewContactObject()));\n    } else {\n      model.getCurrentContact()\n        .then(contact => {\n          state.contact.data = angular.copy(contact);\n        });\n    }\n  }\n\n  /**\n   * @description\n   * Sets the contact schema for validating the contact\n   *\n   * @inner\n   *\n   * @name setupContactSchema\n   * @type {function}\n   */\n  function setupContactSchema() {\n    state.contact.schema = model.getContactSchema();\n  }\n\n  /**\n   * Resets search\n   *\n   * @public\n   * @name cancelSearch\n   * @type {function}\n   */\n  function cancelSearch() {\n    Object.assign(contactsSearch, {\n      rawItems: [],\n      params: {\n        from: 0,\n        size: pageSize,\n        query: null,\n      },\n    });\n\n    Object.assign(state, {\n      searching: false,\n      contactsSearch: getInitialContactsSearch(),\n    });\n\n    if (state.contacts.dirty) {\n      reload().then(selectActiveContact);\n    }\n  }\n\n  /**\n   * Handles search field input\n   *\n   * @see search\n   *\n   * @inner\n   * @name onContactsSearchInput\n   */\n  const onContactsSearchInput = throttle(value => {\n    if (value.length >= SEARCH_MIN_QUERY) {\n      ctrl.search(value, replace, { from: 0 });\n    }\n  }, SEARCH_INPUT_THRESHOLD);\n\n  /**\n   * Handles search cancel\n   *\n   * @see cancelSearch\n   *\n   * @inner\n   * @name onContactsSearchCancel\n   */\n  function onContactsSearchCancel() {\n    ctrl.cancelSearch();\n  }\n\n  const onContactUpdate = data => {\n    if (data && data.contact) {\n      applyUpdatedContact(data);\n      reload();\n    } else {\n      restoreSelection();\n    }\n  };\n\n  /**\n   * @name bindEvents\n   *\n   * @description\n   * Adds subscriptions to bus events\n   *\n   * @inner\n   * @type {function}\n   */\n  function bindEvents() {\n    window.addEventListener(Message.CONTACT_DELETE, onContactDeleteAction);\n\n    window.addEventListener(Message.CONTACT_CREATE, () => {\n      bus.publish(Message.CONTACT_CREATE);\n    });\n\n    window.addEventListener(Message.CONTACT_EDIT, () => {\n      bus.publish(Message.CONTACT_EDIT);\n    });\n\n    bus.subscribe(Message.CONTACT_UPDATE_DONE, onContactUpdate);\n\n    // Reload the list on any change\n    bus.subscribe(Message.CONTACT_CREATE_DONE, () => reload(selectActiveContact));\n\n    bus.subscribe(Message.CONTACT_DELETE_DONE, () => reload(selectActiveContact));\n\n    if (state.page !== Page.NEW) {\n      bus.subscribe(CONTACT_SELECTED, onContactSelect);\n    }\n\n    window.addEventListener(Message.CONTACT_SEARCH, ({ detail }) => {\n      if (detail.action === searchActions.INPUT) {\n        onContactsSearchInput(detail.text);\n      } else if (detail.action === searchActions.CANCEL) {\n        onContactsSearchCancel();\n      }\n      scope.$digest();\n    });\n\n    bus.subscribe(Message.NOTIFICATION_EVENT, (notification) => {\n      state.notifications.push(notification);\n    });\n  }\n\n  /**\n   * @name ContactController#$onInit\n   *\n   * @description\n   * AngularJS Lifecycle hook used to initialize the controller\n   *\n   * @type {function}\n   * @returns {Promise.<void>} Promise which is resolved once contoller is initialized,\n   *   or rejected in case of errors\n   */\n  function $onInit() {\n    const loadRequest = load().then(() => {\n      // Update default contact data only if it's loaded initially\n      state.contact.data = getSelectedContact(state.contact.data);\n      state.initialLoading = false;\n    })\n    .then(() => {\n      bbIntents.handle(IntentsKeys.CONTACT_CREATE, showNewContactForm);\n      bbIntents.init();\n    });\n\n\n    setupContactSchema();\n    setupContact();\n    bindEvents();\n\n    /**\n     * This event (cxp.item.loaded) is deprecated in Mobile SDK version > 3.0\n     * and will be removed with the update to widget collection 3 (WC3)\n     */\n    bus.publish(Message.CXP_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    bus.publish(Message.BB_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    return loadRequest;\n  }\n\n  Object.assign(ctrl, {\n    state,\n    dismissTime,\n    selectContact,\n    deleteContact,\n    hasContacts,\n    hasSearchContacts,\n    loadMore,\n    saveContact,\n    showNewContactForm,\n    showEditContactForm,\n    closeContactDetails,\n    cancelContactForm,\n    search,\n    searchMore,\n    cancelSearch,\n    /* Lifecycle hooks */\n    $onInit,\n    changePage,\n    getAccount,\n    addAccount,\n    updateAccount,\n    deleteContactAccount,\n  });\n}\n\nexport default ContactController;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-contact-ng/scripts/controller.js","/**\n * @description\n * Widget events enum (events generated by the widget)\n *\n * @name Event\n * @type {object}\n */\nconst Event = {\n  CONTACT_CREATE_START: 'bb.event.contact.create.start',\n  CONTACT_CREATE_DONE: 'bb.event.contact.create.done',\n  CONTACT_CREATE_FAILED: 'bb.event.contact.create.failed',\n  CONTACT_DELETE_START: 'bb.event.contact.delete.start',\n  CONTACT_DELETE_DONE: 'bb.event.contact.delete.done',\n  CONTACT_DELETE_FAILED: 'bb.event.contact.delete.failed',\n  CONTACT_SELECTED: 'bb.event.contact.selected',\n  CONTACT_UPDATE_START: 'bb.event.contact.update.start',\n  CONTACT_UPDATE_DONE: 'bb.event.contact.update.done',\n  CONTACT_UPDATE_FAILED: 'bb.event.contact.update.failed',\n  CONTACT_SEARCH: 'bb.event.contact.search',\n\n  CONTACT_SERVER_ERROR: 'bb.event.contact.server.error',\n  NOTIFICATION_EVENT: 'bb.event.notifications.notify',\n\n  CXP_ITEM_LOADED: 'cxp.item.loaded',\n  BB_ITEM_LOADED: 'bb.item.loaded',\n};\n\n/**\n * @description\n * Widget actions enum\n *\n * @name Action\n * @type {object}\n */\nconst Action = {\n  CONTACT_CREATE: 'bb.action.contact.create',\n  CONTACT_EDIT: 'bb.action.contact.edit',\n  CONTACT_DELETE: 'bb.action.contact.delete',\n};\n\n/**\n * @description\n * Widget messages enum\n *\n * @name Message\n * @type {object}\n */\nexport const Message = Object.assign({}, Action, Event);\n\n/**\n * @deprecated since version 2.2\n * Use state's isError flag to determine if message is success or error\n *\n * @description\n * List of css-classes to be used for notification\n *\n * @name StatusClasses\n * @type {object}\n */\nexport const StatusClasses = {\n  SUCCESS: 'success',\n  ERROR: 'warning',\n};\n\n/**\n * @description\n * Widget translation keys for notification messages\n *\n * @name TranslationKeys\n * @type {object}\n */\nexport const TranslationKeys = {\n  CONTACT_CREATE_SUCCESS: 'contact.notification.created.success',\n  CONTACT_CREATE_ACCEPTED: 'contact.notification.create.accepted',\n  CONTACT_UPDATE_SUCCESS: 'contact.notification.updated.success',\n  CONTACT_UPDATE_ACCEPTED: 'contact.notification.update.accepted',\n  CONTACT_DELETE_SUCCESS: 'contact.notification.deleted.success',\n  CONTACT_DELETE_ACCEPTED: 'contact.notification.delete.accepted',\n  CONTACT_UNEXPECTED: 'contact.model.error.unexpected',\n};\n\n/**\n * @description\n * Widget intents to be handled\n *\n * @name IntentsKeys\n * @type {object}\n */\nexport const IntentsKeys = {\n  CONTACT_CREATE: 'go.contact.create',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-contact-ng/scripts/constants.js","/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bb-contact-ng\n */\n\n/**\n * @name deleteContact\n *\n * @description\n * deleteContact default hook\n *\n * @param {object} contact Contact object\n * @param {function} confirm Function to confirm delete\n * @type {function}\n */\nexport function deleteContact(contact, confirm) {\n  confirm();\n}\n\n/**\n * @name getSelectedContact\n *\n * @description\n * getSelectedContact default hook\n *\n * @param {object} contacts Contacts list\n * @param {object} selectedContact Selected contact\n * @type {function}\n * @returns {object} selectedContact\n */\nexport function getSelectedContact(contacts, selectedContact) {\n  return selectedContact;\n}\n\n/**\n * @name selectPrevContact\n *\n * @description\n * Returns previous (or the first) contact based\n * on the currently selected item id or item index (deprecated).\n *\n * @param {array.<object>} contacts Processed contacts\n * @param {number} [index=0] Currently selected contact index (deprecated)\n * @param {object} [contact] Currently selected contact\n * @type {function}\n * @returns {object} Previous or the first contact from the contacts\n */\nexport function selectPrevContact(contacts, index = 0, contact) {\n  const contactIndex = (contacts || []).findIndex((item) => item.id === contact.id);\n  const firstContact = contacts ? contacts[0] : null;\n  return contactIndex > 0 ? contacts[contactIndex - 1] : firstContact;\n}\n\n/**\n * @name returnContactIfExists\n *\n * @description\n * Returns contact if it exists in contacts group, otherwise returns false result\n *\n * @param contacts Array of contacts\n * @param contact Contact object\n * @type {function}\n * @return {*} Specifies if contact exists in the array\n */\nexport function returnContactIfExists(contacts, contact) {\n  if (!Array.isArray(contacts)) {\n    return false;\n  }\n\n  const index = contacts.findIndex(item => item.id === contact.id);\n  if (index >= 0) {\n    return contacts[index];\n  }\n\n  return false;\n}\n\n/**\n * @name processContacts\n *\n * @description\n * processContacts default hook\n *\n * @param {array.<object>} contacts\n * @type {function}\n * @returns {array.<object>} contacts\n */\nexport function processContacts(contacts) {\n  return contacts;\n}\n\n/**\n * @description\n * processSearchContacts default hook\n *\n * @name processSearchContacts\n * @type {function}\n * @param {array.<object>} contacts Original list of searched contacts\n * @returns {array.<object>} Processed the list of searched contacts\n */\nexport function processSearchContacts(contacts = []) {\n  return contacts;\n}\n\n/**\n * @name processRequestParams\n *\n * @description\n * processRequestParams default hook\n *\n * @param {object} defaultParams\n * @param {object} params\n * @type {function}\n * @returns {object} processed request parameters\n */\nexport function processRequestParams(defaultParams, params) {\n  return Object.assign({}, defaultParams, params);\n}\n\n/**\n * @name processSearchRequestParams\n *\n * @description\n * processSearchRequestParams default hook\n *\n * @param {object} defaultParams\n * @param {object} params\n * @type {function}\n * @returns {object} processed request parameters\n */\nexport function processSearchRequestParams(defaultParams, params) {\n  return Object.assign({}, defaultParams, params);\n}\n\n/**\n * @name getNewContactObject\n *\n * @description\n * getNewContactObject default hook\n *\n * @param {object} contact New Contact object\n * @type {function}\n * @returns {object} Processed new Contact object\n */\nexport function getNewContactObject(contact) {\n  return contact;\n}\n\n/**\n * @name processContactBeforeSave\n *\n * @description\n * processContactBeforeSave default hook\n *\n * @param {object} contact Contact object to be created/updated\n * @type {function}\n * @returns {object} Processed Contact object\n */\nexport function processContactBeforeSave(contact) {\n  return contact;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-contact-ng/scripts/default-hooks.js"],"sourceRoot":""}