{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**********************","webpack:///webpack/bootstrap a983de776e3686600b94?4bc9**********************","webpack:///./widget-bbm-product-details-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*******","webpack:///external \"lib-bb-widget-ng\"?84ad**","webpack:///external \"lib-bb-model-errors\"?7567***","webpack:///external \"lib-bb-extension-helpers-ng\"?e731","webpack:///external \"model-bb-product-summary-ng\"?4945**","webpack:///external \"lib-bb-intent-ng\"?add1**","webpack:///external \"lib-bb-event-bus-ng\"?8215**","webpack:///./widget-bbm-product-details-ng/scripts/index.js","webpack:///external \"lib-bb-state-container-ng\"","webpack:///external \"lib-bb-extension-events-ng\"","webpack:///external \"lib-bb-extension-intents-ng\"","webpack:///./widget-bbm-product-details-ng/scripts/view-controller.js","webpack:///./widget-bbm-product-details-ng/scripts/form-controller.js","webpack:///./widget-bbm-product-details-ng/scripts/view-model/index.js","webpack:///./widget-bbm-product-details-ng/scripts/view-model/initial-state.js","webpack:///./widget-bbm-product-details-ng/scripts/view-model/product-details.js","webpack:///./widget-bbm-product-details-ng/scripts/view-model/helpers.js","webpack:///./widget-bbm-product-details-ng/scripts/view-model/form.js","webpack:///./widget-bbm-product-details-ng/scripts/service.js","webpack:///./widget-bbm-product-details-ng/scripts/events.js","webpack:///./widget-bbm-product-details-ng/scripts/constants.js"],"names":["moduleKey","eventServiceKey","serviceKey","viewModelKey","angular","module","modelProductSummaryModuleKey","eventBusModuleKey","widgetModuleKey","bbIntentModuleKey","stateContainerModuleKey","bbExtensionHelpersModuleKey","bbExtensionEventsModuleKey","bbExtensionIntentsModuleKey","factory","eventBusKey","widgetEvents","bbStateContainerKey","createViewModel","modelProductSummaryKey","createService","extensionHelpersContextKey","bbIntentKey","bbIntent","service","extensionIntentsContextKey","controller","ProductDetailsViewController","ProductDetailsFormController","run","widgetKey","eventBus","viewModel","widget","init","then","publish","Event","CXP_ITEM_LOADED","id","getId","BB_ITEM_LOADED","name","initialState","stateContainer","createAction","state","getState","form","productDetails","data","loading","error","alias","beforeProductDetailsLoad","beforeProductDetailsUpdate","afterProductDetailsLoadSuccess","productDetailsData","afterProductDetailsUpdateSuccess","afterProductDetailsLoadError","afterProductDetailsUpdateError","resetSelectedProduct","patchProductDetailsData","productDetailsPatch","errorMessages","E_AUTH","E_CONNECTIVITY","E_USER","E_UNEXPECTED","uiError","message","code","setProductAlias","resetProductAlias","model","events","getProductDetails","createSelector","updateArrangement","patchArrangement","arrangement","catch","loadProductDetails","productId","updateProductAlias","beforeProductAliasUpdate","afterProductAliasUpdateSuccess","afterProductAliasUpdateError","setProductAliasForm","patchProductDetailsDataState","loadProductDetailsIfNeeded","selectedProduct","Promise","resolve","BEFORE_PRODUCT_ALIAS_UPDATE","AFTER_PRODUCT_ALIAS_UPDATE_SUCCESS","AFTER_PRODUCT_ALIAS_UPDATED_ERROR","bus"],"mappings":"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","file":"widget-bbm-product-details-ng/scripts/widget-bbm-product-details-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-extension-helpers-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-state-container-ng\"), require(\"lib-bb-extension-events-ng\"), require(\"lib-bb-extension-intents-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bbm-product-details-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-extension-helpers-ng\", \"model-bb-product-summary-ng\", \"lib-bb-intent-ng\", \"lib-bb-event-bus-ng\", \"lib-bb-state-container-ng\", \"lib-bb-extension-events-ng\", \"lib-bb-extension-intents-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bbm-product-details-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-extension-helpers-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-state-container-ng\"), require(\"lib-bb-extension-events-ng\"), require(\"lib-bb-extension-intents-ng\"));\n\telse\n\t\troot[\"widget-bbm-product-details-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-extension-helpers-ng\"], root[\"model-bb-product-summary-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-state-container-ng\"], root[\"lib-bb-extension-events-ng\"], root[\"lib-bb-extension-intents-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_99__, __WEBPACK_EXTERNAL_MODULE_103__, __WEBPACK_EXTERNAL_MODULE_105__, __WEBPACK_EXTERNAL_MODULE_120__, __WEBPACK_EXTERNAL_MODULE_121__, __WEBPACK_EXTERNAL_MODULE_122__, __WEBPACK_EXTERNAL_MODULE_124__, __WEBPACK_EXTERNAL_MODULE_140__, __WEBPACK_EXTERNAL_MODULE_141__, __WEBPACK_EXTERNAL_MODULE_142__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a983de776e3686600b94","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bbm-product-details-ng/model.xml\n// module id = 0\n// module chunks = 23","module.exports = __WEBPACK_EXTERNAL_MODULE_99__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 99\n// module chunks = 15 16 17 18 19 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_103__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 103\n// module chunks = 15 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_105__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 105\n// module chunks = 15 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_120__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-extension-helpers-ng\"\n// module id = 120\n// module chunks = 20 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_121__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-product-summary-ng\"\n// module id = 121\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_122__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 122\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_124__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 124\n// module chunks = 20 21 22 23 24","/**\n * @module widget-bbm-product-details-ng\n *\n * @description\n * Mobile product details widget.\n *\n * @example\n *  <div ng-controller=\"ProductDetailsFormController as $ctrl\">\n *  </div>\n *\n *  <div ng-controller=\"ProductDetailsViewController as $ctrl\">\n *  </div>\n */\n\nimport angular from 'vendor-bb-angular';\n\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\nimport stateContainerModuleKey, { bbStateContainerKey } from 'lib-bb-state-container-ng';\nimport modelProductSummaryModuleKey, { modelProductSummaryKey } from 'model-bb-product-summary-ng';\n\nimport eventBusModuleKey, {\n  eventBusKey,\n} from 'lib-bb-event-bus-ng';\nimport bbExtensionHelpersModuleKey, {\n  extensionHelpersContextKey,\n} from 'lib-bb-extension-helpers-ng';\nimport bbExtensionEventsModuleKey from 'lib-bb-extension-events-ng';\nimport bbExtensionIntentsModuleKey, {\n  extensionIntentsContextKey,\n} from 'lib-bb-extension-intents-ng';\n\nimport ProductDetailsViewController from './view-controller';\nimport ProductDetailsFormController from './form-controller';\n\nimport createViewModel from './view-model';\nimport createService from './service';\nimport widgetEvents from './events';\n\nimport {\n  Event,\n} from './constants';\n\nconst moduleKey = 'widget-bbm-product-details-ng';\nconst eventServiceKey = `${moduleKey}:events`;\nconst serviceKey = `${moduleKey}:service`;\nconst viewModelKey = `${moduleKey}:viewModel`;\n\nexport default angular\n  .module(moduleKey, [\n    modelProductSummaryModuleKey,\n    eventBusModuleKey,\n    widgetModuleKey,\n    bbIntentModuleKey,\n    stateContainerModuleKey,\n    bbExtensionHelpersModuleKey,\n    bbExtensionEventsModuleKey,\n    bbExtensionIntentsModuleKey,\n  ])\n  .factory(eventServiceKey, [\n    eventBusKey,\n    /* into */\n    widgetEvents,\n  ])\n  .factory(viewModelKey, [\n    bbStateContainerKey,\n    /* into */\n    createViewModel,\n  ])\n  .factory(serviceKey, [\n    modelProductSummaryKey,\n    bbStateContainerKey,\n    viewModelKey,\n    eventServiceKey,\n    /* into */\n    createService,\n  ])\n  .factory(extensionHelpersContextKey, [\n    bbIntentKey,\n    serviceKey,\n    (bbIntent, service) => ({ bbIntent, service }),\n  ])\n  .factory(extensionIntentsContextKey, [\n    serviceKey,\n    (service) => ({ service }),\n  ])\n  .controller('ProductDetailsViewController', [\n    /* into */\n    ProductDetailsViewController,\n  ])\n  .controller('ProductDetailsFormController', [\n    /* into */\n    ProductDetailsFormController,\n  ])\n  .run([\n    bbIntentKey, eventBusKey, viewModelKey, widgetKey,\n    (bbIntent, eventBus, viewModel, widget) => {\n      viewModel.init();\n\n      bbIntent.init().then(() => {\n        eventBus.publish(Event.CXP_ITEM_LOADED, {\n          id: widget.getId(),\n        });\n\n        eventBus.publish(Event.BB_ITEM_LOADED, {\n          id: widget.getId(),\n        });\n      });\n    }])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_140__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-state-container-ng\"\n// module id = 140\n// module chunks = 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_141__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-extension-events-ng\"\n// module id = 141\n// module chunks = 23","module.exports = __WEBPACK_EXTERNAL_MODULE_142__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-extension-intents-ng\"\n// module id = 142\n// module chunks = 23 24","/**\n * @name ProductDetailsViewController\n * @ngkey ProductDetailsViewController\n * @description\n * Mobile Product details view controller.\n * @type {object}\n */\nexport default function ProductDetailsViewController() {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/view-controller.js","/**\n * @name ProductDetailsFormController\n * @ngkey ProductDetailsFormController\n * @description\n * Mobile Product details form controller.\n * @type {object}\n */\nexport default function ProductDetailsFormController() {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/form-controller.js","import createInitialState from './initial-state';\nimport createProductDetailsReducer from './product-details';\nimport createFormReducer from './form';\n\n/**\n * @name ViewModel\n * @type {object}\n * @ngKey widget-bbm-product-details-ng::viewModel\n * @inner\n */\nexport default stateContainer => {\n  const initialState = createInitialState();\n\n  return {\n    /**\n     * @name ViewModel#init\n     * @description Initialises view model with initial state.\n     * @type {function}\n     *\n     * @return {ViewState}\n     * @inner\n     */\n    init: stateContainer.createAction((state = initialState) => state),\n\n    /**\n     * @name ViewModel#getState\n     * @description Returns view state\n     * @type {function}\n     *\n     * @return {ViewState}\n     * @inner\n     */\n    getState: stateContainer.getState,\n\n    /**\n     * @name ViewModel#form\n     * @description\n     * Actions for updating the parts of the `ViewState` related to the form.\n     *\n     * @type {function}\n     * @return {ViewState}\n     * @inner\n     */\n    form: createFormReducer(stateContainer),\n\n    /**\n     * @name ViewModel#productDetails\n     * @description\n     * Actions for updating the parts of the `ViewState` related to the user.\n     * @type {function}\n     *\n     * @return {ViewState}\n     * @inner\n     */\n    productDetails: createProductDetailsReducer(stateContainer),\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/view-model/index.js","export default () => ({\n  productDetails: {\n    data: null,\n    loading: null,\n    error: null,\n  },\n  form: {\n    data: {\n      alias: null,\n    },\n  },\n});\n\n/**\n * @typedef {object} ViewState\n * @description\n * The current state of the [ViewModel]{@link module:lib-bb-view-model-ng}.\n *\n * @property {object} productDetails\n * @property {module:model-bb-product-summary-ng.ProductDetails} productDetails.data\n * product details.\n * @property {boolean} productDetails.loading\n * Indicates whether the product details is loading at the moment.\n * @property {object} productDetails.error The last encountered error.\n *\n * @property {object} form\n * @property {object} form.data The form's data\n * @property {string} from.data.alias a product alias.\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/view-model/initial-state.js","import { uiError } from './helpers';\n\n/**\n * @name ViewModelProductDetailsActions\n * @type {object}\n * @inner\n */\nexport default stateContainer => ({\n  /**\n   * @name ViewModelProductDetailsActions#beforeProductDetailsLoad\n   * @description\n   * Update the `ViewState` before product details is loaded.\n   * @type {function}\n   *\n   * @inner\n   */\n  beforeProductDetailsLoad: stateContainer.createAction(state => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      loading: true,\n    },\n  })),\n\n  /**\n   * @name ViewModelProductDetailsActions#beforeProductDetailsUpdate\n   * @description\n   * Update the `ViewState` before product details is updated.\n   * @type {function}\n   *\n   * @inner\n   */\n  beforeProductDetailsUpdate: stateContainer.createAction(state => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      loading: true,\n    },\n  })),\n\n  /**\n   * @name ViewModelProductDetailsActions#afterProductDetailsLoadSuccess\n   * @description\n   * Update the `ViewState` after product details is successfully loaded.\n   * @type {function}\n   *\n   * @param {module:model-bb-product-summary-ng.ProductDetails} productDetailsData\n   * @inner\n   */\n  afterProductDetailsLoadSuccess: stateContainer.createAction((state, productDetailsData) => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      data: productDetailsData,\n      loading: false,\n      error: null,\n    },\n  })),\n\n  /**\n   * @name ViewModelProductDetailsActions#afterProductDetailsUpdateSuccess\n   * @description\n   * Update the `ViewState` after product details is successfully updated.\n   * @type {function}\n   *\n   * @inner\n   */\n  afterProductDetailsUpdateSuccess: stateContainer.createAction(state => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      loading: false,\n      error: null,\n    },\n  })),\n\n  /**\n   * @name ViewModelProductDetailsActions#afterProductDetailsLoadError\n   * @description Update the `ViewState` after unsuccessful product details load.\n   * @type {function}\n   *\n   * @param {module:model-bb-product-summary-ng.ModelError} error Response error.\n   * @inner\n   */\n  afterProductDetailsLoadError: stateContainer.createAction((state, error) => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      loading: false,\n      error: uiError(error),\n    },\n  })),\n\n  /**\n   * @name ViewModelProductDetailsActions#afterProductDetailsUpdateError\n   * @description Update the `ViewState` after unsuccessful product details update.\n   * @type {function}\n   *\n   * @param {module:model-bb-product-summary-ng.ModelError} error Response error.\n   * @inner\n   */\n  afterProductDetailsUpdateError: stateContainer.createAction((state, error) => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      loading: false,\n      error: uiError(error),\n    },\n  })),\n\n  /**\n   * @name ViewModelProductDetailsActions#resetSelectedProduct\n   * @description Update the `ViewState` by resetting product details.\n   * @type {function}\n   *\n   * @inner\n   */\n  resetSelectedProduct: stateContainer.createAction(state => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      data: null,\n    },\n  })),\n\n  /**\n   * @name ViewModelProductDetailsActions#patchProductDetailsData\n   * @description Update the `ViewState` of the product details.\n   * @type {function}\n   *\n   * @param {object} productDetailsPatch\n   * @inner\n   */\n  patchProductDetailsData: stateContainer.createAction((state, productDetailsPatch) => ({\n    ...state,\n    productDetails: {\n      ...state.productDetails,\n      data: {\n        ...state.productDetails.data,\n        ...productDetailsPatch,\n      },\n    },\n  })),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/view-model/product-details.js","/* eslint-disable import/prefer-default-export */\nimport { E_AUTH, E_CONNECTIVITY, E_USER, E_UNEXPECTED } from 'lib-bb-model-errors';\n\nconst errorMessages = {\n  [E_AUTH]: 'model.error.auth',\n  [E_CONNECTIVITY]: 'model.error.connectivity',\n  [E_USER]: 'model.error.user',\n  [E_UNEXPECTED]: 'model.error.unexpected',\n};\n\nexport const uiError = error => ({\n  message: errorMessages[error.code],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/view-model/helpers.js","/**\n * @name ViewModelFormActions\n * @type {object}\n * @inner\n */\nexport default stateContainer => ({\n  /**\n   * @name ViewModelFormActions#setProductAlias\n   * @description\n   * Update the `ViewState` by prefilling the form with a product alias.\n   * @type {function}\n   *\n   * @param {string} alias\n   * @inner\n   */\n  setProductAlias: stateContainer.createAction((state, alias) => ({\n    ...state,\n    form: {\n      ...state.form,\n      data: {\n        ...state.form.data,\n        alias,\n      },\n    },\n  })),\n\n  /**\n   * @name ViewModelFormActions#resetProductAlias\n   * @description\n   * Update the `ViewState` by resetting a product alias.\n   * @type {function}\n   *\n   * @inner\n   */\n  resetProductAlias: stateContainer.createAction((state) => ({\n    ...state,\n    form: {\n      ...state.form,\n      data: {\n        ...state.form.data,\n        alias: null,\n      },\n    },\n  })),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/view-model/form.js","/**\n * @name ProductDetailsService\n * @type {object}\n * @ngkey widget-bbm-product-details-ng::service\n * @description\n * The service encapsulates the core functionality of the Mobile Product Details Widget.\n * It co-ordinates the communication of data from the `Model`\n * with the communication with the user by updating the {@link ViewState}.\n *\n * Asynchronous methods update the {@link ViewState} in 3 potential\n * stages; \"before\", \"success\", and \"error\", to allow the view to\n * provide feedback to the user.\n */\n\n/**\n * @name ProductDetailsService\n * @type {function}\n *\n * @param {module:model-bb-product-summary-ng.ProductDetails} model\n * @param {ViewModel} viewModel\n * @param {object} stateContainer\n * @param {object} events\n *\n * @return {ProductDetailsService}\n * @inner\n */\nexport default (model, stateContainer, viewModel, events) => {\n  /**\n   * @name ProductDetailsService#getProductDetails\n   * @description\n   * Retrieves product details.\n   * @type {function}\n   *\n   * @return {module:model-bb-product-summary-ng.ProductDetails} product details.\n   * @inner\n   */\n  const getProductDetails = stateContainer.createSelector(\n    state => state.productDetails.data\n  );\n\n  /**\n   * @name ProductDetailsService#loadProductDetails\n   * @description\n   * Updates an arrangement and\n   * updates the {@link ViewState} to display it.\n   * @type {function}\n   *\n   * @param {module:model-bb-product-summary-ng.ArrangementsData.ArrangementPatch} arrangement\n   * @return {Promise}\n   * @inner\n   */\n  const updateArrangement = arrangement => {\n    viewModel.productDetails.beforeProductDetailsLoad();\n\n    return model.patchArrangement(arrangement)\n      .then(() => {\n        viewModel.productDetails.afterProductDetailsUpdateSuccess();\n      })\n      .catch(error => {\n        viewModel.productDetails.afterProductDetailsUpdateError(error);\n\n        throw error;\n      });\n  };\n\n  /**\n   * @name ProductDetailsService#loadProductDetails\n   * @description\n   * Fetches the product details and\n   * updates the {@link ViewState} to display it.\n   * @type {function}\n   *\n   * @param {string} productId product's id.\n   * @return {Promise}\n   * @inner\n   */\n  const loadProductDetails = productId => {\n    viewModel.productDetails.beforeProductDetailsLoad();\n\n    return model.getProductDetails(productId)\n      .then(productDetails => {\n        viewModel.productDetails.afterProductDetailsLoadSuccess(productDetails);\n      })\n      .catch(error => {\n        viewModel.productDetails.afterProductDetailsLoadError(error);\n\n        throw error;\n      });\n  };\n\n  /**\n   * @name ProductDetailsService#updateProductAlias\n   * @description\n   * Updates a product alias.\n   * @type {function}\n   *\n   * @param {module:model-bb-product-summary-ng.ArrangementsData.ArrangementPatch} arrangement\n   * @return {Promise}\n   */\n  const updateProductAlias = (arrangement) => {\n    events.beforeProductAliasUpdate();\n\n    return updateArrangement(arrangement)\n      .then(() => {\n        events.afterProductAliasUpdateSuccess(arrangement);\n      })\n      .catch(error => {\n        events.afterProductAliasUpdateError(error);\n\n        throw error;\n      });\n  };\n\n  /**\n   * @name ProductDetailsService#setProductAliasForm\n   * @description Fills up the form with a product alias.\n   * @type {function}\n   */\n  const setProductAliasForm = () => {\n    const { alias } = getProductDetails();\n\n    viewModel.form.setProductAlias(alias);\n  };\n\n  /**\n   * @name ProductDetailsService#patchProductDetailsDataState\n   * @description Patches the product details data state.\n   * @type {function}\n   *\n   * @param {object} productDetailsPatch\n   */\n  const patchProductDetailsDataState = productDetailsPatch => {\n    viewModel.productDetails.patchProductDetailsData(productDetailsPatch);\n  };\n\n  /**\n   * @name ProductDetailsService#loadProductDetailsIfNeeded\n   * @description Loads product details if needed.\n   * @type {function}\n   *\n   * @param {string} productId product's id.\n   * @return {Promise}\n   * @inner\n   */\n  const loadProductDetailsIfNeeded = productId => {\n    const selectedProduct = getProductDetails();\n\n    if (!selectedProduct) {\n      return loadProductDetails(productId);\n    } else if (selectedProduct.id !== productId) {\n      viewModel.productDetails.resetSelectedProduct();\n\n      return loadProductDetails(productId);\n    }\n\n    return Promise.resolve();\n  };\n\n  return {\n    loadProductDetailsIfNeeded,\n    updateProductAlias,\n    setProductAliasForm,\n    patchProductDetailsDataState,\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/service.js","export const Event = {\n  /**\n   * An updated product alias is submitted to the server\n   * @event bb.event.productDetails.alias.edit.start\n   * @type {string}\n   */\n  BEFORE_PRODUCT_ALIAS_UPDATE: 'bb.event.productDetails.alias.edit.start',\n\n  /**\n   * A product alias is updated on the server\n   * @event bb.event.productDetails.alias.edit.done\n   * @type {string}\n   * @property {module:model-bb-product-summary-ng.ArrangementsData.ArrangementPatch} arrangement\n   */\n  AFTER_PRODUCT_ALIAS_UPDATE_SUCCESS: 'bb.event.productDetails.alias.edit.done',\n\n  /**\n   * A product alias fails to be updated on the server\n   * @event bb.event.productDetails.alias.edit.failed\n   * @type {string}\n   * @property {module:lib-bb-model-ng.ModelError} error\n   */\n  AFTER_PRODUCT_ALIAS_UPDATED_ERROR: 'bb.event.productDetails.alias.edit.failed',\n};\n\nexport default (bus) => ({\n  beforeProductAliasUpdate() {\n    bus.publish(Event.BEFORE_PRODUCT_ALIAS_UPDATE);\n  },\n  afterProductAliasUpdateSuccess(arrangement) {\n    bus.publish(Event.AFTER_PRODUCT_ALIAS_UPDATE_SUCCESS, { arrangement });\n  },\n  afterProductAliasUpdateError(error) {\n    bus.publish(Event.AFTER_PRODUCT_ALIAS_UPDATED_ERROR, { error });\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/events.js","/* eslint-disable import/prefer-default-export */\n/**\n * Pubsub events\n * @type {Object}\n */\nexport const Event = {\n  CXP_ITEM_LOADED: 'cxp.item.loaded',\n  BB_ITEM_LOADED: 'bb.item.loaded',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/constants.js"],"sourceRoot":""}