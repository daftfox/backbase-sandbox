{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*****************","webpack:///webpack/bootstrap 70daa42420248d0dae68?ba28*****************","webpack:///./widget-bb-login-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*********","webpack:///external \"lib-bb-intent-ng\"?add1*","webpack:///external \"lib-bb-widget-ng\"?84ad**","webpack:///./widget-bb-login-ng/scripts/index.js","webpack:///external \"lib-bb-storage-ng\"","webpack:///external \"lib-bb-login-logout-notifier-ng\"","webpack:///external \"model-bb-login-ng\"","webpack:///./widget-bb-login-ng/scripts/controller.js","webpack:///./widget-bb-login-ng/scripts/constants.js"],"names":["angular","module","modelLoginModuleKey","widgetModuleKey","bbIntentModuleKey","bbLoginLogoutNotifierModuleKey","bbStorageModuleKey","controller","modelLoginKey","widgetKey","bbLoginLogoutNotifierServiceKey","bbStorageServiceKey","Controller","run","bbIntentKey","intents","init","name","LoginController","model","widgetInstance","$window","loginLogoutNotifier","bbStorage","$ctrl","portal","b$","loginRedirectPage","getStringPreference","loginRedirectUrl","config","serverRoot","portalName","$onInit","location","search","indexOf","loginError","loginErrorCode","login","isLoading","username","password","extraFormFields","then","response","status","setUserLoggedIn","removeItem","BbStorageKeys","PRODUCT_SUMMARY","PRODUCT_SELECTED","PRODUCTS_SELECTED","CONTACT_SELECTED","assign","catch","Object"],"mappings":"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","file":"widget-bb-login-ng/scripts/widget-bb-login-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-login-logout-notifier-ng\"), require(\"model-bb-login-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-login-ng\", [\"vendor-bb-angular\", \"lib-bb-intent-ng\", \"lib-bb-widget-ng\", \"lib-bb-storage-ng\", \"lib-bb-login-logout-notifier-ng\", \"model-bb-login-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-login-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-login-logout-notifier-ng\"), require(\"model-bb-login-ng\"));\n\telse\n\t\troot[\"widget-bb-login-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-storage-ng\"], root[\"lib-bb-login-logout-notifier-ng\"], root[\"model-bb-login-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_51__, __WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_62__, __WEBPACK_EXTERNAL_MODULE_63__, __WEBPACK_EXTERNAL_MODULE_64__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70daa42420248d0dae68","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-login-ng/model.xml\n// module id = 0\n// module chunks = 18","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 9 10 11 12 13 14 15 16 17 18 19 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_51__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 51\n// module chunks = 15 16 18 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 53\n// module chunks = 15 16 17 18 19 21 22","/**\n * @module widget-bb-login-ng\n *\n * @description\n * Login widget\n */\nimport angular from 'vendor-bb-angular';\n\nimport widgetModuleKey, {\n  widgetKey,\n} from 'lib-bb-widget-ng';\n\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\nimport bbStorageModuleKey, { bbStorageServiceKey } from 'lib-bb-storage-ng';\nimport bbLoginLogoutNotifierModuleKey,\n  { bbLoginLogoutNotifierServiceKey } from 'lib-bb-login-logout-notifier-ng';\n\nimport modelLoginModuleKey, { modelLoginKey } from 'model-bb-login-ng';\nimport Controller from './controller';\n\nexport default angular\n  .module('widget-bb-login-ng', [\n    modelLoginModuleKey,\n    widgetModuleKey,\n    bbIntentModuleKey,\n    bbLoginLogoutNotifierModuleKey,\n    bbStorageModuleKey,\n  ])\n\n  .controller('LoginController', [\n    // dependencies to inject\n    modelLoginKey,\n    widgetKey,\n    '$window',\n    bbLoginLogoutNotifierServiceKey,\n    bbStorageServiceKey,\n    /* into */\n    Controller,\n  ])\n\n  // Initialize intent library\n  .run([bbIntentKey, (intents) => {\n    intents.init();\n  }])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-login-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_62__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-storage-ng\"\n// module id = 62\n// module chunks = 18 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_63__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-login-logout-notifier-ng\"\n// module id = 63\n// module chunks = 18 22","module.exports = __WEBPACK_EXTERNAL_MODULE_64__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-login-ng\"\n// module id = 64\n// module chunks = 18 21 22","import { BbStorageKeys } from './constants';\n\n/* global window */\n\n/**\n * @name LoginController\n * @type {object}\n *\n * @description\n * Login widget\n */\nexport default function LoginController(\n  model,\n  widgetInstance,\n  $window,\n  loginLogoutNotifier,\n  bbStorage) {\n  const $ctrl = this;\n  const portal = $window.b$ && $window.b$.portal;\n\n  const loginRedirectPage = widgetInstance.getStringPreference('loginRedirectPage');\n\n  const loginRedirectUrl = portal ?\n    `${portal.config.serverRoot}/${portal.portalName}/${loginRedirectPage}` :\n    loginRedirectPage;\n\n  const $onInit = () => {\n    if ($window.location.search && $window.location.search.indexOf('sa-error') !== -1) {\n      $ctrl.loginError = true;\n      $ctrl.loginErrorCode = 'sa-error';\n    }\n  };\n\n  const login = () => {\n    $ctrl.isLoading = true;\n    return model.login($ctrl.username, $ctrl.password, $ctrl.extraFormFields)\n      .then((response) => {\n        $ctrl.isLoading = false;\n        if (response.status === 200) {\n          loginLogoutNotifier.setUserLoggedIn();\n          bbStorage.removeItem(BbStorageKeys.PRODUCT_SUMMARY);\n          bbStorage.removeItem(BbStorageKeys.PRODUCT_SELECTED);\n          bbStorage.removeItem(BbStorageKeys.PRODUCTS_SELECTED);\n          bbStorage.removeItem(BbStorageKeys.CONTACT_SELECTED);\n          $window.location.assign(loginRedirectUrl);\n        }\n      }).catch((response) => {\n        $ctrl.isLoading = false;\n        $ctrl.loginError = true;\n        $ctrl.loginErrorCode = response.status;\n        $ctrl.password = '';\n      });\n  };\n\n  Object.assign($ctrl, {\n    /**\n     * @description\n     * AngularJS Lifecycle hook used to initialize the controller\n     * @type {function}\n     *\n     * @name LoginController#$onInit\n     * @returns {void}\n     */\n    $onInit,\n    /**\n     * @description Login function\n     * @type {function}\n     *\n     * @name LoginController#login\n     * @returns {Promise}\n     */\n    login,\n    /**\n     * @name LoginController#username\n     * @type {string}\n     */\n    username: '',\n    /**\n     * @name LoginController#password\n     * @type {string}\n     */\n    password: '',\n    /**\n     * @name LoginController#extraFormFields\n     * @type {object}\n     */\n    extraFormFields: {},\n    /**\n     * @name LoginController#loginError\n     * @type {boolean}\n     */\n    loginError: false,\n    /**\n     * @name LoginController#loginErrorCode\n     * @type {number}\n     */\n    loginErrorCode: 0,\n    /**\n     * @description\n     * Loading status\n     *\n     * @name isLoading\n     * @type {boolean}\n     */\n    isLoading: false,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-login-ng/scripts/controller.js","/* eslint-disable import/prefer-default-export */\n\n/**\n * @name BbStorageKeys\n *\n * @description\n * bbStorage keys enum.\n *\n * @type {object}\n */\nexport const BbStorageKeys = {\n  PRODUCT_SUMMARY: 'bb.product.summary.data',\n  PRODUCT_SELECTED: 'bb.product.selected',\n  PRODUCTS_SELECTED: 'bb.event.products.selected',\n  CONTACT_SELECTED: 'bb.contact.selected',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-login-ng/scripts/constants.js"],"sourceRoot":""}