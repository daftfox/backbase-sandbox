{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**************","webpack:///webpack/bootstrap 70daa42420248d0dae68?ba28**************","webpack:///./widget-bb-create-new-ng/model.xml","webpack:///external \"vendor-bb-angular\"","webpack:///external \"lib-bb-event-bus-ng\"?8215","webpack:///./widget-bb-create-new-ng/scripts/index.js","webpack:///external \"lib-bb-widget-extension-ng\"","webpack:///external \"lib-bb-intent-ng\"","webpack:///external \"lib-bb-permissions-ng\"","webpack:///external \"lib-bb-widget-ng\"","webpack:///./widget-bb-create-new-ng/scripts/controller.js","webpack:///./widget-bb-create-new-ng/scripts/default-hooks.js"],"names":["defaultHooks","hooksKey","angular","module","widgetModuleKey","eventBusModuleKey","intentModuleKey","libBbPermissionsModuleKey","factory","config","bbPermissionsKey","permissionsProvider","enableDownloadOnInit","setCacheEnabled","controller","eventBusKey","widgetKey","bbIntentKey","Controller","run","bbIntent","init","name","CreateNewController","state","actions","isPermitted","hooks","bus","widget","bbIntents","permissions","intentsList","actionNames","eventNames","navigateTo","action","getPermissions","privileges","getRequestedPrivileges","then","Object","values","resp","forEach","func","res","privs","Boolean","$onInit","getActionNames","getActionEvents","index","create","publish","id","getId","getActionsList"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,0C;;;;;;;ACAA,gD;;;;;;;ACAA,iD;;;;;;;;;;;;;ACYA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;KAAYA,Y;;;;;;AApBZ;;;;;;;;;;;;AAsBA,KAAMC,WAAW,+BAAjB;;AAEA;;;;;;;mBAOeC,0BACZC,MADY,CACL,yBADK,EACsB,CACjCC,uBADiC,EAEjCC,yBAFiC,EAGjCC,uBAHiC,EAIjCC,4BAJiC,CADtB,EAOZC,OAPY,CAOJP,QAPI,EAOM,sCAAYD,YAAZ,CAPN,EAQZS,MARY,CAQL,CAAIC,oCAAJ,eAAgC,UAACC,mBAAD,EAAyB;AAC/DA,uBAAoBC,oBAApB,CAAyC,IAAzC;AACAD,uBAAoBE,eAApB,CAAoC,KAApC;AACD,EAHO,CARK,EAYZC,UAZY,CAYD,qBAZC,EAYsB;AACjC;AACAb,SAFiC,EAGjCc,4BAHiC,EAIjCC,wBAJiC,EAKjCC,0BALiC,EAMjCP,oCANiC;AAOjC;AACAQ,qBARiC,CAZtB,EAsBZC,GAtBY,CAsBR,CAACF,0BAAD,EAAc,UAACG,QAAD,EAAc;AAC/BA,YAASC,IAAT;AACD,EAFI,CAtBQ,EAyBZC,I;;;;;;;ACxDH,iD;;;;;;;ACAA,iD;;;;;;;ACAA,iD;;;;;;;ACAA,iD;;;;;;;;;;;;mBCcwBC,mB;AAdxB,KAAMC,QAAQ;AACZC,YAAS,EADG;AAEZC,gBAAa;AAFD,EAAd;;AAKA;;;;;;;;;AASe,UAASH,mBAAT,CAA6BI,KAA7B,EAAoCC,GAApC,EAAyCC,MAAzC,EAAiDC,SAAjD,EAA4DC,WAA5D,EAAyE;AACtF;;;;;;;AAOA,OAAMC,cAAc,EAApB;;AAEA;;;;;;;AAOA,OAAIC,oBAAJ;;AAEA;;;;;;;AAOA,OAAIC,mBAAJ;;AAGA;;;;;;;;;;AAUA,OAAMC,aAAa,SAAbA,UAAa,CAACC,MAAD,EAAY;AAC7BJ,iBAAYI,MAAZ;AACD,IAFD;;AAIA;;;;;;;;;;AAUA,OAAMC,iBAAiB,SAAjBA,cAAiB,GAAM;AAC3B,SAAMC,aAAaX,MAAMY,sBAAN,EAAnB;;AAEA,YAAOR,YAAYM,cAAZ,CAA2BC,UAA3B,EACJE,IADI,CACC,gBAAQ;AACZC,cAAOC,MAAP,CAAcC,IAAd,EAAoBC,OAApB,CAA4B,eAAO;AACjC,aAAMC,OAAOJ,OAAOC,MAAP,CAAcI,GAAd,EAAmB,CAAnB,CAAb;AACA,aAAMC,QAAQC,QAAQP,OAAOC,MAAP,CAAcG,IAAd,EAAoB,CAApB,CAAR,CAAd;;AAEArB,eAAME,WAAN,GAAoBqB,SAASvB,MAAME,WAAnC;AACD,QALD;AAMD,MARI,CAAP;AASD,IAZD;;AAcA,OAAMuB,UAAU,SAAVA,OAAU,GAAM;AACpBhB,mBAAcN,MAAMuB,cAAN,EAAd;AACAhB,kBAAaP,MAAMwB,eAAN,EAAb;AACAd;;AAEA;AACAJ,iBAAYW,OAAZ,CAAoB,UAACtB,IAAD,EAAO8B,KAAP,EAAiB;AACnCpB,mBAAYV,IAAZ,IAAoBQ,UAAUuB,MAAV,CAAiBnB,WAAWkB,KAAX,CAAjB,CAApB;AACD,MAFD;;AAIA;;;;AAIAxB,SAAI0B,OAAJ,CAAY,iBAAZ,EAA+B;AAC7BC,WAAI1B,OAAO2B,KAAP;AADyB,MAA/B;;AAIA5B,SAAI0B,OAAJ,CAAY,gBAAZ,EAA8B;AAC5BC,WAAI1B,OAAO2B,KAAP;AADwB,MAA9B;;AAIAhC,WAAMC,OAAN,GAAgBE,MAAM8B,cAAN,EAAhB;AACD,IAvBD;;AAyBA,UAAO;AACLjC,iBADK;AAELW,2BAFK;AAGL;AACAc;AAJK,IAAP;AAMD,E;;;;;;;;;;;;AChHD;;;;;;;;AAQA;;;;;;;;;AASO,KAAMQ,0CAAiB,SAAjBA,cAAiB;AAAA,UAAM,EAAN;AAAA,EAAvB;;AAEP;;;;;;;;;AASO,KAAMP,0CAAiB,SAAjBA,cAAiB;AAAA,UAAM,EAAN;AAAA,EAAvB;;AAEP;;;;;;;;;AASO,KAAMC,4CAAkB,SAAlBA,eAAkB;AAAA,UAAM,EAAN;AAAA,EAAxB;;AAEP;;;;;;;;;AASO,KAAMZ,0DAAyB,SAAzBA,sBAAyB;AAAA,UAAO,EAAP;AAAA,EAA/B,C","file":"widget-bb-create-new-ng/scripts/widget-bb-create-new-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-permissions-ng\"), require(\"lib-bb-widget-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-create-new-ng\", [\"vendor-bb-angular\", \"lib-bb-event-bus-ng\", \"lib-bb-widget-extension-ng\", \"lib-bb-intent-ng\", \"lib-bb-permissions-ng\", \"lib-bb-widget-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-create-new-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-permissions-ng\"), require(\"lib-bb-widget-ng\"));\n\telse\n\t\troot[\"widget-bb-create-new-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-widget-extension-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-permissions-ng\"], root[\"lib-bb-widget-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_33__, __WEBPACK_EXTERNAL_MODULE_50__, __WEBPACK_EXTERNAL_MODULE_51__, __WEBPACK_EXTERNAL_MODULE_52__, __WEBPACK_EXTERNAL_MODULE_53__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70daa42420248d0dae68","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-create-new-ng/model.xml\n// module id = 0\n// module chunks = 15","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 9 10 11 12 13 14 15 16 17 18 19 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_33__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 33\n// module chunks = 9 15 16","/**\n * @module widget-bb-create-new-ng\n *\n * @description\n * Redirect user to \"create new\" locations of other widgets\n *\n *\n * @example\n *  <div ng-controller=\"CreateNewController as $ctrl\">\n *  </div>\n */\n\nimport angular from 'vendor-bb-angular';\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport intentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\nimport libBbPermissionsModuleKey, { bbPermissionsKey } from 'lib-bb-permissions-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport eventBusModuleKey, { eventBusKey } from 'lib-bb-event-bus-ng';\n\nimport Controller from './controller';\nimport * as defaultHooks from './default-hooks';\n\nconst hooksKey = 'widget-bb-create-new-ng:hooks';\n\n/**\n * @name default\n * @type {string}\n *\n * @description\n * Create New Widget\n */\nexport default angular\n  .module('widget-bb-create-new-ng', [\n    widgetModuleKey,\n    eventBusModuleKey,\n    intentModuleKey,\n    libBbPermissionsModuleKey,\n  ])\n  .factory(hooksKey, extendHooks(defaultHooks))\n  .config([`${bbPermissionsKey}Provider`, (permissionsProvider) => {\n    permissionsProvider.enableDownloadOnInit(true);\n    permissionsProvider.setCacheEnabled(false);\n  }])\n  .controller('CreateNewController', [\n    // dependencies to inject\n    hooksKey,\n    eventBusKey,\n    widgetKey,\n    bbIntentKey,\n    bbPermissionsKey,\n    /* into */\n    Controller,\n  ])\n  .run([bbIntentKey, (bbIntent) => {\n    bbIntent.init();\n  }])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-create-new-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_50__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 50\n// module chunks = 15 19 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_51__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 51\n// module chunks = 15 16 18 21 22","module.exports = __WEBPACK_EXTERNAL_MODULE_52__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-permissions-ng\"\n// module id = 52\n// module chunks = 15","module.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 53\n// module chunks = 15 16 17 18 19 21 22","const state = {\n  actions: [],\n  isPermitted: false,\n};\n\n/**\n * @name CreateNewController\n * @ngkey CreateNewController\n *\n * @type {object}\n *\n * @description\n * Create new widget controller.\n */\nexport default function CreateNewController(hooks, bus, widget, bbIntents, permissions) {\n  /**\n   * @description\n   * List of intents allowed\n   *\n   * @inner\n   * @type {object}\n   */\n  const intentsList = {};\n\n  /**\n   * @description\n   * List of action names\n   *\n   * @inner\n   * @type {array}\n   */\n  let actionNames;\n\n  /**\n   * @description\n   * List of event names\n   *\n   * @inner\n   * @type {array}\n   */\n  let eventNames;\n\n\n  /**\n   * @name CreateNewController#navigateTo\n   * @type {function}\n   *\n   * @description\n   * Navigate to selected widget\n   *\n   * @param {string} action\n   * @returns {undefined}\n   */\n  const navigateTo = (action) => {\n    intentsList[action]();\n  };\n\n  /**\n   * @name CreateNewController#getPermissions\n   * @type {Function}\n   * @inner\n   *\n   * @description\n   * Loads user permission for the extension\n   *\n   * @returns {Promise.<void>}\n   */\n  const getPermissions = () => {\n    const privileges = hooks.getRequestedPrivileges();\n\n    return permissions.getPermissions(privileges)\n      .then(resp => {\n        Object.values(resp).forEach(res => {\n          const func = Object.values(res)[0];\n          const privs = Boolean(Object.values(func)[0]);\n\n          state.isPermitted = privs || state.isPermitted;\n        });\n      });\n  };\n\n  const $onInit = () => {\n    actionNames = hooks.getActionNames();\n    eventNames = hooks.getActionEvents();\n    getPermissions();\n\n    // Populate list with intents\n    actionNames.forEach((name, index) => {\n      intentsList[name] = bbIntents.create(eventNames[index]);\n    });\n\n    /**\n     * This event (cxp.item.loaded) is deprecated in Mobile SDK version > 3.0\n     * and will be removed with the update to widget collection 3 (WC3)\n     */\n    bus.publish('cxp.item.loaded', {\n      id: widget.getId(),\n    });\n\n    bus.publish('bb.item.loaded', {\n      id: widget.getId(),\n    });\n\n    state.actions = hooks.getActionsList();\n  };\n\n  return {\n    state,\n    navigateTo,\n    /* Lifecycle hooks */\n    $onInit,\n  };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-create-new-ng/scripts/controller.js","/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Default hooks for widget-bb-create-new-ng\n */\n\n/**\n * @name Hooks#getActionsList\n * @type {function}\n *\n * @description\n * Hook for getting the list of allowed redirections\n *\n * @returns {array} actions\n */\nexport const getActionsList = () => [];\n\n/**\n * @name Hooks#getActionNames\n * @type {function}\n *\n * @description\n * Returns a list of action names allowed for a user\n *\n * @return {array}\n */\nexport const getActionNames = () => [];\n\n/**\n * @name Hooks#getActionEvents\n * @type {function}\n *\n * @description\n * Returns a list of event names\n *\n * @return {array}\n */\nexport const getActionEvents = () => [];\n\n/**\n * @name Hooks#getRequestedPrivileges\n * @type {Function}\n *\n * @description\n * Prepare required privileges into a form ready for template\n\n * @returns {Array.<Object>} Required privileges array\n */\nexport const getRequestedPrivileges = () => ([]);\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-create-new-ng/scripts/default-hooks.js"],"sourceRoot":""}