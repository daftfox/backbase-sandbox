{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6************************************","webpack:///webpack/bootstrap d0309a746b17cd403690?c295************************************","webpack:///./widget-wm-valuation-ng/model.xml","webpack:///./widget-wm-valuation-ng/scripts/constants.js?42d1","webpack:///external \"lib-bb-state-container-ng\"?8d56*********","webpack:///external \"lib-wm-portfolio-view-model-helper\"?8f7a*********","webpack:///external \"vendor-bb-angular\"?a114***************","webpack:///external \"model-wm-portfolio-summary-ng\"?e4f4********","webpack:///external \"lib-bb-currency-ng\"?de3f","webpack:///external \"lib-wm-portfolio-router-ng\"?a72f*","webpack:///external \"lib-bb-widget-ng\"?84ad**","webpack:///./widget-wm-valuation-ng/scripts/index.js","webpack:///external \"lib-bb-extension-helpers-ng\"","webpack:///./widget-wm-valuation-ng/scripts/controller.js","webpack:///./widget-wm-valuation-ng/scripts/view-model.js","webpack:///./widget-wm-valuation-ng/scripts/service.js"],"names":["VALUATION_ROUTE","VARIATION_ROUTE","Preferences","DISPLAY_VALUATION_CHART","DISPLAY_VARIATION_CHART","viewModelKey","serviceKey","angular","module","modelPortfolioSummaryModuleKey","libBbCurrencyKey","bbExtensionHelpersModuleKey","stateContainerModuleKey","routerModuleKey","widgetModuleKey","factory","extensionHelpersContextKey","bbCurrencyRuleKey","$compile","getRule","bbStateContainerKey","ViewModel","modelPortfolioSummaryKey","Service","controller","routerKey","widgetKey","Controller","name","ValuationController","model","service","viewModel","router","widget","switchDisplayMode","getRoute","goto","loadValuationData","setGranularity","setPeriod","period","periodParams","dateFrom","Date","setHours","dateTo","$onInit","init","getBooleanPreference","state","getState","errors","valuationError","clearError","key","initialState","valuation","data","loading","isValuation","granularity","route","initialLoading","stateContainer","beforeLoadValuationData","afterLoadValuationDataSuccess","raw","afterLoadValuationDataError","error","code","getSelectedPortfolioId","then","portfolioId","loadPerformanceValuation","catch"],"mappings":"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","file":"widget-wm-valuation-ng/scripts/widget-wm-valuation-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lib-bb-state-container-ng\"), require(\"lib-wm-portfolio-view-model-helper\"), require(\"vendor-bb-angular\"), require(\"model-wm-portfolio-summary-ng\"), require(\"lib-bb-currency-ng\"), require(\"lib-wm-portfolio-router-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-extension-helpers-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-wm-valuation-ng\", [\"lib-bb-state-container-ng\", \"lib-wm-portfolio-view-model-helper\", \"vendor-bb-angular\", \"model-wm-portfolio-summary-ng\", \"lib-bb-currency-ng\", \"lib-wm-portfolio-router-ng\", \"lib-bb-widget-ng\", \"lib-bb-extension-helpers-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-wm-valuation-ng\"] = factory(require(\"lib-bb-state-container-ng\"), require(\"lib-wm-portfolio-view-model-helper\"), require(\"vendor-bb-angular\"), require(\"model-wm-portfolio-summary-ng\"), require(\"lib-bb-currency-ng\"), require(\"lib-wm-portfolio-router-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-extension-helpers-ng\"));\n\telse\n\t\troot[\"widget-wm-valuation-ng\"] = factory(root[\"lib-bb-state-container-ng\"], root[\"lib-wm-portfolio-view-model-helper\"], root[\"vendor-bb-angular\"], root[\"model-wm-portfolio-summary-ng\"], root[\"lib-bb-currency-ng\"], root[\"lib-wm-portfolio-router-ng\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-extension-helpers-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_86__, __WEBPACK_EXTERNAL_MODULE_88__, __WEBPACK_EXTERNAL_MODULE_93__, __WEBPACK_EXTERNAL_MODULE_126__, __WEBPACK_EXTERNAL_MODULE_127__, __WEBPACK_EXTERNAL_MODULE_128__, __WEBPACK_EXTERNAL_MODULE_152__, __WEBPACK_EXTERNAL_MODULE_175__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0309a746b17cd403690","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-wm-valuation-ng/model.xml\n// module id = 0\n// module chunks = 37","/**\n * @name VALUATION_ROUTE\n * @type {string}\n * @description\n * Constant for valuation route\n */\nexport const VALUATION_ROUTE = 'VALUATION_ROUTE';\n/**\n * @name VARIATION_ROUTE\n * @type {string}\n * @description\n * Constant for variation route\n */\nexport const VARIATION_ROUTE = 'VARIATION_ROUTE';\n\n/**\n * @name Preferences\n * @type {Object}\n * @description\n * Const for widget properties/preferences\n */\nexport const Preferences = {\n  DISPLAY_VALUATION_CHART: 'displayValuationChart',\n  DISPLAY_VARIATION_CHART: 'displayVariationChart',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-wm-valuation-ng/scripts/constants.js","module.exports = __WEBPACK_EXTERNAL_MODULE_86__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-state-container-ng\"\n// module id = 86\n// module chunks = 19 28 29 30 31 32 33 34 35 36 37","module.exports = __WEBPACK_EXTERNAL_MODULE_88__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-wm-portfolio-view-model-helper\"\n// module id = 88\n// module chunks = 19 28 29 30 31 32 33 34 35 36 37","module.exports = __WEBPACK_EXTERNAL_MODULE_93__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 93\n// module chunks = 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37","module.exports = __WEBPACK_EXTERNAL_MODULE_126__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-wm-portfolio-summary-ng\"\n// module id = 126\n// module chunks = 28 29 30 31 32 33 34 35 36 37","module.exports = __WEBPACK_EXTERNAL_MODULE_127__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-currency-ng\"\n// module id = 127\n// module chunks = 28 37","module.exports = __WEBPACK_EXTERNAL_MODULE_128__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-wm-portfolio-router-ng\"\n// module id = 128\n// module chunks = 28 29 37","module.exports = __WEBPACK_EXTERNAL_MODULE_152__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 152\n// module chunks = 33 34 35 37","/**\n * @module widget-wm-valuation-ng\n *\n * @description\n * Valuation widget.\n *\n *\n * @example\n *  <div ng-controller=\"ValuationController as $ctrl\">\n *    <ul>\n *       <li ng-repeat=\"item in $ctrl.state.performance.data\">{{item.id}}</li>\n *    </ul>\n *  </div>\n */\nimport libBbCurrencyKey, {\n  bbCurrencyRuleKey,\n} from 'lib-bb-currency-ng';\nimport bbExtensionHelpersModuleKey, {\n  extensionHelpersContextKey,\n} from 'lib-bb-extension-helpers-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport stateContainerModuleKey, { bbStateContainerKey } from 'lib-bb-state-container-ng';\nimport angular from 'vendor-bb-angular';\nimport modelPortfolioSummaryModuleKey, {\n  modelPortfolioSummaryKey,\n} from 'model-wm-portfolio-summary-ng';\nimport routerModuleKey, { routerKey } from 'lib-wm-portfolio-router-ng';\n\nimport Controller from './controller';\nimport ViewModel from './view-model';\nimport Service from './service';\n\nconst viewModelKey = 'widget-wm-valuation-ng:viewModel';\nconst serviceKey = 'widget-wm-valuation-ng:service';\n\n/**\n * @name default\n * @type {string}\n * @description Angular module name\n */\nexport default angular\n  .module('widget-wm-valuation-ng', [\n    modelPortfolioSummaryModuleKey,\n    libBbCurrencyKey,\n    bbExtensionHelpersModuleKey,\n    stateContainerModuleKey,\n    routerModuleKey,\n    widgetModuleKey,\n  ])\n\n  .factory(extensionHelpersContextKey, [\n    '$compile',\n    bbCurrencyRuleKey,\n    ($compile, getRule) => ({\n      $compile,\n      getRule,\n    }),\n  ])\n\n  .factory(viewModelKey, [\n    bbStateContainerKey,\n    ViewModel,\n  ])\n  .factory(serviceKey, [\n    modelPortfolioSummaryKey,\n    viewModelKey,\n    Service,\n  ])\n\n  .controller('ValuationController', [\n    modelPortfolioSummaryKey,\n    serviceKey,\n    viewModelKey,\n    routerKey,\n    widgetKey,\n    /* into */\n    Controller,\n  ])\n  .name;\n\n\n/**\n * @description Portfolio type definition\n * @typedef {object} PerformanceValuation\n * @property {ChartData} chartData Valuation data to be displayed by widget\n * @property {boolean} valuePctDataDisplay Flag informing whether variation data can be displayed\n * @property {boolean} valueDataDisplay Flag informing whether valuation data can be displayed\n */\n\n/**\n * @description ChartData object definition\n * @typedef {object} ChartData\n * @property {string} dateFrom Start date of period value belongs to\n * @property {string} dateTo End date of period value belongs to\n * @property {Money} value Money valuation of the portfolio\n * @property {number} valuePct Percent of how initial valuation of portfolio changed\n */\n\n/**\n * @description Money object definition\n * @typedef {object} Money\n * @property {number} amount Amount of money\n * @property {string} currency Currency code\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-wm-valuation-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_175__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-extension-helpers-ng\"\n// module id = 175\n// module chunks = 37","import { VALUATION_ROUTE, VARIATION_ROUTE, Preferences } from './constants';\n\n/**\n * @name ValuationController\n * @ngkey ValuationController\n * @type {object}\n * @description\n * Valuation controller.\n */\nexport default function ValuationController(\n  model,\n  service,\n  viewModel,\n  router,\n  widget\n) {\n  /**\n   * @description\n   * Switches asValuation flag\n   *\n   * @public\n   * @name ValuationController#switchDisplayMode\n   * @type {function}\n   */\n  const switchDisplayMode = () => (\n    router.getRoute() !== VARIATION_ROUTE\n      ? router.goto(VARIATION_ROUTE)\n      : router.goto(VALUATION_ROUTE)\n  );\n\n  /**\n   * @description\n   * Handles loading valuation data\n   *\n   * @public\n   * @name ValuationController#loadValuationData\n   * @type {function}\n   * @returns {promise.<array>}\n   */\n  const loadValuationData = () => service.loadValuationData();\n\n  /**\n   * @description\n   * Sets selected granularity\n   *\n   * @public\n   * @name ValuationController#setGranularity\n   * @type {function}\n   * @param {string} granularity Granularity of valuation data to load\n   */\n  const setGranularity = viewModel.setGranularity;\n\n  /**\n   * @description\n   * Sets selected period\n   *\n   * @public\n   * @name ValuationController#setPeriod\n   * @type {function}\n   * @param {object} period Period to load data for\n   */\n  const setPeriod = (period) => {\n    const periodParams = {\n      dateFrom: new Date(new Date(period.dateFrom).setHours(0, 0, 0, 0)),\n      dateTo: new Date(new Date(period.dateTo).setHours(23, 59, 59, 999)),\n    };\n    viewModel.setPeriod(periodParams);\n  };\n\n  /**\n   * @name $onInit\n   * @type {function}\n   * @description Init logic of widget. Invokes initialization of view model\n   */\n  const $onInit = () => {\n    viewModel.init();\n\n    router.goto(\n      widget.getBooleanPreference(Preferences.DISPLAY_VARIATION_CHART)\n        ? VARIATION_ROUTE\n        : VALUATION_ROUTE\n    );\n  };\n\n  return {\n    $onInit,\n    setGranularity,\n    setPeriod,\n    get state() {\n      return viewModel.getState();\n    },\n    get errors() {\n      return viewModel.getState().errors;\n    },\n    switchDisplayMode,\n    loadValuationData,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-wm-valuation-ng/scripts/controller.js","import { wrapActions } from 'lib-wm-portfolio-view-model-helper';\nimport { VARIATION_ROUTE } from './controller';\n\n/**\n * @name errors\n * @type {errors} errors - errors model\n */\nconst errors = {\n  valuationError: null,\n  clearError: (key) => {\n    errors[key] = null;\n  },\n};\n\n/**\n * @name initialState\n * @description Initial state of the widget\n * @type {object}\n * @property {object} valuation An object of valuation related data\n * @property {boolean} initialLoading Boolean flag of initial loading\n * @property {errors} errors Errors model\n */\nconst initialState = {\n  valuation: {\n    data: null,\n    loading: false,\n    isValuation: false,\n    granularity: null,\n    period: {\n      dateFrom: null,\n      dateTo: null,\n    },\n  },\n  errors,\n  route: {\n    name: VARIATION_ROUTE,\n  },\n  initialLoading: true,\n};\n\nexport default (stateContainer) => ({\n  getState: stateContainer.getState,\n  ...wrapActions(stateContainer, {\n    init: (state = initialState) => state,\n    beforeLoadValuationData: () => ({\n      valuation: {\n        loading: true,\n      },\n    }),\n\n    afterLoadValuationDataSuccess: (state, raw) => ({\n      valuation: {\n        data: raw.data,\n        loading: false,\n      },\n      initialLoading: false,\n      errors: {\n        valuationError: null,\n      },\n    }),\n\n    afterLoadValuationDataError: (state, error) => ({\n      errors: {\n        valuationError: error.code,\n      },\n      valuation: {\n        loading: false,\n      },\n      initialLoading: false,\n    }),\n\n    setGranularity: (state, granularity) => ({\n      valuation: {\n        granularity,\n      },\n    }),\n\n    setPeriod: (state, { dateFrom, dateTo }) => ({\n      valuation: {\n        period: {\n          dateFrom,\n          dateTo,\n        },\n      },\n    }),\n  }),\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./widget-wm-valuation-ng/scripts/view-model.js","export default (model, viewModel) => ({\n  /**\n   * @description\n   * Handles loading of valuation data\n   *\n   * @public\n   * @name loadValuationData\n   * @type {function}\n   * @returns {promise.<array>}\n   */\n  loadValuationData: () => {\n    viewModel.beforeLoadValuationData();\n\n    const {\n      granularity,\n      period,\n    } = viewModel.getState().valuation;\n    return model.getSelectedPortfolioId()\n      .then((portfolioId) => model.loadPerformanceValuation(\n        portfolioId,\n        granularity,\n        period.dateFrom,\n        period.dateTo\n      ))\n      .then(viewModel.afterLoadValuationDataSuccess)\n      .catch(viewModel.afterLoadValuationDataError);\n  },\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./widget-wm-valuation-ng/scripts/service.js"],"sourceRoot":""}