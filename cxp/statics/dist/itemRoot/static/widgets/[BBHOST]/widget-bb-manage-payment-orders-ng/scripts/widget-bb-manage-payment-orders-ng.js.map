{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*****************************","webpack:///webpack/bootstrap 70052c6c6190d07a36f3?d006*****************************","webpack:///./widget-bb-manage-payment-orders-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114********************","webpack:///external \"lib-bb-widget-ng\"?84ad**","webpack:///external \"lib-bb-model-errors\"?7567***","webpack:///external \"lib-bb-event-bus-ng\"?8215*","webpack:///external \"lib-bb-widget-extension-ng\"?b547**","webpack:///external \"model-bb-payment-orders-ng\"?e196**","webpack:///external \"lib-bb-state-container-ng\"?8d56","webpack:///./widget-bb-manage-payment-orders-ng/scripts/index.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/constants.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/controller.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/default-hooks.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/service.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/index.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/initial-state.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/init.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/list.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/helpers.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/rate.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/product.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/products.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/visibility.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/notifications.js","webpack:///./widget-bb-manage-payment-orders-ng/scripts/view-model/delete.js"],"names":["defaultHooks","hooksKey","serviceKey","viewModelKey","angular","module","modelPaymentOrdersModuleKey","widgetModuleKey","stateContainerModuleKey","eventBusModuleKey","factory","modelPaymentOrdersKey","service","bbStateContainerKey","widgetKey","createViewModel","controller","eventBusKey","Controller","run","viewModel","widget","eventBus","init","publish","Event","BB_ITEM_LOADED","id","getId","name","PRODUCT_SELECTED","PAYMENT_EDIT","SEPA_CREDIT_TRANSFER","INTERNAL","PAYMENT_EDIT_DONE","PAYMENT_EDIT_CANCELLED","NOTIFICATION_EVENT","PAYMENT_CANCEL_SUCCESS","PAYMENT_CANCEL_ERROR","ManagePaymentOrderController","hooks","$ctrl","getLoadParams","combiningParams","state","getState","product","selectedProduct","processRequestParams","paymentOrders","requestParams","query","identifier","load","params","options","loadMore","doneFn","from","catch","then","onProductChange","afterLoadSuccess","replace","edit","payment","visibility","change","paymentType","cancel","raw","err","deleteNotification","notification","notifications","bindEvents","subscribe","updateNotifications","$onInit","loadProducts","setupSelectedProduct","loadRate","rate","initList","afterLoadDone","Object","assign","processPaymentOrders","model","list","beforeLoad","getPaymentOrders","rawData","data","totalCount","afterLoadError","error","getRate","products","getAccountsFrom","getProductSelectedId","productId","delete","beforeDelete","cancelPayment","afterDeleteSuccess","afterDeleteError","DEFAULT_PAGE_SIZE","stateContainer","stateParams","pageSize","getLongPreference","dismissMessageTime","initialState","createAction","initialLoading","isHidden","value","loading","currencyFrom","currencyTo","loadedAll","size","paymentOrder","deleteConfirmOpened","deleting","response","length","errorMessages","E_AUTH","E_CONNECTIVITY","E_USER","E_UNEXPECTED","uiError","message","code","find","filter","item"],"mappings":"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","file":"widget-bb-manage-payment-orders-ng/scripts/widget-bb-manage-payment-orders-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-payment-orders-ng\"), require(\"lib-bb-state-container-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-manage-payment-orders-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-event-bus-ng\", \"lib-bb-widget-extension-ng\", \"model-bb-payment-orders-ng\", \"lib-bb-state-container-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-manage-payment-orders-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-payment-orders-ng\"), require(\"lib-bb-state-container-ng\"));\n\telse\n\t\troot[\"widget-bb-manage-payment-orders-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-widget-extension-ng\"], root[\"model-bb-payment-orders-ng\"], root[\"lib-bb-state-container-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_142__, __WEBPACK_EXTERNAL_MODULE_148__, __WEBPACK_EXTERNAL_MODULE_193__, __WEBPACK_EXTERNAL_MODULE_194__, __WEBPACK_EXTERNAL_MODULE_196__, __WEBPACK_EXTERNAL_MODULE_203__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70052c6c6190d07a36f3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-manage-payment-orders-ng/model.xml\n// module id = 0\n// module chunks = 30","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 18\n// module chunks = 0 8 9 10 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_142__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 142\n// module chunks = 16 27 28 30 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_148__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 148\n// module chunks = 16 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_193__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 193\n// module chunks = 27 28 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_194__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 194\n// module chunks = 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_196__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-payment-orders-ng\"\n// module id = 196\n// module chunks = 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_203__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-state-container-ng\"\n// module id = 203\n// module chunks = 28 30 32","/**\n * @module widget-bb-manage-payment-orders-ng\n *\n * @description\n * Widget to manage payment orders\n */\nimport angular from 'vendor-bb-angular';\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport stateContainerModuleKey, { bbStateContainerKey } from 'lib-bb-state-container-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport eventBusModuleKey, { eventBusKey } from 'lib-bb-event-bus-ng';\n\nimport modelPaymentOrdersModuleKey, { modelPaymentOrdersKey } from 'model-bb-payment-orders-ng';\n\nimport { Event } from './constants';\nimport Controller from './controller';\nimport * as defaultHooks from './default-hooks';\n\nimport service from './service';\nimport createViewModel from './view-model/index';\n\nconst hooksKey = 'widget-bb-manage-payment-orders-ng:hooks';\nconst serviceKey = 'widget-bb-manage-payment-orders-ng:service';\nconst viewModelKey = 'widget-bb-manage-payment-orders-ng:viewModel';\n\nexport default angular\n  .module('widget-bb-manage-payment-orders-ng', [\n    modelPaymentOrdersModuleKey,\n    widgetModuleKey,\n    stateContainerModuleKey,\n    eventBusModuleKey,\n  ])\n  .factory(hooksKey, extendHooks(defaultHooks))\n  .factory(serviceKey, [\n    modelPaymentOrdersKey,\n    viewModelKey,\n    hooksKey,\n    /* into */\n    service,\n  ])\n  .factory(viewModelKey, [\n    bbStateContainerKey,\n    widgetKey,\n    hooksKey,\n    /* into */\n    createViewModel,\n  ])\n  .controller('ManagePaymentOrderController', [\n    widgetKey,\n    hooksKey,\n    viewModelKey,\n    serviceKey,\n    eventBusKey,\n    /* into */\n    Controller,\n  ])\n\n  .run([viewModelKey, widgetKey, eventBusKey, (viewModel, widget, eventBus) => {\n    viewModel.init();\n    eventBus.publish(Event.BB_ITEM_LOADED, { id: widget.getId() });\n  }])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/index.js","/* eslint-disable import/prefer-default-export */\n/**\n * Widget events enum\n * @type {object}\n */\nexport const Event = {\n  PRODUCT_SELECTED: 'bb.event.product.selected',\n  BB_ITEM_LOADED: 'bb.item.loaded',\n  PAYMENT_EDIT: {\n    SEPA_CREDIT_TRANSFER: 'bb.event.payment.edit.sepa.credit.transfer',\n    INTERNAL: 'bb.event.payment.edit.internal',\n  },\n  PAYMENT_EDIT_DONE: 'bb.event.payment.edit.done',\n  PAYMENT_EDIT_CANCELLED: 'bb.event.payment.edit.cancelled',\n  NOTIFICATION_EVENT: 'bb.event.notifications.notify',\n  PAYMENT_CANCEL_SUCCESS: 'bb.event.payment.cancel.success',\n  PAYMENT_CANCEL_ERROR: 'bb.event.payment.cancel.error',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/constants.js","import { Event } from './constants';\n/**\n * @name ManagePaymentOrderController\n * @type {object}\n * @description\n * Controller for managing payment order\n *\n * @usage\n * <div ng-controller=\"ManagePaymentOrderController as $ctrl\">\n *   <!-- ... -->\n * </div>\n */\nexport default function ManagePaymentOrderController(\n  widget,\n  hooks,\n  viewModel,\n  service,\n  eventBus\n) {\n  const $ctrl = this;\n\n  const getLoadParams = (combiningParams = {}) => {\n    const state = viewModel.getState();\n    const product = state.selectedProduct;\n\n    return hooks.processRequestParams({\n      ...state.paymentOrders.requestParams,\n      query: product ? product.identifier : null,\n      ...combiningParams,\n    });\n  };\n\n  /**\n   * @description\n   * Handles loading payment orders\n   *\n   * @name ManagePaymentOrderController#load\n   * @type {function}\n   * @param {object} params request params\n   * @param {object} options options for loading data\n   * @returns {promise.<array>}\n   */\n  const load = (params = {}, options = {}) => service.load(getLoadParams(params), options);\n\n  /**\n   * @description\n   * Handles loading more payment orders\n   *\n   * @name ManagePaymentOrderController#load\n   * @type {function}\n   * @param {function} doneFn - load more callback\n   */\n  const loadMore = (doneFn = () => {}) => {\n    load({ from: viewModel.getState().paymentOrders.requestParams.from + 1 })\n      .catch(doneFn())\n      .then(doneFn());\n  };\n\n  /**\n   * @description\n   * Handles product change: setup selected product in the viewModel and\n   * load payment by selected product.\n   *\n   * @name ManagePaymentOrderController#onProductChange\n   * @type {function}\n   * @param {Object} product selected product\n   */\n  const onProductChange = (product) => {\n    viewModel.product.afterLoadSuccess(product ? product.id : null);\n    load({ from: 0 }, { replace: true });\n  };\n\n  /**\n   * @description\n   * Handles edit of payment\n   *\n   * @name ManagePaymentOrderController#edit\n   * @type {function}\n   * @param {Object} payment payment to edit\n   */\n  const edit = (payment) => {\n    viewModel.visibility.change(true);\n    eventBus.publish(Event.PAYMENT_EDIT[payment.paymentType], payment);\n  };\n\n  /**\n   * @description\n   * Handles cancel of payment\n   *\n   * @name ManagePaymentOrderController#cancel\n   * @type {function}\n   * @param {Object} payment payment to cancel\n   */\n  const cancel = (payment) => {\n    service.cancel(payment)\n      .then((raw) => {\n        eventBus.publish(Event.PAYMENT_CANCEL_SUCCESS, raw);\n        load({ from: 0 }, { replace: true });\n      })\n      .catch((err) => eventBus.publish(Event.PAYMENT_CANCEL_ERROR, err));\n  };\n\n  /**\n   * @description\n   * Delete current notification from viewState\n   *\n   * @name ManagePaymentOrderController#deleteNotification\n   * @type {function}\n   * @param {Object} notification current notification\n   */\n  const deleteNotification = (notification) => {\n    viewModel.notifications.deleteNotification(notification);\n  };\n\n  /**\n   * @description\n   * Adds subscriptions to bus events\n   *\n   * @inner\n   * @name bindEvents\n   * @type {function}\n   */\n  function bindEvents() {\n    eventBus.subscribe(Event.PRODUCT_SELECTED, ({ product }) => {\n      load({ query: product ? product.identifier : null }, { replace: true });\n    });\n    eventBus.subscribe(Event.PAYMENT_EDIT_DONE, () => {\n      load({ from: 0 }, { replace: true });\n      viewModel.visibility.change(false);\n    });\n    eventBus.subscribe(Event.NOTIFICATION_EVENT, (notification) => {\n      viewModel.notifications.updateNotifications(notification);\n    });\n    eventBus.subscribe(Event.PAYMENT_EDIT_CANCELLED, () => {\n      viewModel.visibility.change(false);\n    });\n  }\n\n  /**\n   * AngularJS Lifecycle hook used to initialize the controller\n   *\n   * @name ManagePaymentOrderController#$onInit\n   * @type {function}\n   * @returns {Promise.<Payments, module:lib-bb-model-errors.ModelError>}\n   *  A promise\n   */\n  const $onInit = () => service.loadProducts()\n    .then(service.setupSelectedProduct)\n    .then(load)\n    .then(() => service.loadRate(viewModel.getState().rate.requestParams))\n    .then(bindEvents)\n    .then(viewModel.initList.afterLoadDone)\n    .catch(viewModel.initList.afterLoadDone);\n\n  Object.assign($ctrl, {\n    get state() {\n      return viewModel.getState();\n    },\n    loadMore,\n    onProductChange,\n    edit,\n    cancel,\n    deleteNotification,\n    $onInit,\n  });\n}\n\n/**\n * Payments type definition\n * @typedef {module:model-bb-payment-orders-ng.Payments} Payments\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/controller.js","/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bb-manage-payment-orders-ng\n */\n\n/**\n * @name Hooks#processPaymentOrders\n * @type {function}\n *\n * @description\n * Hook for processing payment orders.\n *\n * @param {array} paymentOrders Paument orders to process\n * @returns {array} Processed payments orders\n */\nexport const processPaymentOrders = paymentOrders => paymentOrders;\n\n/**\n * @name Hooks#processRequestParams\n * @type {function}\n *\n * @description\n * Hook for processing payment orders.\n *\n * @param {array} requestParams Request params\n * @returns {array} Processed request params\n */\nexport const processRequestParams = requestParams => requestParams;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/default-hooks.js","/**\n * @name ManagePaymentOrderService\n * @type {object}\n * @ngkey widget-bb-manage-payment-orderrs-ng:service\n * @description\n * The service encapsulates the core functionality of the Payment Orders Widget.\n * It co-ordinates the communication of data from the `Model` with the communication with the user\n * by updating the {@link ViewState}.\n *\n * Asynchronous methods update the {@link ViewState} in 3 potential\n * stages; \"before\", \"success\", and \"error\", to allow the view to\n * provide feedback to the user.\n */\nexport default (model, viewModel) => ({\n  /**\n   * @name ManagePaymentOrderService#load\n   * @type {function}\n   * @description\n   * Fetch payment orders from the model and update the {@link ViewState} to display them.\n   * @param {Object} params Request params\n   * @return {Promise}\n   */\n  load: (params, options) => {\n    viewModel.list.beforeLoad();\n\n    return model.getPaymentOrders(params)\n      .then(raw => {\n        viewModel.list.afterLoadSuccess({\n          rawData: raw.data,\n          totalCount: raw.totalCount,\n          requestParams: params,\n          replace: !!options.replace,\n        });\n      })\n      .catch(error => {\n        viewModel.list.afterLoadError(error);\n\n        throw error;\n      });\n  },\n\n  /**\n   * @name ManagePaymentOrderService#loadRate\n   * @type {function}\n   * @description\n   * Fetch a exchange rate from the model and update the {@link ViewState} to display them.\n   * @param {Object} params Request params\n   * @return {Promise}\n   */\n  loadRate: (params) => {\n    viewModel.rate.beforeLoad();\n\n    return model.getRate(params)\n      .then(rate => {\n        viewModel.rate.afterLoadSuccess(rate);\n      })\n      .catch(error => {\n        viewModel.rate.afterLoadError(error);\n      });\n  },\n\n  /**\n   * @name ManagePaymentOrderService#loadProducts\n   * @type {function}\n   * @description\n   * Fetch products from the model and update the {@link ViewState} to display them.\n   * @return {Promise}\n   */\n  loadProducts: () => {\n    viewModel.products.beforeLoad();\n\n    return model.getAccountsFrom()\n      .then(products => {\n        viewModel.products.afterLoadSuccess(products);\n      })\n      .catch(error => {\n        viewModel.products.afterLoadError(error);\n      });\n  },\n\n  /**\n   * @name ManagePaymentOrderService#setupSelectedProduct\n   * @type {function}\n   * @description\n   * Fetch selected product id and update `ViewState`.\n   * @return {Promise}\n   */\n  setupSelectedProduct: () =>\n    model.getProductSelectedId()\n      .then((productId) => {\n        viewModel.product.afterLoadSuccess(productId);\n      }),\n\n  /**\n   * @name ManagePaymentOrderService#cancel\n   * @type {function}\n   * @description\n   * Cancels given payment and update the {@link ViewState} according to response.\n   * @param {Object} payment Payment to cancel\n   * @return {Promise}\n   */\n  cancel: (payment) => {\n    viewModel.delete.beforeDelete();\n\n    return model.cancelPayment(payment.id)\n      .then(() => {\n        viewModel.delete.afterDeleteSuccess();\n      })\n      .catch(error => {\n        viewModel.delete.afterDeleteError(error);\n      });\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/service.js","// Combine state reducers\nimport createInitialState from './initial-state';\nimport createInitReducers from './init';\nimport createListReducers from './list';\nimport createRateReducers from './rate';\nimport createProductReducers from './product';\nimport createProductsReducers from './products';\nimport createVisibilityReducers from './visibility';\nimport createNotificationsReducers from './notifications';\nimport createDeleteReducers from './delete';\n\n/**\n * Defines the default page size for the transactions page\n * @type {number}\n * @inner\n */\nconst DEFAULT_PAGE_SIZE = 50;\n\nexport default (stateContainer, widget, hooks) => {\n  const stateParams = {\n    pageSize: widget.getLongPreference('bb.paymentOrders.pageSize') || DEFAULT_PAGE_SIZE,\n    dismissMessageTime: widget.getLongPreference('bb.paymentOrders.dismissMessageTime'),\n  };\n  const initialState = createInitialState(stateParams);\n\n  /**\n   * @name ViewModel\n   * @type {object}\n   * @ngkey widget-bb-manage-payment-orders-ng:viewModel\n   * @inner\n   */\n  return {\n    /**\n     * @name ViewModel#init\n     * @description Initialises view model with initial state\n     * @type {function}\n     * @inner\n     * @return {ViewState}\n     */\n    init: stateContainer.createAction((state = initialState) => state),\n    /**\n     * @name ViewModel#getState\n     * @description Returns view state\n     * @type {function}\n     * @inner\n     * @return {ViewState}\n     */\n    getState: stateContainer.getState,\n    /**\n     * @name ViewModel#initList\n     * @description\n     * Actions for updating the parts of the `ViewState` related to initial loading\n     * @type {ViewModelInitActions}\n     * @inner\n     */\n    initList: createInitReducers(stateContainer),\n    /**\n     * @name ViewModel#list\n     * @description\n     * Actions for updating the parts of the `ViewState` related to payment orders list\n     * @type {ViewModelListActions}\n     * @inner\n     */\n    list: createListReducers(stateContainer, hooks),\n    /**\n     * @name ViewModel#list\n     * @description\n     * Actions for updating the parts of the `ViewState` related to exchange rate\n     * @type {ViewModelRateActions}\n     * @inner\n     */\n    rate: createRateReducers(stateContainer),\n    /**\n     * @name ViewModel#product\n     * @description\n     * Actions for updating the parts of the `ViewState` related to product\n     * @type {ViewModelProductActions}\n     * @inner\n     */\n    product: createProductReducers(stateContainer),\n    /**\n     * @name ViewModel#products\n     * @description\n     * Actions for updating the parts of the `ViewState` related to products\n     * @type {ViewModelProductsActions}\n     * @inner\n     */\n    products: createProductsReducers(stateContainer),\n    /**\n     * @name ViewModel#visibility\n     * @description\n     * Actions for updating the parts of the `ViewState` related to products\n     * @type {ViewModelProductsActions}\n     * @inner\n     */\n    visibility: createVisibilityReducers(stateContainer),\n    /**\n     * @name ViewModel#notifications\n     * @description\n     * Actions for updating the parts of the `ViewState` related to notifications\n     * @type {ViewModelNotificationsActions}\n     * @inner\n     */\n    notifications: createNotificationsReducers(stateContainer),\n    /**\n     * @name ViewModel#delete\n     * @description\n     * Actions for updating the parts of the `ViewState` related to deleting payment\n     * @type {ViewModelNotificationsActions}\n     * @inner\n     */\n    delete: createDeleteReducers(stateContainer),\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/index.js","export default params => ({\n  initialLoading: true,\n  error: null,\n  isHidden: false,\n  rate: {\n    value: null,\n    loading: false,\n    requestParams: {\n      currencyFrom: 'EUR',\n      currencyTo: 'USD',\n    },\n  },\n  paymentOrders: {\n    rawData: null,\n    data: null,\n    loading: false,\n    loadedAll: false,\n    totalCount: 0,\n    requestParams: {\n      from: 0,\n      size: params.pageSize,\n    },\n  },\n  paymentOrder: {\n    deleteConfirmOpened: false,\n    data: null,\n    deleting: false,\n  },\n  products: {\n    data: null,\n    loading: false,\n  },\n  selectedProduct: null,\n  notifications: {\n    data: [],\n    dismissMessageTime: params.dismissMessageTime,\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/initial-state.js","export default stateContainer => ({\n  /**\n   * @name ViewModelInitActions\n   * @type {object}\n   * @inner\n   */\n\n  /**\n   * @name ViewModelInitActions#afterLoadDone\n   * @description Update the `ViewState` after initial loading is done,\n   * successfully or unsuccessfully\n   * @type {function}\n   * @inner\n   */\n  afterLoadDone: stateContainer.createAction(state => ({\n    ...state,\n    initialLoading: false,\n  })),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/init.js","import { uiError } from './helpers';\n\n/**\n * @name ViewModelListActions\n * @type {object}\n * @inner\n */\nexport default (stateContainer, hooks) => ({\n  /**\n   * @name ViewModelListActions#beforeLoad\n   * @description Update the `ViewState` before loading payments orders\n   * @type {function}\n   * @inner\n   */\n  beforeLoad: stateContainer.createAction(state => ({\n    ...state,\n    error: null,\n    paymentOrders: {\n      ...state.paymentOrders,\n      loading: true,\n    },\n  })),\n\n  /**\n   * @name ViewModelListActions#afterLoadSuccess\n   * @description Update the `ViewState` after successfully loading payments orders\n   * @type {function}\n   * @inner\n   * @param {PaymentOrdersResponse} response Payment orders load response\n   */\n  afterLoadSuccess: stateContainer.createAction((state, response) => {\n    const rawData = [\n      ...(!response.replace && state.paymentOrders.rawData) || [],\n      ...response.rawData,\n    ];\n\n    return {\n      ...state,\n      paymentOrders: {\n        ...state.paymentOrders,\n        rawData,\n        data: hooks.processPaymentOrders(rawData),\n        loading: false,\n        loadedAll: rawData.length === response.totalCount,\n        totalCount: response.totalCount,\n        requestParams: response.requestParams,\n      },\n    };\n  }),\n\n  /**\n   * @name ViewModelListActions#afterLoadError\n   * @description Update the `ViewState` after unsuccessful payment orders load\n   * @type {function}\n   * @inner\n   * @param {module:lib-bb-model-errors.ModelError} error Response error\n   */\n  afterLoadError: stateContainer.createAction((state, error) => ({\n    ...state,\n    error: uiError(error),\n    paymentOrders: {\n      ...state.paymentOrders,\n      loading: false,\n    },\n  })),\n});\n\n/**\n * @typedef {object} PaymentOrdersResponse\n * @property {object[]} rawData Loaded transactions array\n * @property {number} totalCount Total number of transactions\n * @property {LoadRequestParams} requestParams Request parameters object\n */\n\n/**\n * @typedef {object} LoadRequestParams\n * @property {number} from Page number to load\n * @property {number} size Page size to load\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/list.js","/* eslint-disable import/prefer-default-export */\nimport { E_AUTH, E_CONNECTIVITY, E_USER, E_UNEXPECTED } from 'lib-bb-model-errors';\n\nconst errorMessages = {\n  [E_AUTH]: 'model.error.auth',\n  [E_CONNECTIVITY]: 'model.error.connectivity',\n  [E_USER]: 'model.error.user',\n  [E_UNEXPECTED]: 'model.error.unexpected',\n};\n\nexport const uiError = error => ({\n  message: errorMessages[error.code],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/helpers.js","import { uiError } from './helpers';\n\n/**\n * @name ViewModelRateActions\n * @type {object}\n * @inner\n */\nexport default (stateContainer) => ({\n  /**\n   * @name ViewModelRateActions#beforeLoad\n   * @description Update the `ViewState` before loading exchange rate\n   * @type {function}\n   * @inner\n   */\n  beforeLoad: stateContainer.createAction(state => ({\n    ...state,\n    error: null,\n    rate: {\n      ...state.rate,\n      loading: true,\n    },\n  })),\n\n  /**\n   * @name ViewModelRateActions#afterLoadSuccess\n   * @description Update the `ViewState` after successfully loading exchange rate\n   * @type {function}\n   * @inner\n   * @param {object} response Exchange rate load response\n   */\n  afterLoadSuccess: stateContainer.createAction((state, response) => ({\n    ...state,\n    rate: {\n      ...state.rate,\n      value: response,\n      loading: false,\n    },\n  })),\n\n  /**\n   * @name ViewModelRateActions#afterLoadError\n   * @description Update the `ViewState` after unsuccessful exchange rate load\n   * @type {function}\n   * @inner\n   * @param {module:lib-bb-model-errors.ModelError} error Response error\n   */\n  afterLoadError: stateContainer.createAction((state, error) => ({\n    ...state,\n    error: uiError(error),\n    rate: {\n      ...state.rate,\n      loading: false,\n    },\n  })),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/rate.js","/**\n * @name ViewModelProductActions\n * @type {object}\n * @inner\n */\nexport default (stateContainer) => ({\n  /**\n   * @name ViewModelProductActions#afterLoadSuccess\n   * @description Update the `ViewState` after successfully loading selected product\n   * @type {function}\n   * @inner\n   * @param {String} productId selected product id\n   */\n  afterLoadSuccess: stateContainer.createAction((state, productId) => {\n    const products = state.products.data;\n\n    return {\n      ...state,\n      selectedProduct: products.find((product) => product.id === productId) || products[0],\n    };\n  }),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/product.js","import { uiError } from './helpers';\n\n/**\n * @name ViewModelProductsActions\n * @type {object}\n * @inner\n */\nexport default (stateContainer) => ({\n  /**\n   * @name ViewModelProductsActions#beforeLoad\n   * @description Update the `ViewState` before loading products\n   * @type {function}\n   * @inner\n   */\n  beforeLoad: stateContainer.createAction(state => ({\n    ...state,\n    error: null,\n    products: {\n      ...state.products,\n      loading: true,\n    },\n  })),\n\n  /**\n   * @name ViewModelProductsActions#afterLoadSuccess\n   * @description Update the `ViewState` after successfully loading products\n   * @type {function}\n   * @inner\n   * @param {Array} data Products array\n   */\n  afterLoadSuccess: stateContainer.createAction((state, data) => ({\n    ...state,\n    products: {\n      ...state.products,\n      loading: false,\n      data,\n    },\n  })),\n\n  /**\n   * @name ViewModelProductsActions#afterLoadError\n   * @description Update the `ViewState` after unsuccessful products load\n   * @type {function}\n   * @inner\n   * @param {module:lib-bb-model-errors.ModelError} error Response error\n   */\n  afterLoadError: stateContainer.createAction((state, error) => ({\n    ...state,\n    error: uiError(error),\n    products: {\n      ...state.products,\n      loading: false,\n    },\n  })),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/products.js","/**\n * @name ViewModelVisibilityActions\n * @type {object}\n * @inner\n */\nexport default (stateContainer) => ({\n  /**\n   * @name ViewModelRateActions#afterLoadSuccess\n   * @type {function}\n   * @inner\n   * @param {boolean} isHidden Hidden value\n   */\n  change: stateContainer.createAction((state, isHidden) => ({\n    ...state,\n    isHidden,\n  })),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/visibility.js","/**\n * @name ViewModelNotificationsActions\n * @type {object}\n * @inner\n */\nexport default (stateContainer) => ({\n  /**\n   * @name ViewModelNotificationsActions#updateNotifications\n   * @description Update the `ViewState` after successfully editing payment\n   * @type {function}\n   * @inner\n   * @param {Array} notifications array with pushed notifications\n   */\n  updateNotifications: stateContainer.createAction((state, notification) => {\n    const notifications = state.notifications.data;\n\n    return {\n      ...state,\n      notifications: {\n        ...state.notifications,\n        data: [...notifications, notification],\n      },\n    };\n  }),\n  /**\n   * @name ViewModelNotificationsActions#deleteNotification\n   * @description Update the `ViewState` after successfully editing payment\n   * @type {function}\n   * @inner\n   * @param {Array} notifications array with pushed notifications\n   */\n  deleteNotification: stateContainer.createAction((state, notification) => {\n    const notifications = state.notifications.data;\n\n    return {\n      ...state,\n      notifications: {\n        ...state.notifications,\n        data: notifications.filter(item => item !== notification),\n      },\n    };\n  }),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/notifications.js","import { uiError } from './helpers';\n\n/**\n * @name ViewModelDeleteActions\n * @type {object}\n * @inner\n */\nexport default (stateContainer) => ({\n  /**\n   * @name ViewModelDeleteActions#beforeDelete\n   * @description Update the `ViewState` before deleting payment\n   * @type {function}\n   * @inner\n   */\n  beforeDelete: stateContainer.createAction(state => ({\n    ...state,\n    paymentOrder: {\n      ...state.paymentOrder,\n      deleting: true,\n    },\n  })),\n\n  /**\n   * @name ViewModelDeleteActions#afterDeleteSuccess\n   * @description Update the `ViewState` after successfully deleting payment\n   * @type {function}\n   * @inner\n   */\n  afterDeleteSuccess: stateContainer.createAction(state => ({\n    ...state,\n    paymentOrder: {\n      ...state.paymentOrder,\n      deleting: false,\n    },\n  })),\n\n  /**\n   * @name ViewModelDeleteActions#afterDeleteError\n   * @description Update the `ViewState` after unsuccessful deleting payment\n   * @type {function}\n   * @inner\n   * @param {module:lib-bb-model-errors.ModelError} error Response error\n   */\n  afterDeleteError: stateContainer.createAction((state, error) => ({\n    ...state,\n    error: uiError(error),\n    paymentOrder: {\n      ...state.paymentOrder,\n      deleting: false,\n    },\n  })),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-manage-payment-orders-ng/scripts/view-model/delete.js"],"sourceRoot":""}