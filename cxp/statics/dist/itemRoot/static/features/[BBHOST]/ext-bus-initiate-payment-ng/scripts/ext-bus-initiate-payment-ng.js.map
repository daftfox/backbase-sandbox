{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6********","webpack:///webpack/bootstrap 70052c6c6190d07a36f3?d006********","webpack:///./ext-bus-initiate-payment-ng/model.xml","webpack:///external \"vendor-bb-angular-ng-aria\"?9d0e**","webpack:///external \"ui-bb-i18n-ng\"?dc01******","webpack:///external \"ui-bb-loading-overlay-ng\"?3561**","webpack:///external \"ui-bb-account-selector-ng\"?7f70**","webpack:///external \"ui-bb-currency-input-ng\"?3ab2*","webpack:///external \"ui-bb-char-counter-ng\"?e680*","webpack:///external \"ui-bb-calendar-popup-ng\"?7edd*","webpack:///external \"ui-bb-expandable-ng\"?18ac*","webpack:///external \"vendor-bb-angular-ng-messages\"?7dc7**","webpack:///external \"ui-bb-account-card-ng\"?b7d3*","webpack:///external \"vendor-bb-uib-alert\"?7299*","webpack:///external \"ui-bb-confirm-ng\"?ed9c**","webpack:///external \"ui-bb-switcher-ng\"?b444*","webpack:///external \"vendor-bb-angular\"?a114*","webpack:///external \"vendor-bb-uib-popover\"?2eab","webpack:///external \"vendor-bb-angular-sanitize\"?d9b1","webpack:///external \"ui-bb-substitute-error-ng\"?f57a*","webpack:///external \"ui-bb-parent-responsiveness-ng\"?c738","webpack:///external \"ui-bb-credit-suggest-ng\"?17c6","webpack:///external \"ui-bb-number-input-ng\"?969d","webpack:///external \"ui-bb-button-spinner-ng\"?5932","webpack:///external \"ui-bb-empty-state-ng\"?88ee","webpack:///external \"ui-bb-notification-stripe-ng\"?0663","webpack:///./ext-bus-initiate-payment-ng/scripts/index.js","webpack:///external \"ui-bus-format-amount-ng\"","webpack:///external \"ui-bb-submit-dropup-ng\"","webpack:///external \"ui-bus-beneficiary-select-modal-ng\"","webpack:///external \"ui-bb-form-navigate-away-ng\"","webpack:///./ext-bus-initiate-payment-ng/scripts/hooks.js","webpack:///./ext-bus-initiate-payment-ng/scripts/constants.js","webpack:///./ext-bus-initiate-payment-ng/scripts/helpers.js","webpack:///./ext-bus-initiate-payment-ng/scripts/intents.js","webpack:///./ext-bus-initiate-payment-ng/scripts/events.js"],"names":["extHooks","dependencyKeys","ngAriaModuleKey","bbAngularNgMessagesKey","uibPopoverKey","ngSanitizeKey","vendorBbUibAlertKey","uiBbSubstituteErrorKey","i18nKey","uiBbAccountSelectorKey","uiBbCurrencyInputKey","uiBbParentResponsivenessKey","uiBbCreditSuggestKey","uiBbSwitcherKey","uiBbExpandableKey","uiBbCalendarPopupKey","uiBbNumberInputKey","uiBbAccountCardKey","uiBbConfirmKey","uiBbLoadingOverlayKey","uiBbCharCounterKey","uiBusFormatAmountKey","uiBbSubmitDropupKey","uiBbEmptyStateKey","uiBbNotificationStripeKey","uiBusBeneficiarySelectModalNg","uiBbButtonSpinnerNg","uiBbFormNavigateAwayNg","intents","exIntents","hooks","helpers","extHelpers","events","extEvents","processAccountsTo","debitAccount","getCreditAccounts","getExternalAccounts","id","then","externalTransferAllowed","accounts","concat","contacts","catch","getRecurringTransactionDay","schedule","transferFrequency","value","startDate","getMonth","getDate","getDay","processCurrencies","currencies","filter","item","name","DEFAULT_CURRENCY","transferFrequencies","every","specialSymbols","escapedSpecialSymbols","split","map","a","join","paymentReferencePattern","allSubmitButtonTypes","key","afterMethod","selected","permission","IBAN_MAX_LENGTH","INIT_VALIDATION_STATE","valid","messages","BENEFICIARY_SELECTOR_MODAL","crossCurrencyMessages","minOccurrences","maxOccurences","maxDigits","expanded","charCounterConfig","description","maxChars","reference","draftSaving","draftSaveError","draftSaveSuccess","paymentSubmitSuccess","hideAfterPaymentMessage","hideDraftMessage","hideValidationMessage","validation","msg","hideAllMessages","Object","assign","$ctrl","paymentValidation","notifications","showCrossCurrencyMessage","isRateVisible","paymentPreferences","showExchangeRate","rate","payment","from","parseFloat","amount","isDifferentCurrencies","currency","canSelectUrgentPayment","urgent","urgentTransferAllowed","resetPayment","scope","step","makePayment","window","scrollTo","data","Promise","reject","err","onAccountChange","selectedAccount","onAccountFromChange","toggleCreditSuggestGroup","event","model","ctrl","stopPropagation","more","less","open","scrollToFirstError","form","firstError","$$controls","find","control","$invalid","$$element","bodyRect","document","body","getBoundingClientRect","elemRect","offset","top","navBar","querySelector","navBarRect","navBarStyles","getComputedStyle","position","height","behavior","reviewPayment","showSpecialValidationMessages","clearPaymentError","context","i18nFilter","$filter","dateFilter","normalizeAccounts","internalAccountView","account","external","externalAccountView","forEach","contact","contactAccounts","identifier","IBAN","accountNumber","accountName","alias","contactPerson","push","getScheduleText","EndingType","singleTransfer","words","today","Date","setHours","isToday","multipleOccurrences","hasEnd","endingType","NEVER","todayString","toLowerCase","hasLimitedOccurences","isMinOccurences","repeat","AFTER","length","ON","endDate","getFrequencies","recurring","getMinDate","minDate","daysInMonth","month","year","addDays","toDate","days","getTime","addWeeks","weeks","addYears","years","getFullYear","addMonths","months","newMonth","newYear","newDay","initPayment","credit","$setValidity","canSaveDraft","formErrors","ibanMaxlengthError","to","replace","userErrors","keys","reduce","previousValue","currentItem","saveDraft","response","editDraft","viewPaymentOrders","isDraftSaving","isDraftSaveError","isDraftSaveSuccess","formUntouched","paymentStartDate","sameStartDate","getYear","paymentReference","deleteDraft","draftid","isAfterPaymentSuccess","selectPaymentSubmitType","type","paymentId","draftMode","authorizeAndNotify","isDraftChanged","before","after","purifyDraftPaymentData","closeEditDraft","ext","callback","editDraftConfirmOpened","submitButtonTypes","privileges","getMessagePrefix","rejectedValue","error","match","removeNotification","notification","notificationsList","isModal","configValue","createRequest","Event","PAYMENT_CREATE_SUCCESS","PAYMENT_AUTH_SUCCESS","PAYMENT_AUTH_FAIL","i18n","notifySuccess","notifyAlert","status"],"mappings":"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","file":"ext-bus-initiate-payment-ng/scripts/ext-bus-initiate-payment-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-loading-overlay-ng\"), require(\"ui-bb-account-selector-ng\"), require(\"ui-bb-currency-input-ng\"), require(\"ui-bb-char-counter-ng\"), require(\"ui-bb-calendar-popup-ng\"), require(\"ui-bb-expandable-ng\"), require(\"vendor-bb-angular-ng-messages\"), require(\"ui-bb-account-card-ng\"), require(\"vendor-bb-uib-alert\"), require(\"ui-bb-confirm-ng\"), require(\"ui-bb-switcher-ng\"), require(\"vendor-bb-angular\"), require(\"vendor-bb-uib-popover\"), require(\"vendor-bb-angular-sanitize\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-parent-responsiveness-ng\"), require(\"ui-bb-credit-suggest-ng\"), require(\"ui-bb-number-input-ng\"), require(\"ui-bb-button-spinner-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-notification-stripe-ng\"), require(\"ui-bus-format-amount-ng\"), require(\"ui-bb-submit-dropup-ng\"), require(\"ui-bus-beneficiary-select-modal-ng\"), require(\"ui-bb-form-navigate-away-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bus-initiate-payment-ng\", [\"vendor-bb-angular-ng-aria\", \"ui-bb-i18n-ng\", \"ui-bb-loading-overlay-ng\", \"ui-bb-account-selector-ng\", \"ui-bb-currency-input-ng\", \"ui-bb-char-counter-ng\", \"ui-bb-calendar-popup-ng\", \"ui-bb-expandable-ng\", \"vendor-bb-angular-ng-messages\", \"ui-bb-account-card-ng\", \"vendor-bb-uib-alert\", \"ui-bb-confirm-ng\", \"ui-bb-switcher-ng\", \"vendor-bb-angular\", \"vendor-bb-uib-popover\", \"vendor-bb-angular-sanitize\", \"ui-bb-substitute-error-ng\", \"ui-bb-parent-responsiveness-ng\", \"ui-bb-credit-suggest-ng\", \"ui-bb-number-input-ng\", \"ui-bb-button-spinner-ng\", \"ui-bb-empty-state-ng\", \"ui-bb-notification-stripe-ng\", \"ui-bus-format-amount-ng\", \"ui-bb-submit-dropup-ng\", \"ui-bus-beneficiary-select-modal-ng\", \"ui-bb-form-navigate-away-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bus-initiate-payment-ng\"] = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-loading-overlay-ng\"), require(\"ui-bb-account-selector-ng\"), require(\"ui-bb-currency-input-ng\"), require(\"ui-bb-char-counter-ng\"), require(\"ui-bb-calendar-popup-ng\"), require(\"ui-bb-expandable-ng\"), require(\"vendor-bb-angular-ng-messages\"), require(\"ui-bb-account-card-ng\"), require(\"vendor-bb-uib-alert\"), require(\"ui-bb-confirm-ng\"), require(\"ui-bb-switcher-ng\"), require(\"vendor-bb-angular\"), require(\"vendor-bb-uib-popover\"), require(\"vendor-bb-angular-sanitize\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-parent-responsiveness-ng\"), require(\"ui-bb-credit-suggest-ng\"), require(\"ui-bb-number-input-ng\"), require(\"ui-bb-button-spinner-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-notification-stripe-ng\"), require(\"ui-bus-format-amount-ng\"), require(\"ui-bb-submit-dropup-ng\"), require(\"ui-bus-beneficiary-select-modal-ng\"), require(\"ui-bb-form-navigate-away-ng\"));\n\telse\n\t\troot[\"ext-bus-initiate-payment-ng\"] = factory(root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-loading-overlay-ng\"], root[\"ui-bb-account-selector-ng\"], root[\"ui-bb-currency-input-ng\"], root[\"ui-bb-char-counter-ng\"], root[\"ui-bb-calendar-popup-ng\"], root[\"ui-bb-expandable-ng\"], root[\"vendor-bb-angular-ng-messages\"], root[\"ui-bb-account-card-ng\"], root[\"vendor-bb-uib-alert\"], root[\"ui-bb-confirm-ng\"], root[\"ui-bb-switcher-ng\"], root[\"vendor-bb-angular\"], root[\"vendor-bb-uib-popover\"], root[\"vendor-bb-angular-sanitize\"], root[\"ui-bb-substitute-error-ng\"], root[\"ui-bb-parent-responsiveness-ng\"], root[\"ui-bb-credit-suggest-ng\"], root[\"ui-bb-number-input-ng\"], root[\"ui-bb-button-spinner-ng\"], root[\"ui-bb-empty-state-ng\"], root[\"ui-bb-notification-stripe-ng\"], root[\"ui-bus-format-amount-ng\"], root[\"ui-bb-submit-dropup-ng\"], root[\"ui-bus-beneficiary-select-modal-ng\"], root[\"ui-bb-form-navigate-away-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_37__, __WEBPACK_EXTERNAL_MODULE_39__, __WEBPACK_EXTERNAL_MODULE_80__, __WEBPACK_EXTERNAL_MODULE_81__, __WEBPACK_EXTERNAL_MODULE_82__, __WEBPACK_EXTERNAL_MODULE_83__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70052c6c6190d07a36f3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bus-initiate-payment-ng/model.xml\n// module id = 0\n// module chunks = 8","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 2\n// module chunks = 0 1 2 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 8 9 10 11 12 13 14 19 24","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-loading-overlay-ng\"\n// module id = 4\n// module chunks = 0 1 2 8 9 10 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-account-selector-ng\"\n// module id = 5\n// module chunks = 0 1 2 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-currency-input-ng\"\n// module id = 6\n// module chunks = 0 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-char-counter-ng\"\n// module id = 7\n// module chunks = 0 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-calendar-popup-ng\"\n// module id = 8\n// module chunks = 0 1 8 9 10 13 14 22","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-expandable-ng\"\n// module id = 9\n// module chunks = 0 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-messages\"\n// module id = 10\n// module chunks = 0 1 3 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-account-card-ng\"\n// module id = 11\n// module chunks = 0 1 8","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-alert\"\n// module id = 12\n// module chunks = 0 1 8 9 10 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-confirm-ng\"\n// module id = 13\n// module chunks = 0 1 2 8 9 10 11 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-switcher-ng\"\n// module id = 16\n// module chunks = 0 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 18\n// module chunks = 0 8 9 10 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-popover\"\n// module id = 23\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-sanitize\"\n// module id = 24\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-substitute-error-ng\"\n// module id = 25\n// module chunks = 1 2 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_26__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-parent-responsiveness-ng\"\n// module id = 26\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-credit-suggest-ng\"\n// module id = 27\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-number-input-ng\"\n// module id = 28\n// module chunks = 1 8","module.exports = __WEBPACK_EXTERNAL_MODULE_29__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-button-spinner-ng\"\n// module id = 29\n// module chunks = 1 8 9 10 23","module.exports = __WEBPACK_EXTERNAL_MODULE_37__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-empty-state-ng\"\n// module id = 37\n// module chunks = 2 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_39__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-notification-stripe-ng\"\n// module id = 39\n// module chunks = 2 8 9 10 11 13 14","/**\n * @module ext-bus-initiate-payment-ng\n *\n * @description\n * Business extension for widget-bb-initiate-payment-ng\n */\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport bbAngularNgMessagesKey from 'vendor-bb-angular-ng-messages';\nimport uibPopoverKey from 'vendor-bb-uib-popover';\nimport ngSanitizeKey from 'vendor-bb-angular-sanitize';\nimport vendorBbUibAlertKey from 'vendor-bb-uib-alert';\nimport uiBbSubstituteErrorKey from 'ui-bb-substitute-error-ng';\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbAccountSelectorKey from 'ui-bb-account-selector-ng';\nimport uiBbCurrencyInputKey from 'ui-bb-currency-input-ng';\nimport uiBbParentResponsivenessKey from 'ui-bb-parent-responsiveness-ng';\nimport uiBbCreditSuggestKey from 'ui-bb-credit-suggest-ng';\nimport uiBbSwitcherKey from 'ui-bb-switcher-ng';\nimport uiBbExpandableKey from 'ui-bb-expandable-ng';\nimport uiBbCalendarPopupKey from 'ui-bb-calendar-popup-ng';\nimport uiBbNumberInputKey from 'ui-bb-number-input-ng';\nimport uiBbAccountCardKey from 'ui-bb-account-card-ng';\nimport uiBbConfirmKey from 'ui-bb-confirm-ng';\nimport uiBbLoadingOverlayKey from 'ui-bb-loading-overlay-ng';\nimport uiBbCharCounterKey from 'ui-bb-char-counter-ng';\nimport uiBusFormatAmountKey from 'ui-bus-format-amount-ng';\nimport uiBbSubmitDropupKey from 'ui-bb-submit-dropup-ng';\nimport uiBbEmptyStateKey from 'ui-bb-empty-state-ng';\nimport uiBbNotificationStripeKey from 'ui-bb-notification-stripe-ng';\nimport uiBusBeneficiarySelectModalNg from 'ui-bus-beneficiary-select-modal-ng';\nimport uiBbButtonSpinnerNg from 'ui-bb-button-spinner-ng';\nimport uiBbFormNavigateAwayNg from 'ui-bb-form-navigate-away-ng';\n\nimport * as extHooks from './hooks';\nimport extHelpers from './helpers';\nimport exIntents from './intents';\nimport extEvents from './events';\n\nexport const dependencyKeys = [\n  ngAriaModuleKey,\n  bbAngularNgMessagesKey,\n  uibPopoverKey,\n  ngSanitizeKey,\n  vendorBbUibAlertKey,\n  uiBbSubstituteErrorKey,\n  i18nKey,\n  uiBbAccountSelectorKey,\n  uiBbCurrencyInputKey,\n  uiBbParentResponsivenessKey,\n  uiBbCreditSuggestKey,\n  uiBbSwitcherKey,\n  uiBbExpandableKey,\n  uiBbCalendarPopupKey,\n  uiBbNumberInputKey,\n  uiBbAccountCardKey,\n  uiBbConfirmKey,\n  uiBbLoadingOverlayKey,\n  uiBbCharCounterKey,\n  uiBusFormatAmountKey,\n  uiBbSubmitDropupKey,\n  uiBbEmptyStateKey,\n  uiBbNotificationStripeKey,\n  uiBusBeneficiarySelectModalNg,\n  uiBbButtonSpinnerNg,\n  uiBbFormNavigateAwayNg,\n];\n\nexport const intents = exIntents;\n\nexport const hooks = extHooks;\n\nexport const helpers = extHelpers;\n\nexport const events = extEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bus-initiate-payment-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_80__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bus-format-amount-ng\"\n// module id = 80\n// module chunks = 8 9 10 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_81__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-submit-dropup-ng\"\n// module id = 81\n// module chunks = 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_82__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bus-beneficiary-select-modal-ng\"\n// module id = 82\n// module chunks = 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_83__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-form-navigate-away-ng\"\n// module id = 83\n// module chunks = 8 9 10","import { DEFAULT_CURRENCY } from './constants';\n\n/**\n * @name Hooks#processAccountsTo\n * @type {function}\n *\n * @description\n * Hook for processing account list in 'to' field (credit).\n * Assigned to $ctrl.accountsTo.\n *\n * @param {object} debitAccount Selected debit account (can be null).\n * @param {function} getCreditAccounts Function to retrieve all credit accounts\n * @param {function} getExternalContacts Function to retrieve all external contacts\n * formatted like Product kind\n * @returns {Promise.<any[]>} Promise that retrieves array of accounts.\n */\nexport const processAccountsTo = (debitAccount, getCreditAccounts, getExternalAccounts) =>\n  getCreditAccounts(debitAccount.id || null)\n  .then(accounts => {\n    if (!debitAccount.id || debitAccount.externalTransferAllowed) {\n      return getExternalAccounts()\n        .then(contacts => accounts.concat(contacts))\n        // Failing loading contacts should not stop payments\n        .catch(() => accounts);\n    }\n    return accounts;\n  });\n\n/**\n * @name Hooks#getRecurringTransactionDay\n * @type {function}\n *\n * @description\n * Denotes day on which transfer should be executed.\n * For weekly it will be 1..7 indicating weekday.\n * For monthly it will be 1..31 indicating day of month.\n * For yearly it will be 1..12 indicating month of the year\n *\n * @param {object} schedule Recurring payment schedule object\n * @returns {number} Recurring transaction day\n */\nexport const getRecurringTransactionDay = schedule => {\n  switch (schedule.transferFrequency.value) {\n    case 'YEARLY':\n      return schedule.startDate.getMonth() + 1;\n    case 'MONTHLY':\n      return schedule.startDate.getDate();\n    default:\n      return schedule.startDate.getDay() + 1;\n  }\n};\n\n/**\n * @name Hooks#processCurrencies\n * @type {function}\n *\n * @description\n * Processes currencies array returned from the service\n * Returns only 'EUR' | DEFAULT_CURRENCY For SEPA payment\n *\n * @param {object[]} currencies Initial currencies\n * @returns {object[]} Processed currencies\n */\nexport const processCurrencies = (currencies = []) => (\n  currencies.filter(item => item.name === DEFAULT_CURRENCY)\n);\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bus-initiate-payment-ng/scripts/hooks.js","/**\n * @description\n * Array of recurring frequency objects with the following properties (all mandatory)\n *\n * @property {string} object.name Translation key of the label\n * that will be displayed to the end user\n * @property {string} object.value Denotes frequency type of transfer.\n * Possible values: DAILY/WEEKLY/MONTHLY/YEARLY\n * @property {number} object.every Indicates skip interval of transfer.\n * 1 would mean execute every time, 2 - every other time\n *\n * @example\n * {\n *   name: 'form.schedule.frequency.weekly',\n *   value: 'WEEKLY',\n *   every: 1,\n * },\n * {\n *   name: 'form.schedule.frequency.bi.weekly',\n *   value: 'WEEKLY',\n *   every: 2,\n * }\n *\n * @name transferFrequencies\n * @type {array}\n */\nexport const transferFrequencies = [\n  {\n    name: 'form.schedule.frequency.daily',\n    value: 'DAILY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.weekly',\n    value: 'WEEKLY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.monthly',\n    value: 'MONTHLY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.quarterly',\n    value: 'QUARTERLY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.annually',\n    value: 'YEARLY',\n    every: 1,\n  },\n];\n\nconst specialSymbols = \"/-?:().,'+\";\nconst escapedSpecialSymbols = specialSymbols.split('').map((a) => `|\\\\${a}`).join('');\n/**\n * @description\n * Pattern for payment reference validation\n * @name paymentReferencePattern\n * @type {string}\n */\nexport const paymentReferencePattern = `^(\\\\w|\\\\d| ${escapedSpecialSymbols})*$`;\n\n/**\n * @description\n * Submit payment flow types\n * @name submitButtonTypes\n * @type {Array<object>}\n */\nexport const allSubmitButtonTypes = [\n  {\n    id: 1,\n    key: 'label.review.submit',\n    afterMethod: false,\n    selected: true,\n    permission: 'create',\n  },\n  {\n    id: 2,\n    key: 'label.review.submit.and.create',\n    afterMethod: 'create',\n    permission: 'create',\n  },\n  {\n    id: 3,\n    key: 'label.review.submit.and.approve',\n    afterMethod: 'approve',\n    permission: 'approve',\n  },\n];\n\n/**\n * @description\n * Maximum IBAN length\n * @name IBAN_MAX_LENGTH\n * @type {number}\n */\nexport const IBAN_MAX_LENGTH = 36;\n\n/**\n * @name INIT_VALIDATION_STATE\n * @type {{valid: boolean, messages: Array}}\n * @description\n * Initial state before backend validation (payment is valid)\n */\nexport const INIT_VALIDATION_STATE = { valid: true, messages: [] };\n\n/**\n * @name BENEFICIARY_SELECTOR_MODAL\n * @type {String}\n * @description\n * Beneficiary selector modal type\n */\nexport const BENEFICIARY_SELECTOR_MODAL = 'modal';\n\n/**\n * @name DEFAULT_CURRENCY\n * @type {String}\n * @description\n * Default currency code\n */\nexport const DEFAULT_CURRENCY = 'EUR';\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bus-initiate-payment-ng/scripts/constants.js","/* globals window, document */\nimport { equals } from 'vendor-bb-angular';\n\nimport {\n  transferFrequencies,\n  paymentReferencePattern,\n  allSubmitButtonTypes,\n  IBAN_MAX_LENGTH,\n  INIT_VALIDATION_STATE,\n  BENEFICIARY_SELECTOR_MODAL,\n} from './constants';\n\nconst crossCurrencyMessages = { 'cross-currency': true };\nconst minOccurrences = 2;\nconst maxOccurences = 200;\nconst maxDigits = 13;\nconst expanded = {};\nconst charCounterConfig = {\n  description: {\n    maxChars: 140,\n  },\n  reference: {\n    maxChars: 35,\n  },\n};\nlet draftSaving;\nlet draftSaveError;\nlet draftSaveSuccess;\nlet paymentSubmitSuccess;\n\n/**\n * @name hideAfterPaymentMessage\n * @type {function}\n * @description\n * Clear payment submit result variable to hide respective message\n *\n * @returns {undefined}\n */\nconst hideAfterPaymentMessage = () => {\n  paymentSubmitSuccess = null;\n};\n\n/**\n * @name hideDraftMessage\n * @type {function}\n * @description\n * Clear draft result variables to hide respective messages\n *\n * @returns {undefined}\n */\nconst hideDraftMessage = () => {\n  draftSaveError = null;\n  draftSaveSuccess = null;\n};\n\n/**\n * @name hideValidationMessage\n * @type {function}\n * @description\n * Remove validation error item from the list\n *\n * @param {object} validation wrapper\n * @param {object} item\n */\nconst hideValidationMessage = (validation, item) => {\n  // eslint-disable-next-line no-param-reassign\n  validation.messages = validation.messages.filter(msg => msg !== item);\n};\n\n/**\n * @name hideAllMessages\n * @type {function}\n * @description\n * Hide all messages\n *\n * @param {Object} $ctrl controller\n */\nconst hideAllMessages = $ctrl => {\n  hideDraftMessage();\n  hideAfterPaymentMessage();\n  Object.assign($ctrl, {\n    paymentValidation: INIT_VALIDATION_STATE,\n    notifications: [],\n  });\n};\n\n/**\n * @description\n * Returns cross-currency messages if they should be shown\n *\n * @name showCrossCurrencyMessage\n * @type {function}\n * @param {object} $ctrl Widget controller\n * @returns {object} Cross currency messages\n */\nconst showCrossCurrencyMessage = $ctrl => {\n  const isRateVisible = $ctrl.paymentPreferences.showExchangeRate && $ctrl.rate &&\n    $ctrl.payment.from && parseFloat($ctrl.payment.amount.value);\n  const isDifferentCurrencies = $ctrl.payment.amount.currency !==\n    ($ctrl.payment.from ? $ctrl.payment.from.currency : $ctrl.payment.amount.currency);\n\n  return isRateVisible && isDifferentCurrencies ? crossCurrencyMessages : null;\n};\n\n/**\n * @description\n * Checks if layout should show 'Urgent payment' switcher\n *\n * @name canSelectUrgentPayment\n * @type {function}\n * @param {object} $ctrl Widget controller\n * @returns {boolean} True if urget payment switchet should be shown, false otherwise\n */\nconst canSelectUrgentPayment = $ctrl => {\n  const debitAccount = $ctrl.payment.from || {};\n  return !!($ctrl.paymentPreferences.urgent && debitAccount && debitAccount.urgentTransferAllowed);\n};\n\n/**\n * @description\n * Resets payment order\n *\n * @name resetPayment\n * @type {function}\n * @param {object} $ctrl Widget controller\n * @param {object} scope Template scope\n *\n * @returns {Promise<any>}\n */\nconst resetPayment = ($ctrl, scope) =>\n  $ctrl.resetPayment().then(() => {\n    Object.assign(scope, { step: 'form' });\n  });\n\n/**\n * @description\n * Makes new payment request and changes step on success\n *\n * @name makePayment\n * @type {function}\n * @param {object} $ctrl Payment controller\n * @param {object} scope Parent ng scope\n * @returns {object} Payment request Promise\n */\nconst makePayment = ($ctrl, scope) => $ctrl.makePayment($ctrl.payment)\n  .then(data => {\n    Object.assign(scope, { step: 'confirmation' });\n    window.scrollTo(0, 0);\n    return data;\n  })\n  .catch(err => Promise.reject(err));\n\n/**\n * @description\n * Handler for Account From change action\n *\n * @name onAccountChange\n * @type {function}\n * @param {object} $ctrl Payment controller\n * @param {object} selectedAccount\n * @returns {object} A Promise object\n */\nconst onAccountChange = ($ctrl, selectedAccount) => {\n  // eslint-disable-next-line no-param-reassign\n  $ctrl.payment.from = Object.assign({}, selectedAccount);\n  return $ctrl.onAccountFromChange();\n};\n\n/**\n * @description\n * Toggle group in credit-suggest component\n *\n * @name toggleCreditSuggestGroup\n * @type {function}\n * @param {object} event Event object\n * @param {object} model\n * @param {object} ctrl Widget's controller\n */\nconst toggleCreditSuggestGroup = (event, model, ctrl) => {\n  // Prevent suggestion list to be closed\n  event.stopPropagation();\n\n  expanded[model.more || model.less] = !!model.more;\n\n  ctrl.open();\n};\n\n/**\n * @name Helpers#scrollToFirstError\n * @description Focus or scroll to first error in ```form``` depending if it is visible or not.\n * @inner\n * @type {Function}\n * @param {Object} form Angular form object to check errors\n * @returns {Object} First angular element that is invalid\n */\nconst scrollToFirstError = (form) => {\n  const firstError = form.$$controls.find((control) => control.$invalid).$$element;\n  const bodyRect = document.body.getBoundingClientRect();\n  const elemRect = firstError[0].getBoundingClientRect();\n  let offset = elemRect.top - bodyRect.top;\n\n  // Correct position to navigation bar's height\n  const navBar = document.querySelector('nav');\n  if (navBar) {\n    const navBarRect = navBar.getBoundingClientRect();\n    const navBarStyles = window.getComputedStyle(navBar, null);\n\n    if (navBarStyles.position === 'fixed' && navBarRect.top === 0) {\n      offset -= navBarRect.height;\n    }\n  }\n\n  window.scrollTo({\n    top: offset,\n    behavior: 'smooth',\n  });\n\n  return firstError;\n};\n\n/**\n * @name reviewPayment\n * @type {function}\n *\n * @description\n * Called when submitting payment for review, it actually calls a hook that\n * can be customized with all the validations needed by the specific project.\n *\n * @param {object} $ctrl Payment controller\n * @param {object} scope Parent ng scope\n * @param {object} form Angular form object\n * @returns {Promise|HTMLElement}\n */\nconst reviewPayment = ($ctrl, scope, form) => {\n  if (form.$invalid) {\n    // Show validation messages for complex fields\n    Object.assign(form, { showSpecialValidationMessages: true });\n    return scrollToFirstError(form);\n  }\n\n  // Hide validation messages for complex fields (if any)\n  Object.assign(form, { showSpecialValidationMessages: false });\n\n  return $ctrl.reviewPayment($ctrl.payment)\n    .then(() => {\n      hideAllMessages($ctrl);\n      $ctrl.clearPaymentError();\n      Object.assign(scope, { step: 'review' });\n      window.scrollTo(0, 0);\n    })\n    .catch(() => {\n      window.scrollTo(0, 0);\n    });\n};\n\nconst helpers = (context) => {\n  const i18nFilter = context.$filter('i18n');\n  const dateFilter = context.$filter('date');\n\n  /**\n   * @description\n   * Transforms provided accounts to custom structure. External contacts account list will be\n   * flattened to be molded to same structure as internal accounts\n   * (identifier=IBAN/BBAN, name=contactperson).\n   *\n   * @name getAccounts\n   * @type {function}\n   * @param {array<object>} accounts\n   * @returns {array<object>} View accounts\n   */\n  const normalizeAccounts = (accounts) => {\n    if (!accounts) {\n      return [].concat(accounts || []);\n    }\n\n    const internalAccountView = accounts.filter(account => !account.external);\n\n    let externalAccountView = [];\n\n    // add group names per contact for externals\n    accounts.filter(account => account.external).forEach((contact) => {\n      const contactAccounts = [];\n      if (contact.accounts) {\n        for (const account of contact.accounts) {\n          Object.assign(account, {\n            identifier: account.IBAN || account.accountNumber,\n            accountName: account.accountName || account.name || account.alias,\n            name: contact.name,\n            contactPerson: contact.contactPerson || contact.name,\n            external: true,\n          });\n          contactAccounts.push(account);\n        }\n      }\n      externalAccountView = externalAccountView.concat(contactAccounts);\n    });\n\n    return [...internalAccountView, ...externalAccountView];\n  };\n\n  /**\n   * @description\n   * Compiles the scheduling description out of payment object params.\n   *\n   * In this process, following translation keys are being used:\n   *\n   * form.schedule.starting, for word \"Starting\"\n   *\n   * form.schedule.today, for word \"Today\"\n   *\n   * form.schedule.on, for word \"On\" (used before date to form \"on 01.01.2017\")\n   *\n   * form.schedule.until, for word \"until\" (used before date to form \"until 01.01.2017\")\n   *\n   * form.schedule.repeat.count, for word \"times\" (used after repeat count to form \"5 times\")\n   *\n   * and name of the transfer frequency set in constants file\n   *\n   * @name getScheduleText\n   * @type {function}\n   * @param {object} $ctrl Widget controller\n   * @returns {string} Compiled text that can be used as scheduling value in views\n   */\n  const getScheduleText = $ctrl => {\n    const { payment, EndingType, singleTransfer } = $ctrl;\n    const words = [];\n    const today = (new Date()).setHours(0, 0, 0, 0);\n    const startDate = new Date(payment.schedule.startDate);\n    const isToday = startDate.setHours(0, 0, 0, 0) === today;\n    const multipleOccurrences = payment.schedule.transferFrequency.value !== singleTransfer.value;\n    const hasEnd = payment.endingType !== EndingType.NEVER;\n\n    // add frequency\n    words.push(i18nFilter(payment.schedule.transferFrequency.name));\n    words.push('-');\n\n    // if there are multiple occurrences, add word starting\n    if (multipleOccurrences) {\n      words.push(i18nFilter('form.schedule.starting'));\n    }\n\n    // if start date is today use word instead of date\n    if (isToday) {\n      let todayString = i18nFilter('form.schedule.today');\n      // for multiple occurrences, there is a prefix word, so this on should be lowercase\n      if (multipleOccurrences) {\n        todayString = todayString.toLowerCase();\n      }\n\n      words.push(todayString);\n    }\n\n    // for single transfer in the future, we need prefix word on\n    if (!multipleOccurrences && !isToday) {\n      words.push(i18nFilter('form.schedule.on').toLowerCase());\n    }\n\n    if (!isToday) {\n      words.push(dateFilter(payment.schedule.startDate));\n    }\n\n    const hasLimitedOccurences = hasEnd && multipleOccurrences;\n    const isMinOccurences = !payment.schedule.repeat || payment.schedule.repeat < minOccurrences;\n\n    // if there are limited number of occurrences,\n    // add comma for the last word, so that there is no space between them\n    if (hasLimitedOccurences && !(payment.endingType === EndingType.AFTER && isMinOccurences)) {\n      words[words.length - 1] += ',';\n    }\n\n    if (hasEnd && multipleOccurrences) {\n      // there is an end for this schedule\n      // based on the type of ending construct words differently\n      if (payment.endingType === EndingType.ON) {\n        words.push(i18nFilter('form.schedule.until'));\n        words.push(dateFilter(payment.schedule.endDate));\n      } else if (payment.schedule.repeat >= minOccurrences) {\n        words.push(payment.schedule.repeat);\n        words.push(payment.schedule.repeat ? i18nFilter('form.schedule.repeat.count') : '');\n      }\n    }\n\n    // output everything together\n    return words.join(' ');\n  };\n\n  /**\n   * @description\n   * Returns frequencies for payment depending on occurences number\n   *\n   * @name getFrequencies\n   * @type {function}\n   * @param {object} $ctrl Widget controller\n   * @returns {array<object>} Array of transfer frequencies\n   */\n  const getFrequencies = $ctrl => [$ctrl.singleTransfer].concat(\n    $ctrl.paymentPreferences.recurring ? transferFrequencies : []);\n\n  /**\n   * @name getMinDate\n   * @type {function}\n   * @description\n   * Get the minimum available date for specific frequency\n   *\n   * @param {date} startDate\n   * @param {object} transferFrequency\n   * @return {date}\n   */\n  const getMinDate = (startDate, transferFrequency = {}) => {\n    let minDate;\n\n    const daysInMonth = (month, year) => new Date(year, month + 1, 0).getDate();\n    const addDays = (toDate, days) => new Date(toDate.getTime() + (days * 24 * 60 * 60 * 1000));\n    const addWeeks = (toDate, weeks) => addDays(toDate, weeks * 7);\n    const addYears = (toDate, years) => new Date(toDate.getFullYear() + years,\n      toDate.getMonth(), (toDate.getDate() > daysInMonth(toDate.getMonth(),\n        toDate.getFullYear()) ? daysInMonth(toDate.getMonth(),\n        toDate.getFullYear()) : toDate.getDate()));\n    const addMonths = (toDate, months) => {\n      const newMonth = toDate.getMonth() + months + 1 > 12 ?\n        ((toDate.getMonth() + months + 1) % 12) - 1 : toDate.getMonth() + months;\n      const newYear = toDate.getMonth() + months + 1 > 12 ?\n        addYears(toDate, 1).getFullYear() : toDate.getFullYear();\n      const newDay = toDate.getDate() > daysInMonth(newMonth, newYear) ?\n        daysInMonth(newMonth, newYear) : toDate.getDate();\n      return new Date(newYear, newMonth, newDay);\n    };\n\n    switch (transferFrequency.value) {\n      case 'DAILY':\n        minDate = addDays(startDate, transferFrequency.every);\n        break;\n      case 'WEEKLY':\n        minDate = addWeeks(startDate, transferFrequency.every);\n        break;\n      case 'MONTHLY':\n        minDate = addMonths(startDate, transferFrequency.every);\n        break;\n      case 'QUARTERLY':\n        minDate = addMonths(startDate, (transferFrequency.every * 3));\n        break;\n      case 'YEARLY':\n        minDate = addYears(startDate, transferFrequency.every);\n        break;\n      default:\n        minDate = startDate;\n    }\n\n    return minDate;\n  };\n\n  /**\n   * @name initPayment\n   * @type {function}\n   * @description\n   * Initiate payment form initialization and clear possible\n   * error validation results\n   *\n   * @param $ctrl Widget controller\n   * @param form to be cleared\n   */\n  const initPayment = ($ctrl, form) => {\n    form.credit.$setValidity('iban', true);\n    Object.assign(form, { showSpecialValidationMessages: false });\n    $ctrl.initPayment();\n  };\n\n  /**\n   * @name canSaveDraft\n   * @type {function}\n   * @description\n   * Returns true if at least credit account, beneficiary or any amount\n   * filled in\n   *\n   * @param {object} $ctrl Widget controller\n   * @param {object} formErrors\n   * @returns {boolean}\n   */\n  const canSaveDraft = ($ctrl, formErrors = {}) => {\n    const ibanMaxlengthError = ($ctrl.payment.to && $ctrl.payment.to.IBAN &&\n      $ctrl.payment.to.IBAN.replace(/\\s+/g, '').length > IBAN_MAX_LENGTH);\n\n    const userErrors = Object.keys(formErrors)\n      .reduce((previousValue, currentItem) =>\n        (previousValue === true ? true : (currentItem === 'maxlength')),\n        false) || ibanMaxlengthError;\n\n    return ($ctrl.payment.from ||\n      ($ctrl.payment.to && $ctrl.payment.to.name) ||\n      ($ctrl.payment.to && $ctrl.payment.to.IBAN) ||\n      $ctrl.payment.amount.value) && !userErrors;\n  };\n\n\n  /**\n   * @name saveDraft\n   * @type {function}\n   * @description\n   * Initiate draft payment save\n   *\n   * @param {object} $ctrl Widget controller\n   * @param {object} form to be cleared\n   */\n  const saveDraft = ($ctrl, form) => {\n    draftSaving = true;\n    hideAllMessages($ctrl);\n    return $ctrl.saveDraft($ctrl.payment)\n      .then(response => {\n        draftSaveSuccess = response;\n        initPayment($ctrl, form);\n        draftSaving = false;\n        window.scrollTo(0, 0);\n      })\n      .catch(err => {\n        draftSaveError = err;\n        draftSaving = false;\n        window.scrollTo(0, 0);\n      });\n  };\n\n  /**\n   * @name editDraft\n   * @type {function}\n   * @description\n   * Initiate draft payment edit save\n   *\n   * @param {object} $ctrl Widget controller\n   */\n  const editDraft = ($ctrl) => {\n    draftSaving = true;\n    hideAllMessages($ctrl);\n    return $ctrl.editDraft($ctrl.payment.id, $ctrl.payment)\n      .then(response => {\n        draftSaveSuccess = response;\n        draftSaving = false;\n        context.intents.viewPaymentOrders();\n      })\n      .catch(err => {\n        draftSaveError = err;\n        draftSaving = false;\n        window.scrollTo(0, 0);\n      });\n  };\n\n  /**\n   * @name isDraftSaving\n   * @type {function}\n   * @description\n   * Returns true if draft payment is being saved and false otherwise\n   *\n   * @returns {boolean}\n   */\n  const isDraftSaving = () => draftSaving;\n\n  /**\n   * @name isDraftSaveError\n   * @type {function}\n   * @description\n   * Returns null if draft payment is saved successfully\n   * and error object otherwise\n   *\n   * @returns {object|null}\n   */\n  const isDraftSaveError = () => draftSaveError;\n\n  /**\n   * @name isDraftSaveSuccess\n   * @type {function}\n   * @description\n   * Returns null if draft payment is saved with error\n   * and response object otherwise\n   *\n   * @returns {object|null}\n   */\n  const isDraftSaveSuccess = () => draftSaveSuccess;\n\n  /**\n   * @name formUntouched\n   * @type {function}\n   * @description\n   * Returns true if the form fields are in initial values and false otherwise\n   *\n   * @param {object} $ctrl Widget controller\n   * @returns {boolean}\n   */\n  const formUntouched = $ctrl => {\n    const payment = $ctrl.payment;\n    const today = new Date();\n    const paymentStartDate = payment.schedule.startDate;\n    const sameStartDate = today.getYear() === paymentStartDate.getYear() &&\n      today.getMonth() === paymentStartDate.getMonth() &&\n      today.getDate() === paymentStartDate.getDate();\n\n    return !payment.from && !(payment.to && payment.to.name) && !payment.amount.value &&\n      (payment.description === null || payment.description === '') &&\n      (!payment.schedule.repeat || payment.schedule.repeat === minOccurrences) &&\n      (payment.paymentReference === null || payment.paymentReference === '') &&\n      sameStartDate &&\n      payment.schedule.transferFrequency.value === $ctrl.singleTransfer.value &&\n      payment.endingType === $ctrl.EndingType.NEVER;\n  };\n\n  const deleteDraft = ($ctrl, intents, draftid) => {\n    $ctrl.deleteDraft(draftid).then(() => {\n      intents.viewPaymentOrders();\n    });\n  };\n\n  /**\n   * @name isAfterPaymentSuccess\n   * @type {function}\n   * @description\n   * Returns null if payment is submitted with error\n   * and true otherwise\n   *\n   * @returns {boolean|null}\n   */\n  const isAfterPaymentSuccess = () => paymentSubmitSuccess;\n\n  /**\n   * @name selectPaymentSubmitType\n   * @type {function}\n   * @description\n   * Makes payment and applies after action (create new payment,\n   * approve submitted payment, etc.)\n   *\n   * @param {object} type submit button\n   * @param {object} $ctrl Widget controller\n   * @param {object} scope\n   * @returns {Promise}\n   */\n  const selectPaymentSubmitType = (type, $ctrl, scope) => makePayment($ctrl, scope)\n    .then(response => {\n      const paymentId = response.data && response.data.id;\n      paymentSubmitSuccess = true;\n\n      if ($ctrl.draftMode) {\n        Object.assign($ctrl, { draftMode: false });\n        /*\n          Intentionally unhandled promise since when somehow draft delete fails\n          it shouldn't interfere with payment flow.\n        */\n        $ctrl.deleteDraft($ctrl.payment.id);\n      }\n\n      if (type.afterMethod === 'create') {\n        resetPayment($ctrl, scope);\n      } if (type.afterMethod === 'approve') {\n        $ctrl.authorizeAndNotify(paymentId);\n      } else {\n        hideAfterPaymentMessage();\n      }\n    });\n\n  /**\n   * @name isDraftChanged\n   * @type {function}\n   * @description\n   * Check if the draft is changed by user\n   *\n   * @inner\n   * @param {object} $ctrl controller\n   * @returns {boolean}\n   */\n  const isDraftChanged = ($ctrl) => {\n    const before = { ...$ctrl.draftMode };\n    const after = { ...$ctrl.purifyDraftPaymentData($ctrl.payment) };\n\n    return !equals(before, after);\n  };\n\n  /**\n   * @name closeEditDraft\n   * @type {function}\n   * @description\n   * Decides if to show the \"save changes\" confirmation popup or to\n   * run a callback instead\n   *\n   * @param {object} $ctrl controller\n   * @param {object} ext extension\n   * @param {function} callback function\n   */\n  const closeEditDraft = ($ctrl, ext, callback) => {\n    if (isDraftChanged($ctrl)) {\n      // eslint-disable-next-line no-param-reassign\n      ext.editDraftConfirmOpened = true;\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      ext.editDraftConfirmOpened = false;\n      // eslint-disable-next-line no-unused-expressions\n      typeof callback === 'function' && callback();\n    }\n  };\n\n  /**\n   * @name submitButtonTypes\n   * @type {function}\n   * @description\n   * Returns submit button types allowed by user permissions, or\n   * all types if there are no any permissions provided\n   *\n   * @param {object} privileges allowed\n   * @return {Array}\n   */\n  const submitButtonTypes = privileges =>\n    (privileges ? allSubmitButtonTypes.filter(type => privileges[type.permission]) :\n      allSubmitButtonTypes);\n\n  /**\n   * @name getMessagePrefix\n   * @type {function}\n   * @description\n   * Returns rejected value or \"problematic\" field name\n   *\n   * @param {object} error\n   * @return {string}\n   */\n  const getMessagePrefix = error => {\n    let rejectedValue = error.context && error.context.rejectedValue;\n\n    if ((!rejectedValue || rejectedValue === 'null') && error.key) {\n      // get prop name to show in error message\n      rejectedValue = error.key.match(/\\w+$/)[0];\n    }\n\n    return rejectedValue;\n  };\n\n  /**\n   * @name Helpers#removeNotification\n   * @type {function}\n   *\n   * @description\n   * Helper to remove notification from the list\n   *\n   * @param {object} notification\n   * @param {Array} notificationsList\n   * @returns {Array}\n   */\n  const removeNotification = (notification, notificationsList) =>\n    notificationsList.filter(item => item !== notification);\n\n  /**\n   * @name Helpers#isModal\n   * @type {function}\n   *\n   * @description\n   * Helper to check if we should use modal beneficiary selector\n   *\n   * @param {String} configValue\n   * @returns {Boolean}\n   */\n  const isModal = (configValue) =>\n    configValue === BENEFICIARY_SELECTOR_MODAL;\n\n  return {\n    paymentReferencePattern,\n    minOccurrences,\n    maxOccurences,\n    maxDigits,\n    charCounterConfig,\n    submitButtonTypes,\n    showCrossCurrencyMessage,\n    normalizeAccounts,\n    canSelectUrgentPayment,\n    getScheduleText,\n    getFrequencies,\n    resetPayment,\n    makePayment,\n    reviewPayment,\n    toggleCreditSuggestGroup,\n    onAccountChange,\n    getMinDate,\n    canSaveDraft,\n    saveDraft,\n    editDraft,\n    isDraftSaving,\n    isDraftSaveError,\n    isDraftSaveSuccess,\n    hideDraftMessage,\n    formUntouched,\n    initPayment,\n    selectPaymentSubmitType,\n    hideAfterPaymentMessage,\n    isAfterPaymentSuccess,\n    deleteDraft,\n    closeEditDraft,\n    hideValidationMessage,\n    getMessagePrefix,\n    removeNotification,\n    isModal,\n    hideAllMessages,\n  };\n};\n\nexport default helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bus-initiate-payment-ng/scripts/helpers.js","/**\n * @description\n * Intents used in ext-bus-initiate-payment\n */\nexport default ({ createRequest }) => ({\n  viewPaymentOrders: createRequest('view.account.managePayments'),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bus-initiate-payment-ng/scripts/intents.js","const Event = {\n  PAYMENT_CREATE_SUCCESS: 'bb.event.payment.create.success',\n  PAYMENT_AUTH_SUCCESS: 'bb.event.payment.auth.success',\n  PAYMENT_AUTH_FAIL: 'bb.event.payment.auth.fail',\n};\n\nexport default ({ notifications, $filter }) => {\n  const i18n = $filter('i18n');\n  return {\n    [Event.PAYMENT_AUTH_SUCCESS]() {\n      notifications.notifySuccess(i18n('notification.auth.success'));\n    },\n\n    [Event.PAYMENT_AUTH_FAIL]() {\n      notifications.notifyAlert(i18n('notification.auth.fail'));\n    },\n\n    [Event.PAYMENT_CREATE_SUCCESS](status) {\n      notifications.notifySuccess(i18n(`form.label.${status}`));\n    },\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bus-initiate-payment-ng/scripts/events.js"],"sourceRoot":""}