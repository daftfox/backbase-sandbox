{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fe5236dfd667cf1e3ea6","webpack:///./ext-bb-income-spending-analysis-category-list-ng/model.xml","webpack:///./ext-bb-income-spending-analysis-category-list-ng/scripts/index.js","webpack:///external \"vendor-bb-angular-ng-aria\"","webpack:///external \"ui-bb-i18n-ng\"","webpack:///external \"ui-bb-substitute-error-ng\"","webpack:///external \"ui-bb-loading-indicator-ng\"","webpack:///external \"ui-bb-format-amount-ng\"","webpack:///external \"ui-bb-empty-state-ng\"","webpack:///external \"ui-bb-change-period-ng\"","webpack:///external \"vendor-bb-uib-buttons\"","webpack:///./ext-bb-income-spending-analysis-category-list-ng/scripts/hooks.js","webpack:///./ext-bb-income-spending-analysis-category-list-ng/scripts/helpers.js","webpack:///./ext-bb-income-spending-analysis-category-list-ng/scripts/constants.js"],"names":["dependencyKeys","ngAriaModuleKey","i18nKey","uiBbSubstituteErrorKey","uiBbLoadingIndicatorKey","uiBbFormatAmountKey","uiBbEmptyStateKey","uiBbChangePeriodKey","uibBbButtonsKey","hooks","extHooks","helpers","extHelpers","events","updateTurnoversData","categoryToIconClass","transactionCategory","toLowerCase","replace","getNewDate","Date","newDate","getTime","getTimezoneOffset","MS_IN_MIN","toISOString","slice","onPeriodStartChange","ctrl","newStartDate","Object","assign","periodStartDate","onPeriodEndChange","newEndDate","periodEndDate","updateAnalysisCategories","updatePeriod","monthsRange","date","startDate","setDate","setMonth","getMonth","context","dateFilter","$filter","i18nFilter","periodStartLabelFormatter","periodEndLabelFormatter","setHours","getSymbol","code","getRule","symbol"],"mappings":"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","file":"ext-bb-income-spending-analysis-category-list-ng/scripts/ext-bb-income-spending-analysis-category-list-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-change-period-ng\"), require(\"vendor-bb-uib-buttons\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bb-income-spending-analysis-category-list-ng\", [\"vendor-bb-angular-ng-aria\", \"ui-bb-i18n-ng\", \"ui-bb-substitute-error-ng\", \"ui-bb-loading-indicator-ng\", \"ui-bb-format-amount-ng\", \"ui-bb-empty-state-ng\", \"ui-bb-change-period-ng\", \"vendor-bb-uib-buttons\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bb-income-spending-analysis-category-list-ng\"] = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-change-period-ng\"), require(\"vendor-bb-uib-buttons\"));\n\telse\n\t\troot[\"ext-bb-income-spending-analysis-category-list-ng\"] = factory(root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-substitute-error-ng\"], root[\"ui-bb-loading-indicator-ng\"], root[\"ui-bb-format-amount-ng\"], root[\"ui-bb-empty-state-ng\"], root[\"ui-bb-change-period-ng\"], root[\"vendor-bb-uib-buttons\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fe5236dfd667cf1e3ea6","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bb-income-spending-analysis-category-list-ng/model.xml\n// module id = 0\n// module chunks = 0","/**\n * @module ext-bb-income-spending-analysis-category-list-ng\n *\n * @description\n * Income/spending analysis extension for displaying top metrics\n */\n\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbSubstituteErrorKey from 'ui-bb-substitute-error-ng';\nimport uiBbLoadingIndicatorKey from 'ui-bb-loading-indicator-ng';\nimport uiBbFormatAmountKey from 'ui-bb-format-amount-ng';\nimport uiBbEmptyStateKey from 'ui-bb-empty-state-ng';\nimport uiBbChangePeriodKey from 'ui-bb-change-period-ng';\nimport uibBbButtonsKey from 'vendor-bb-uib-buttons';\n\nimport extHooks from './hooks';\nimport extHelpers from './helpers';\n\nexport const dependencyKeys = [\n  ngAriaModuleKey,\n  i18nKey,\n  uiBbSubstituteErrorKey,\n  uiBbLoadingIndicatorKey,\n  uiBbFormatAmountKey,\n  uiBbEmptyStateKey,\n  uiBbChangePeriodKey,\n  uibBbButtonsKey,\n];\n\nexport const hooks = extHooks;\nexport const helpers = extHelpers;\nexport const events = {};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-income-spending-analysis-category-list-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 2\n// module chunks = 0 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-substitute-error-ng\"\n// module id = 4\n// module chunks = 0 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-loading-indicator-ng\"\n// module id = 5\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount-ng\"\n// module id = 6\n// module chunks = 0 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-empty-state-ng\"\n// module id = 7\n// module chunks = 0 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-change-period-ng\"\n// module id = 8\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-buttons\"\n// module id = 9\n// module chunks = 0 1 2","/**\n * @name updateTurnoversData\n * @type {function}\n *\n * @description\n * If set to true, turnovers will be automatically updated on init and period change detection.\n * Otherwise, controller's updateTurnovers method needs to be called manually\n *\n * @returns {boolean}\n */\nconst updateTurnoversData = () => false;\n\nexport default {\n  updateTurnoversData,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-income-spending-analysis-category-list-ng/scripts/hooks.js","import MS_IN_MIN from './constants';\n\n/**\n * @description\n * Converts transaction category name into category CSS icon class sufix\n *\n * @name categoryToIconClass\n * @type {function}\n * @param {string} transactionCategory Transaction category\n * @returns {string}\n */\nconst categoryToIconClass = (transactionCategory) =>\n  transactionCategory.toLowerCase().replace(/\\W/g, '-').replace(/-{2,}/g, '-');\n\n/**\n * @description\n * Creates new Date object based on input date\n * Returns new Date object\n *\n * @name getNewDate\n * @type {function}\n * @inner\n * @param {Date} newDate\n * @returns {string}\n */\nconst getNewDate = newDate =>\n  new Date(newDate.getTime() - (newDate.getTimezoneOffset() * MS_IN_MIN))\n  .toISOString()\n  .slice(0, 10);\n\n/**\n * @description\n * Callback on period start date value change. This function ensures\n * that controller property is also updated\n *\n * @name onPeriodStartChange\n * @type {function}\n * @param {IncomeSpendingAnalysisCategoryController} ctrl\n */\nconst onPeriodStartChange = (ctrl) => (newStartDate) =>\n  Object.assign(ctrl, {\n    periodStartDate: getNewDate(newStartDate),\n  });\n\n/**\n * @description\n * Callback on period value change. Calls\n * controller's onPeriodEndChanged listener\n *\n * @name onPeriodEndChange\n * @type {function}\n * @param {IncomeSpendingAnalysisCategoryController} ctrl\n */\nconst onPeriodEndChange = (ctrl) => (newEndDate) => {\n  Object.assign(ctrl, {\n    periodEndDate: getNewDate(newEndDate),\n  });\n  ctrl.updateAnalysisCategories();\n};\n\n/**\n * @description\n * Callback on updating period\n *\n * @name updatePeriod\n * @type {function}\n * @param {IncomeSpendingAnalysisCategoryController} ctrl\n * @param {monthsRange} monthsRange\n */\nconst updatePeriod = (ctrl, monthsRange) => {\n  const date = new Date();\n  // (monthsRange - 1) to get data starting from this month and 5 months before it,\n  // which will end up to 6 months in total (the same of 12 months)\n  const startDate = (monthsRange === 1) ?\n    date.setDate(1) :\n    date.setMonth(date.getMonth() - (monthsRange - 1), 1);\n\n  Object.assign(ctrl, {\n    periodStartDate: getNewDate(new Date(startDate)),\n    periodEndDate: getNewDate(new Date()),\n  });\n\n  ctrl.updateAnalysisCategories();\n};\n\nconst helpers = (context) => {\n  const dateFilter = context.$filter('date');\n  const i18nFilter = context.$filter('i18n');\n\n  /**\n   * @description\n   * Start period label formatter helper. Returns formatted date.\n   *\n   * @name periodStartLabelFormatter\n   * @type {function}\n   * @param {Date} date\n   * @returns {string} Formatted label\n   */\n  const periodStartLabelFormatter = (date) => dateFilter(date, 'd MMM yyyy');\n\n  /**\n   * @description\n   * End period label formatter helper. In case period is larger than current date\n   * (end date of current month) it returns translation for analysis.label.period.now,\n   * otherwise it returns formatted date\n   *\n   * @name periodEndLabelFormatter\n   * @type {function}\n   * @param {Date} date\n   * @returns {string} Formatted label\n   */\n  const periodEndLabelFormatter = (date) => (new Date(new Date().setHours(0, 0, 0, 0)) > date ?\n    dateFilter(date, 'd MMM yyyy') :\n    i18nFilter('analysis.label.period.now'));\n\n  /**\n   * @description\n   * Converts currecy code into symbol or returns back code if mapping was not successful\n   *\n   * @name getSymbol\n   * @type {function}\n   * @param {string} code Currency code\n   * @returns {string} Symbol or currecy code if symbol for it cannot be found\n   */\n  const getSymbol = (code) => (context.getRule(code) || {}).symbol || code;\n\n  return {\n    getSymbol,\n    categoryToIconClass,\n    onPeriodStartChange,\n    onPeriodEndChange,\n    periodStartLabelFormatter,\n    periodEndLabelFormatter,\n    updatePeriod,\n  };\n};\n\nexport default helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-income-spending-analysis-category-list-ng/scripts/helpers.js","/**\n * @name MS_IN_MIN\n * @description\n * Amount of milliseconds in a minute\n * @type {number}\n */\nconst MS_IN_MIN = 60000;\n\nexport default MS_IN_MIN;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-income-spending-analysis-category-list-ng/scripts/constants.js"],"sourceRoot":""}