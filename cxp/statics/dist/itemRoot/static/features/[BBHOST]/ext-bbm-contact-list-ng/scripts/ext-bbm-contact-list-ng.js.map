{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6***","webpack:///webpack/bootstrap d55e1b15032dbd9fb9d3?118c***","webpack:///./ext-bbm-contact-list-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01**","webpack:///external \"ui-bb-avatar-ng\"?29da","webpack:///./ext-bbm-contact-list-ng/scripts/index.js","webpack:///external \"ui-bbm-scroll-ng\"","webpack:///./ext-bbm-contact-list-ng/scripts/events.js","webpack:///./ext-bbm-contact-list-ng/scripts/constants.js","webpack:///./ext-bbm-contact-list-ng/scripts/helpers.js","webpack:///./ext-bbm-contact-list-ng/scripts/intents.js"],"names":["events","extEvents","helpers","extHelpers","intents","extIntents","dependencyKeys","uiBbAvatarKey","i18nKey","uiBbmScrollKey","SEARCH_MIN_QUERY","SEARCH_INPUT_THRESHOLD","throttle","fn","threshold","last","timeout","throttledFn","args","context","now","Date","timeDifference","clearTimeout","setTimeout","apply","service","withNativeEvents","onSearchInput","value","length","setSearchQuery","ToolbarButtonEvent","CREATE_CONTACT","createContact","SEARCH_CONTACT","detail","action","SearchActions","INPUT","text","CANCEL","cancelSearch","Event","CONTACT_CREATE_DONE","reloadContacts","CONTACT_UPDATE_DONE","CONTACT_DELETE_DONE","Intent","SHOW_CONTACT_DETAILS","SHOW_CONTACT_LIST","compareStr","strA","strB","getContactSortStr","contact","name","toLowerCase","getContactNameChar","charAt","toUpperCase","groupContacts","contacts","reduce","result","char","push","getContactsToDisplay","groups","Object","keys","sort","map","contactA","contactB","stateContainer","getContacts","createSelector","state","data","getSearchContacts","search","hasContacts","Boolean","hasSearchContacts","showAvatar","showList","searching","showLoadingState","loading","error","showEmptyState","showErrorState","showLoadMoreLoading","showSearch","showSearchErrorState","showSearchEmptyState","showSearchLoadingState","showSearchLoadMoreLoading","showLoadMore","showSearchLoadMore","selectContact","setSelectedContact","showContactDetails","loadMore","loadMoreContacts","searchMore","searchMoreContacts","createRequest","handleRequest","showContactList","setContacts"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,0C;;;;;;;ACAA,gD;;;;;;;ACAA,iD;;;;;;;;;;;;;;ACYA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAlBA;;;;;;;;;;;;AAoBO,KAAMA,0BAASC,gBAAf;AACA,KAAMC,4BAAUC,iBAAhB;AACA,KAAMC,4BAAUC,iBAAhB;;AAEA,KAAMC,0CAAiB,CAC5BC,sBAD4B,EAE5BC,oBAF4B,EAG5BC,uBAH4B,CAAvB,C;;;;;;;ACxBP,iD;;;;;;;;;;;;;ACAA;;;;AAMA;;;;;AAKA,KAAMC,mBAAmB,CAAzB;;AAEA;;;;;AAKA,KAAMC,yBAAyB,IAA/B;;AAEA;;;;;;;;;;;;AAYA,KAAMC,WAAW,SAAXA,QAAW,CAACC,EAAD,EAAKC,SAAL,EAAmB;AAClC,OAAIC,aAAJ;AACA,OAAIC,gBAAJ;;AAEA,UAAO,SAASC,WAAT,GAA8B;AAAA,uCAANC,IAAM;AAANA,WAAM;AAAA;;AACnC,SAAMC,UAAU,IAAhB;AACA,SAAMC,MAAMC,KAAKD,GAAL,EAAZ;AACA,SAAME,iBAAiBF,MAAML,IAA7B;;AAEA,SAAIA,QAAQO,iBAAiBR,SAA7B,EAAwC;AACtCS,oBAAaP,OAAb;AACAA,iBAAUQ,WAAW,YAAM;AACzBT,gBAAOK,GAAP;AACAP,YAAGY,KAAH,CAASN,OAAT,EAAkBD,IAAlB;AACD,QAHS,EAGPJ,YAAYQ,cAHL,CAAV;AAID,MAND,MAMO;AACLP,cAAOK,GAAP;AACAP,UAAGY,KAAH,CAASN,OAAT,EAAkBD,IAAlB;AACD;AACF,IAfD;AAgBD,EApBD;;mBAsBe,gBAA4C;AAAA;;AAAA,OAAzCQ,OAAyC,QAAzCA,OAAyC;AAAA,OAAhCC,gBAAgC,QAAhCA,gBAAgC;AAAA,OAAdvB,OAAc,QAAdA,OAAc;;AACzD;;;;;;;;AAQA,OAAMwB,gBAAgBhB,SAAS,iBAAS;AACtC,SAAIiB,MAAMC,MAAN,IAAgBpB,gBAApB,EAAsC;AACpCgB,eAAQK,cAAR,CAAuBF,KAAvB;AACD;AACF,IAJqB,EAInBlB,sBAJmB,CAAtB;;AAMA,UAAOgB,6EAEFK,8BAAmBC,cAFjB,EAEkC,YAAM;AACzC7B,aAAQ8B,aAAR;AACD,IAJE,sCAKFF,8BAAmBG,cALjB,EAKkC,iBAAgB;AAAA,SAAbC,MAAa,SAAbA,MAAa;;AACnD,SAAIA,OAAOC,MAAP,KAAkBC,yBAAcC,KAApC,EAA2C;AACzCX,qBAAcQ,OAAOI,IAArB;AACD,MAFD,MAEO,IAAIJ,OAAOC,MAAP,KAAkBC,yBAAcG,MAApC,EAA4C;AACjDf,eAAQgB,YAAR;AACD;AACF,IAXE,qFAcFC,iBAAMC,mBAdJ,EAc0B,YAAM;AACjClB,aAAQmB,cAAR;AACD,IAhBE,uCAiBFF,iBAAMG,mBAjBJ,EAiB0B,YAAM;AACjCpB,aAAQmB,cAAR;AACD,IAnBE,uCAoBFF,iBAAMI,mBApBJ,EAoB0B,YAAM;AACjCrB,aAAQmB,cAAR;AACD,IAtBE,uBAAP;AAyBD,E;;;;;;;;;;;;AC9FD;;;;;;AAMO,KAAMP,wCAAgB;AAC3BG,WAAQ,QADmB;AAE3BF,UAAO;AAFoB,EAAtB;;AAKP;;;;;;AAMO,KAAMP,kDAAqB;AAChCC,mBAAgB,0BADgB;AAEhCE,mBAAgB;AAFgB,EAA3B;;AAKP;;;;;;AAMO,KAAMa,0BAAS;AACpBf,mBAAgB,2BADI;AAEpBgB,yBAAsB,iCAFF;AAGpBC,sBAAmB;AAHC,EAAf;;AAMP;;;;;;AAMO,KAAMP,wBAAQ;AACnB;;;;;AAKAC,wBAAqB,8BANF;;AAQnB;;;;;AAKAE,wBAAqB,8BAbF;;AAenB;;;;;AAKAC,wBAAqB;AApBF,EAAd,C;;;;;;;;;;;;ACxCP;;;;;;AAMA,KAAMI,aAAa,SAAbA,UAAa,CAACC,IAAD,EAAOC,IAAP,EAAgB;AACjC,OAAID,OAAOC,IAAX,EAAiB;AACf,YAAO,CAAP;AACD,IAFD,MAEO,IAAID,OAAOC,IAAX,EAAiB;AACtB,YAAO,CAAC,CAAR;AACD;AACD,UAAO,CAAP;AACD,EAPD;;AASA;;;;;AAKA,KAAMC,oBAAoB,SAApBA,iBAAoB;AAAA,UAAWC,QAAQC,IAAR,CAAaC,WAAb,EAAX;AAAA,EAA1B;;AAEA;;;;;;AAMA,KAAMC,qBAAqB,SAArBA,kBAAqB;AAAA,UACzBH,QAAQC,IAAR,GACID,QAAQC,IAAR,CAAaG,MAAb,CAAoB,CAApB,EAAuBC,WAAvB,EADJ,GAEI,IAHqB;AAAA,EAA3B;;AAMA;;;;;AAKA,UAASC,aAAT,CAAuBC,QAAvB,EAAiC;AAC/B,UAAOA,SAASC,MAAT,CAAgB,UAACC,MAAD,EAAST,OAAT,EAAqB;AAC1C,SAAMU,OAAOP,mBAAmBH,OAAnB,CAAb;;AAEA,SAAI,CAACS,OAAOC,IAAP,CAAL,EAAmB;AACjB;AACA;AACA;AACAD,cAAOC,IAAP,IAAe,EAAf;AACA;AACD;;AAEDD,YAAOC,IAAP,EAAaC,IAAb,CAAkBX,OAAlB;;AAEA,YAAOS,MAAP;AACD,IAdM,EAcJ,EAdI,CAAP;AAeD;;AAED;;;;;;;;;AASA,KAAMG,uBAAuB,SAAvBA,oBAAuB,WAAY;AACvC,OAAMC,SAASP,cAAcC,QAAd,CAAf;;AAEA,UAAOO,OAAOC,IAAP,CAAYF,MAAZ,EACJG,IADI,CACCpB,UADD,EAEJqB,GAFI,CAEA;AAAA,YAAS;AACZV,iBAAUM,OAAOH,IAAP,EAAaM,IAAb,CAAkB,UAACE,QAAD,EAAWC,QAAX;AAAA,gBAC1BvB,WACEG,kBAAkBmB,QAAlB,CADF,EAEEnB,kBAAkBoB,QAAlB,CAFF,CAD0B;AAAA,QAAlB,CADE;AAOZT;AAPY,MAAT;AAAA,IAFA,CAAP;AAWD,EAdD;;AAgBA;;;;;;;;mBAOe,gBAA0C;AAAA,OAAvCvC,OAAuC,QAAvCA,OAAuC;AAAA,OAA9BiD,cAA8B,QAA9BA,cAA8B;AAAA,OAAdvE,OAAc,QAAdA,OAAc;;AACvD;;;;;;;;;AASA,OAAMwE,cAAcD,eAAeE,cAAf,CAClB;AAAA,YAASV,qBAAqBW,MAAMhB,QAAN,CAAeiB,IAApC,CAAT;AAAA,IADkB,CAApB;;AAIA;;;;;;;;;AASA,OAAMC,oBAAoBL,eAAeE,cAAf,CAA8B;AAAA,YAASC,MAAMG,MAAN,CAAaF,IAAtB;AAAA,IAA9B,CAA1B;;AAEA;;;;;;;;;AASA,OAAMG,cAAcP,eAAeE,cAAf,CAA8B;AAAA,YAASM,QACzDL,MAAMhB,QAAN,CAAeiB,IAAf,IACAD,MAAMhB,QAAN,CAAeiB,IAAf,CAAoBjD,MAApB,GAA6B,CAF4B,CAAT;AAAA,IAA9B,CAApB;;AAKA;;;;;;;;;AASA,OAAMsD,oBAAoBT,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAC/DL,MAAMG,MAAN,CAAaF,IAAb,IACAD,MAAMG,MAAN,CAAaF,IAAb,CAAkBjD,MAAlB,GAA2B,CAFoC,CAAT;AAAA,IAA9B,CAA1B;;AAKA;;;;;;;;;AASA,OAAMuD,aAAaV,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAAQL,MAAMO,UAAd,CAAT;AAAA,IAA9B,CAAnB;;AAEA;;;;;;;;;AASA,OAAMC,WAAWX,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAAQ,CAACL,MAAMS,SAAf,CAAT;AAAA,IAA9B,CAAjB;;AAEA;;;;;;;;;AASA,OAAMC,mBAAmBb,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAC9DL,MAAMhB,QAAN,CAAe2B,OAAf,IACA,CAACX,MAAMhB,QAAN,CAAeiB,IADhB,IAEA,CAACD,MAAMhB,QAAN,CAAe4B,KAH8C,CAAT;AAAA,IAA9B,CAAzB;;AAMA;;;;;;;;;AASA,OAAMC,iBAAiBhB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAC5D,CAACL,MAAMS,SAAP,IACAJ,QAAQL,MAAMhB,QAAN,CAAeiB,IAAf,IAAuB,CAACD,MAAMhB,QAAN,CAAeiB,IAAf,CAAoBjD,MAArB,GAA8B,CAA7D,CADA,IAEA,CAACgD,MAAMhB,QAAN,CAAe2B,OAFhB,IAGA,CAACX,MAAMhB,QAAN,CAAe4B,KAJ4C,CAAT;AAAA,IAA9B,CAAvB;;AAOA;;;;;;;;;AASA,OAAME,iBAAiBjB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAC5D,CAACL,MAAMS,SAAP,IACA,CAACT,MAAMhB,QAAN,CAAe2B,OADhB,IAEAX,MAAMhB,QAAN,CAAe4B,KAH6C,CAAT;AAAA,IAA9B,CAAvB;;AAMA;;;;;;;;;AASA,OAAMG,sBAAsBlB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QACjEL,MAAMhB,QAAN,CAAe2B,OAAf,IACAX,MAAMhB,QAAN,CAAeiB,IAFkD,CAAT;AAAA,IAA9B,CAA5B;;AAKA;;;;;;;;;AASA,OAAMe,aAAanB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAAQL,MAAMS,SAAd,CAAT;AAAA,IAA9B,CAAnB;;AAEA;;;;;;;;;AASA,OAAMQ,uBAAuBpB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAClEL,MAAMS,SAAN,IACAT,MAAMG,MAAN,CAAaS,KADb,IAEA,CAACZ,MAAMG,MAAN,CAAaQ,OAHoD,CAAT;AAAA,IAA9B,CAA7B;;AAMA;;;;;;;;;AASA,OAAMO,uBAAuBrB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QAClEL,MAAMS,SAAN,IACAJ,QAAQL,MAAMG,MAAN,CAAaF,IAAb,IAAqB,CAACD,MAAMG,MAAN,CAAaF,IAAb,CAAkBjD,MAAnB,GAA4B,CAAzD,CADA,IAEA,CAACgD,MAAMG,MAAN,CAAaS,KAFd,IAGA,CAACZ,MAAMG,MAAN,CAAaQ,OAJoD,CAAT;AAAA,IAA9B,CAA7B;;AAOA;;;;;;;;;AASA,OAAMQ,yBAAyBtB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QACpEL,MAAMS,SAAN,IACAT,MAAMG,MAAN,CAAaQ,OADb,IAEA,CAACX,MAAMG,MAAN,CAAaF,IAFd,IAGA,CAACD,MAAMG,MAAN,CAAaS,KAJsD,CAAT;AAAA,IAA9B,CAA/B;;AAOA;;;;;;;;;AASA,OAAMQ,4BAA4BvB,eAAeE,cAAf,CAA8B;AAAA,YAASM,QACvEL,MAAMS,SAAN,IACAT,MAAMG,MAAN,CAAaQ,OADb,IAEAX,MAAMG,MAAN,CAAaF,IAH0D,CAAT;AAAA,IAA9B,CAAlC;;AAMA;;;;;;;;;AASA,OAAMoB,eAAe,SAAfA,YAAe;AAAA,YACnBN,qBADmB;AAAA,IAArB;;AAIA;;;;;;;;;AASA,OAAMO,qBAAqB,SAArBA,kBAAqB;AAAA,YACzBF,2BADyB;AAAA,IAA3B;;AAIA;;;;;;;;AAQA,OAAMG,gBAAgB,SAAhBA,aAAgB,UAAW;AAC/B3E,aAAQ4E,kBAAR,CAA2B/C,OAA3B;AACA,YAAOnD,QAAQmG,kBAAR,CAA2BhD,OAA3B,CAAP;AACD,IAHD;;AAKA;;;;;;;AAOA,OAAMiD,WAAW,SAAXA,QAAW;AAAA,YAAM9E,QAAQ+E,gBAAR,EAAN;AAAA,IAAjB;;AAEA;;;;;;;AAOA,OAAMC,aAAa,SAAbA,UAAa;AAAA,YAAMhF,QAAQiF,kBAAR,EAAN;AAAA,IAAnB;;AAEA,UAAO;AACL/B,6BADK;AAELI,yCAFK;AAGLE,6BAHK;AAILE,yCAJK;AAKLoB,uBALK;AAMLE,2BANK;AAOLL,iCAPK;AAQLhB,2BARK;AASLM,mCATK;AAULC,mCAVK;AAWLN,uBAXK;AAYLE,uCAZK;AAaLW,+BAbK;AAcLN,6CAdK;AAeLC,2BAfK;AAgBLE,+CAhBK;AAiBLC,mDAjBK;AAkBLF,+CAlBK;AAmBLK,2CAnBK;AAoBLF;AApBK,IAAP;AAsBD,E;;;;;;;;;;;;;ACxXD;;AAEA;;;;mBAIe;AAAA,OAAGU,aAAH,QAAGA,aAAH;AAAA,OAAkBC,aAAlB,QAAkBA,aAAlB;AAAA,OAAiCnF,OAAjC,QAAiCA,OAAjC;AAAA,UAAgD;AAC7D;;;;;AAKAQ,oBAAe0E,cAAc5D,kBAAOf,cAArB,CAN8C;;AAQ7D;;;;;AAKAsE,yBAAoBK,cAAc5D,kBAAOC,oBAArB,CAbyC;;AAe7D;;;;;AAKA6D,sBAAiBD,cAAc7D,kBAAOE,iBAArB,EAAwC,YAAM;AAC7DxB,eAAQqF,WAAR;AACD,MAFgB;AApB4C,IAAhD;AAAA,E","file":"ext-bbm-contact-list-ng/scripts/ext-bbm-contact-list-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-avatar-ng\"), require(\"ui-bbm-scroll-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bbm-contact-list-ng\", [\"ui-bb-i18n-ng\", \"ui-bb-avatar-ng\", \"ui-bbm-scroll-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bbm-contact-list-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-avatar-ng\"), require(\"ui-bbm-scroll-ng\"));\n\telse\n\t\troot[\"ext-bbm-contact-list-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"ui-bb-avatar-ng\"], root[\"ui-bbm-scroll-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_20__, __WEBPACK_EXTERNAL_MODULE_33__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d55e1b15032dbd9fb9d3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-contact-list-ng/model.xml\n// module id = 0\n// module chunks = 3","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 8\n// module chunks = 0 1 2 3 4 5 6 11","module.exports = __WEBPACK_EXTERNAL_MODULE_20__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-avatar-ng\"\n// module id = 20\n// module chunks = 1 3 5 6","/**\n * @module ext-bbm-contact-list-ng\n *\n * @description\n * Mobile extension for a contact list in the Contacts widget.\n *\n * @example\n * <!-- Contact widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *   <value type=\"string\">ext-bbm-contact-list-ng</value>\n * </property>\n */\nimport uiBbAvatarKey from 'ui-bb-avatar-ng';\nimport uiBbmScrollKey from 'ui-bbm-scroll-ng';\nimport i18nKey from 'ui-bb-i18n-ng';\n\nimport extEvents from './events';\nimport extHelpers from './helpers';\nimport extIntents from './intents';\n\nexport const events = extEvents;\nexport const helpers = extHelpers;\nexport const intents = extIntents;\n\nexport const dependencyKeys = [\n  uiBbAvatarKey,\n  i18nKey,\n  uiBbmScrollKey,\n];\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-contact-list-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_33__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-scroll-ng\"\n// module id = 33\n// module chunks = 3","import {\n  Event,\n  SearchActions,\n  ToolbarButtonEvent,\n} from './constants';\n\n/**\n * Defines the min length for the search query\n * @type {number}\n * @inner\n */\nconst SEARCH_MIN_QUERY = 2;\n\n/**\n * Defines the debouncing time for a search to happen (in ms)\n * @type {number}\n * @inner\n */\nconst SEARCH_INPUT_THRESHOLD = 1000;\n\n/**\n * @description\n * Throttles some action by a given delay (threshold)\n *\n * @name throttle\n *\n * @param {function} fn - function to execute\n * @param {int} threshold - delay in execution (in ms)\n * @type {function}\n * @returns {function}\n * @inner\n */\nconst throttle = (fn, threshold) => {\n  let last;\n  let timeout;\n\n  return function throttledFn(...args) {\n    const context = this;\n    const now = Date.now();\n    const timeDifference = now - last;\n\n    if (last && timeDifference < threshold) {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        last = now;\n        fn.apply(context, args);\n      }, threshold - timeDifference);\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n};\n\nexport default ({ service, withNativeEvents, intents }) => {\n  /**\n   * @description\n   * Throttles and handles the search of contacts for the given search query\n   *\n   * @name onSearchInput\n   * @type {function}\n   * @inner\n   */\n  const onSearchInput = throttle(value => {\n    if (value.length >= SEARCH_MIN_QUERY) {\n      service.setSearchQuery(value);\n    }\n  }, SEARCH_INPUT_THRESHOLD);\n\n  return withNativeEvents(\n    {\n      [ToolbarButtonEvent.CREATE_CONTACT]: () => {\n        intents.createContact();\n      },\n      [ToolbarButtonEvent.SEARCH_CONTACT]: ({ detail }) => {\n        if (detail.action === SearchActions.INPUT) {\n          onSearchInput(detail.text);\n        } else if (detail.action === SearchActions.CANCEL) {\n          service.cancelSearch();\n        }\n      },\n    },\n    {\n      [Event.CONTACT_CREATE_DONE]: () => {\n        service.reloadContacts();\n      },\n      [Event.CONTACT_UPDATE_DONE]: () => {\n        service.reloadContacts();\n      },\n      [Event.CONTACT_DELETE_DONE]: () => {\n        service.reloadContacts();\n      },\n    }\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-contact-list-ng/scripts/events.js","/**\n * Defines widget search action enumeration\n * @enum {string}\n * @type {object}\n * @inner\n */\nexport const SearchActions = {\n  CANCEL: 'cancel',\n  INPUT: 'input',\n};\n\n/**\n * Toolbar button events enum\n * @name ToolbarButtonEvent\n * @type {Object}\n * @inner\n */\nexport const ToolbarButtonEvent = {\n  CREATE_CONTACT: 'bb.action.contact.create',\n  SEARCH_CONTACT: 'bb.event.contact.search',\n};\n\n/**\n * Intents enum\n * @name Intent\n * @type {Object}\n * @inner\n */\nexport const Intent = {\n  CREATE_CONTACT: 'intent.rbm.contact.create',\n  SHOW_CONTACT_DETAILS: 'intent.rbm.contact.details.show',\n  SHOW_CONTACT_LIST: 'intent.rbm.contact.list.show',\n};\n\n/**\n * Pubsub events\n * @name Event\n * @type {Object}\n * @inner\n */\nexport const Event = {\n  /**\n   * A contact was created on the server\n   * @event bb.event.contact.create.done\n   * @type {string}\n   */\n  CONTACT_CREATE_DONE: 'bb.event.contact.create.done',\n\n  /**\n   * A contact was updated on the server\n   * @event bb.event.contact.update.done\n   * @type {string}\n   */\n  CONTACT_UPDATE_DONE: 'bb.event.contact.update.done',\n\n  /**\n   * A contact was deleted on the server\n   * @event bb.event.contact.delete.done\n   * @type {string}\n   */\n  CONTACT_DELETE_DONE: 'bb.event.contact.delete.done',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-contact-list-ng/scripts/constants.js","/**\n * @param {string} strA\n * @param {string} strB\n * @returns {number}\n * @inner\n */\nconst compareStr = (strA, strB) => {\n  if (strA > strB) {\n    return 1;\n  } else if (strA < strB) {\n    return -1;\n  }\n  return 0;\n};\n\n/**\n * @param {Object} contact\n * @returns {string}\n * @private\n */\nconst getContactSortStr = contact => contact.name.toLowerCase();\n\n/**\n * Returns first letter of the Contact's name, uppercased\n * @param  {Object} contact Contact Object\n * @return {string} Contact's first letter\n * @inner\n */\nconst getContactNameChar = contact => (\n  contact.name\n    ? contact.name.charAt(0).toUpperCase()\n    : null\n);\n\n/**\n * @param {Array<Object>} contacts\n * @returns {Object}\n * @inner\n */\nfunction groupContacts(contacts) {\n  return contacts.reduce((result, contact) => {\n    const char = getContactNameChar(contact);\n\n    if (!result[char]) {\n      // Allow mutation of a local empty Object\n      // See: https://github.com/airbnb/javascript/issues/719\n      /* eslint-disable no-param-reassign */\n      result[char] = [];\n      /* eslint-enable no-param-reassign */\n    }\n\n    result[char].push(contact);\n\n    return result;\n  }, {});\n}\n\n/**\n * @name getContactsToDisplay\n * @description\n * Processes the list of contacts.\n *\n * @type {function}\n * @param {Array<Object>} contacts The original contacts from the API\n * @returns {Array<Object>} The list of processed contacts\n */\nconst getContactsToDisplay = contacts => {\n  const groups = groupContacts(contacts);\n\n  return Object.keys(groups)\n    .sort(compareStr)\n    .map(char => ({\n      contacts: groups[char].sort((contactA, contactB) => (\n        compareStr(\n          getContactSortStr(contactA),\n          getContactSortStr(contactB)\n        )\n      )),\n      char,\n    }));\n};\n\n/**\n * @description\n * Helpers for ext-bbm-contacts-list-ng.\n *\n * @name Helpers\n * @type {Object}\n */\nexport default ({ service, stateContainer, intents }) => {\n  /**\n   * @description\n   * Returns the `contacts` from the state\n   *\n   * @name Helpers#getContacts\n   * @type {function}\n   *\n   * @returns {Array} contacts List of contacts from the state\n   */\n  const getContacts = stateContainer.createSelector(\n    state => getContactsToDisplay(state.contacts.data)\n  );\n\n  /**\n   * @description\n   * Returns the `contacts` from the state\n   *\n   * @name Helpers#getContacts\n   * @type {function}\n   *\n   * @returns {Array} contacts List of contacts from the state\n   */\n  const getSearchContacts = stateContainer.createSelector(state => state.search.data);\n\n  /**\n   * @description\n   * Returns true if there are `contacts` on the state. Otherwise returns false.\n   *\n   * @name Helpers#hasContacts\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const hasContacts = stateContainer.createSelector(state => Boolean(\n    state.contacts.data &&\n    state.contacts.data.length > 0\n  ));\n\n  /**\n   * @description\n   * Returns true if there are searched `contacts` on the state. Otherwise returns false.\n   *\n   * @name Helpers#hasSearchContacts\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const hasSearchContacts = stateContainer.createSelector(state => Boolean(\n    state.search.data &&\n    state.search.data.length > 0\n  ));\n\n  /**\n   * @description\n   * Returns true if the preference is set to show an avatar. Otherwise returns false.\n   *\n   * @name Helpers#showAvatar\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showAvatar = stateContainer.createSelector(state => Boolean(state.showAvatar));\n\n  /**\n   * @description\n   * Returns true if the user is not searching. Otherwise returns false.\n   *\n   * @name Helpers#showAvatar\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showList = stateContainer.createSelector(state => Boolean(!state.searching));\n\n  /**\n   * @description\n   * Checks for initial loading.\n   *\n   * @name Helpers#showLoadingState\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showLoadingState = stateContainer.createSelector(state => Boolean(\n    state.contacts.loading &&\n    !state.contacts.data &&\n    !state.contacts.error\n  ));\n\n  /**\n   * @description\n   * Determines if the empty state view should be shown\n   *\n   * @name Helpers#showEmptyState\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showEmptyState = stateContainer.createSelector(state => Boolean(\n    !state.searching &&\n    Boolean(state.contacts.data && !state.contacts.data.length > 0) &&\n    !state.contacts.loading &&\n    !state.contacts.error\n  ));\n\n  /**\n   * @description\n   * Determines if the error state view should be shown\n   *\n   * @name Helpers#showErrorState\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showErrorState = stateContainer.createSelector(state => Boolean(\n    !state.searching &&\n    !state.contacts.loading &&\n    state.contacts.error\n  ));\n\n  /**\n   * @description\n   * Checks for the load more's loading state.\n   *\n   * @name Helpers#showLoadMoreLoading\n   * @type {function}\n   *\n   * @return {boolean}\n   */\n  const showLoadMoreLoading = stateContainer.createSelector(state => Boolean(\n    state.contacts.loading &&\n    state.contacts.data\n  ));\n\n  /**\n   * @description\n   * Determines if the search view should be shown\n   *\n   * @name Helpers#showSearch\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showSearch = stateContainer.createSelector(state => Boolean(state.searching));\n\n  /**\n   * @description\n   * Determines if the search error view should be shown\n   *\n   * @name Helpers#showSearchErrorState\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showSearchErrorState = stateContainer.createSelector(state => Boolean(\n    state.searching &&\n    state.search.error &&\n    !state.search.loading\n  ));\n\n  /**\n   * @description\n   * Determines if the search empty state view should be shown\n   *\n   * @name Helpers#showSearchEmptyState\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showSearchEmptyState = stateContainer.createSelector(state => Boolean(\n    state.searching &&\n    Boolean(state.search.data && !state.search.data.length > 0) &&\n    !state.search.error &&\n    !state.search.loading\n  ));\n\n  /**\n   * @description\n   * Determines if the search empty state view should be shown\n   *\n   * @name Helpers#showSearchLoadingState\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showSearchLoadingState = stateContainer.createSelector(state => Boolean(\n    state.searching &&\n    state.search.loading &&\n    !state.search.data &&\n    !state.search.error\n  ));\n\n  /**\n   * @description\n   * Checks for the load more's loading state.\n   *\n   * @name Helpers#showSearchLoadMoreLoading\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showSearchLoadMoreLoading = stateContainer.createSelector(state => Boolean(\n    state.searching &&\n    state.search.loading &&\n    state.search.data\n  ));\n\n  /**\n   * @description\n   * Checks if the load more message should be visible.\n   *\n   * @name Helpers#showLoadMore\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showLoadMore = () => (\n    showLoadMoreLoading()\n  );\n\n  /**\n   * @description\n   * Checks if the load more message should be visible.\n   *\n   * @name Helpers#showSearchLoadMore\n   * @type {function}\n   *\n   * @returns {boolean}\n   */\n  const showSearchLoadMore = () => (\n    showSearchLoadMoreLoading()\n  );\n\n  /**\n   * @description\n   * Sets the selected contact and fires the intent to show the contact details\n   *\n   * @name Helpers#selectContact\n   * @type {function}\n   * @param {Object} contact The contact to select\n   */\n  const selectContact = contact => {\n    service.setSelectedContact(contact);\n    return intents.showContactDetails(contact);\n  };\n\n  /**\n   * @description\n   * Loads more contacts\n   *\n   * @name Helpers#loadMore\n   * @type {function}\n   */\n  const loadMore = () => service.loadMoreContacts();\n\n  /**\n   * @description\n   * Loads more contacts for the active search query\n   *\n   * @name Helpers#searchMore\n   * @type {function}\n   */\n  const searchMore = () => service.searchMoreContacts();\n\n  return {\n    getContacts,\n    getSearchContacts,\n    hasContacts,\n    hasSearchContacts,\n    loadMore,\n    searchMore,\n    selectContact,\n    showAvatar,\n    showEmptyState,\n    showErrorState,\n    showList,\n    showLoadingState,\n    showLoadMore,\n    showLoadMoreLoading,\n    showSearch,\n    showSearchEmptyState,\n    showSearchLoadingState,\n    showSearchErrorState,\n    showSearchLoadMore,\n    showSearchLoadMoreLoading,\n  };\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-contact-list-ng/scripts/helpers.js","import { Intent } from './constants';\n\n/**\n * @name Intents\n * @type {Object}\n */\nexport default ({ createRequest, handleRequest, service }) => ({\n  /**\n   * @name Intents#createContact\n   * @description The intent to edit the contact\n   * @type {function}\n   */\n  createContact: createRequest(Intent.CREATE_CONTACT),\n\n  /**\n   * @name Intents#showContactDetails\n   * @description The intent to edit the contact\n   * @type {function}\n   */\n  showContactDetails: createRequest(Intent.SHOW_CONTACT_DETAILS),\n\n  /**\n   * @name Intents#showContactList\n   * @description Handles the intent to show the contact list\n   * @type {function}\n   */\n  showContactList: handleRequest(Intent.SHOW_CONTACT_LIST, () => {\n    service.setContacts();\n  }),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-contact-list-ng/scripts/intents.js"],"sourceRoot":""}