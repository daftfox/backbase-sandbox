{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6******************","webpack:///webpack/bootstrap 59b29c6361f41ebec32c?d678******************","webpack:///./ui-bb-credit-suggest-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01************","webpack:///external \"vendor-bb-angular\"?a114**********","webpack:///external \"ui-bb-iban-ng\"?26a5","webpack:///external \"ui-bb-avatar-ng\"?29da*","webpack:///external \"lib-bb-iban\"?bb02***","webpack:///./ui-bb-credit-suggest-ng/scripts/index.js","webpack:///external \"ui-bb-iban-autocomplete-search-ng\"","webpack:///external \"vendor-bb-uib-debounce\"","webpack:///external \"vendor-bb-uib-position\"","webpack:///external \"vendor-bb-uib-typeahead\"","webpack:///./ui-bb-credit-suggest-ng/scripts/component.js","webpack:///./ui-bb-credit-suggest-ng/scripts/constants.js","webpack:///./ui-bb-credit-suggest-ng/scripts/controller.js"],"names":["angular","module","vendorBbUibDebounceKey","vendorBbUibPositionKey","vendorBbUibTypeaheadKey","i18nNgKey","uiBbIbanNgKey","uiBbIBANAutocompleteSearch","uiBbAvatarKey","component","controller","name","bindings","accounts","messages","customTemplateId","allowExternal","getAccounts","formatAmountTemplateUrl","hideAccountNumber","config","modalSelectorContacts","modalSelectorAccounts","modalSelectorLoadMore","form","template","FORMAT_AMOUNT_TEMPLATE_URL","BENEFICIARY_LIST_SIZE","$element","$attrs","$filter","$templateCache","i18nFilter","GroupName","INTERNAL","EXTERNAL","ctrl","EMPTY_VALUE","bban","iban","isNew","ngModelCtrl","ibanInput","find","eq","isMyAccount","identifier","acc","external","validateIban","isIbanFocused","querySelector","value","isValid","$setValidity","filterByAccountOrContactName","list","search","filter","it","toLowerCase","indexOf","contactPerson","accountName","filterByIban","item","IBAN","replace","filterByBban","BBAN","addGroupHeaders","normalisedAccounts","totalItemsCount","internalGroup","account","length","group","externalGroup","sort","a","b","push","more","count","filterAccounts","options","filterBy","size","searchQuery","filteredAccounts","forEach","Object","assign","filteredBy","formatIban","Promise","resolve","totalItems","data","slice","clearSelected","selected","searchModel","isSearchModelEmpty","setSearchModelValue","newValue","$doCheck","$setPristine","$setViewValue","selectedSetter","setTimeout","triggerHandler","element","document","$postLink","formatAmountTemplate","get","put","$onChanges","isListed","toggleModalSelector","isModalSelectorOpen","$formatters","credit","undefined","filterInFocus","ibanInFocus","markIbanStatus"],"mappings":"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","file":"ui-bb-credit-suggest-ng/scripts/ui-bb-credit-suggest-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"vendor-bb-angular\"), require(\"ui-bb-iban-ng\"), require(\"ui-bb-avatar-ng\"), require(\"lib-bb-iban\"), require(\"ui-bb-iban-autocomplete-search-ng\"), require(\"vendor-bb-uib-debounce\"), require(\"vendor-bb-uib-position\"), require(\"vendor-bb-uib-typeahead\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-credit-suggest-ng\", [\"ui-bb-i18n-ng\", \"vendor-bb-angular\", \"ui-bb-iban-ng\", \"ui-bb-avatar-ng\", \"lib-bb-iban\", \"ui-bb-iban-autocomplete-search-ng\", \"vendor-bb-uib-debounce\", \"vendor-bb-uib-position\", \"vendor-bb-uib-typeahead\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-credit-suggest-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"vendor-bb-angular\"), require(\"ui-bb-iban-ng\"), require(\"ui-bb-avatar-ng\"), require(\"lib-bb-iban\"), require(\"ui-bb-iban-autocomplete-search-ng\"), require(\"vendor-bb-uib-debounce\"), require(\"vendor-bb-uib-position\"), require(\"vendor-bb-uib-typeahead\"));\n\telse\n\t\troot[\"ui-bb-credit-suggest-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"vendor-bb-angular\"], root[\"ui-bb-iban-ng\"], root[\"ui-bb-avatar-ng\"], root[\"lib-bb-iban\"], root[\"ui-bb-iban-autocomplete-search-ng\"], root[\"vendor-bb-uib-debounce\"], root[\"vendor-bb-uib-position\"], root[\"vendor-bb-uib-typeahead\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_45__, __WEBPACK_EXTERNAL_MODULE_71__, __WEBPACK_EXTERNAL_MODULE_93__, __WEBPACK_EXTERNAL_MODULE_156__, __WEBPACK_EXTERNAL_MODULE_157__, __WEBPACK_EXTERNAL_MODULE_158__, __WEBPACK_EXTERNAL_MODULE_159__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59b29c6361f41ebec32c","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-credit-suggest-ng/model.xml\n// module id = 0\n// module chunks = 19","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 8 9 10 11 12 13 14 19 24","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 18\n// module chunks = 0 8 9 10 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33","module.exports = __WEBPACK_EXTERNAL_MODULE_45__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-iban-ng\"\n// module id = 45\n// module chunks = 3 19 24","module.exports = __WEBPACK_EXTERNAL_MODULE_71__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-avatar-ng\"\n// module id = 71\n// module chunks = 6 7 19","module.exports = __WEBPACK_EXTERNAL_MODULE_93__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-iban\"\n// module id = 93\n// module chunks = 9 10 13 14 19 25","/**\n * @module ui-bb-credit-suggest-ng\n * @description\n * Credit suggest input UI component\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbCreditSuggestKey from 'ui-bb-credit-suggest-ng';\n *\n * export const dependencyKeys = [\n *   uiBbCreditSuggestKey,\n * ];\n *\n * // file: templates/template.ng.html\n * <ui-bb-credit-suggest-ng\n *   name=\"credit\"\n *   data-ng-model=\"$ctrl.payment.to\"\n *   data-accounts=\"$ctrl.accountsTo\"\n *   data-iban-validation-classes\n *   required\n * ></ui-bb-credit-suggest-ng>\n */\n\nimport angular from 'vendor-bb-angular';\nimport uiBbIbanNgKey from 'ui-bb-iban-ng';\nimport uiBbIBANAutocompleteSearch from 'ui-bb-iban-autocomplete-search-ng';\nimport vendorBbUibDebounceKey from 'vendor-bb-uib-debounce';\nimport vendorBbUibPositionKey from 'vendor-bb-uib-position';\nimport vendorBbUibTypeaheadKey from 'vendor-bb-uib-typeahead';\nimport uiBbAvatarKey from 'ui-bb-avatar-ng';\nimport i18nNgKey from 'ui-bb-i18n-ng';\n\nimport component from './component';\nimport controller from './controller';\n\nexport default angular\n  .module('ui-bb-credit-suggest-ng', [\n    vendorBbUibDebounceKey,\n    vendorBbUibPositionKey,\n    vendorBbUibTypeaheadKey,\n    i18nNgKey,\n    uiBbIbanNgKey,\n    uiBbIBANAutocompleteSearch,\n    uiBbAvatarKey,\n  ])\n  .component('uiBbCreditSuggestNg', component)\n  .controller('uiBBCreditSuggestNgController',\n    ['$element', '$attrs', '$filter', '$templateCache', controller])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_156__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-iban-autocomplete-search-ng\"\n// module id = 156\n// module chunks = 19","module.exports = __WEBPACK_EXTERNAL_MODULE_157__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-debounce\"\n// module id = 157\n// module chunks = 19","module.exports = __WEBPACK_EXTERNAL_MODULE_158__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-position\"\n// module id = 158\n// module chunks = 19","module.exports = __WEBPACK_EXTERNAL_MODULE_159__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-typeahead\"\n// module id = 159\n// module chunks = 19","import { FORMAT_AMOUNT_TEMPLATE_URL } from './constants';\n\n/**\n * @name uiBBCreditSuggest\n * @type {object}\n *\n * @property {object[]} accounts List of accounts to filter and select with user input\n * @property {object} messages Localized messages\n * @property {string} custom-template-id Template ID (or URL)\n * which will be rendered as an option in dropdown\n * @property {boolean} allow-external Are external accounts included in list.\n * If not, IBAN field stays disabled\n * @property {boolean} hide-account-number\n * Hides account number (bban) and searching by bban functionality\n * @property {function} get-accounts\n * External method for transform accounts array into custom structure\n * Can be defined in extensions helpers\n * @property {void} iban-validation-classes Append has-success and has-error classes\n * to IBAN field on validation\n * @property {?String} formatAmountTemplateUrl Custom template url for popup element.\n */\nconst component = {\n  bindings: {\n    accounts: '<',\n    /**\n     * @description\n     * List of messages to be shown by component\n     *\n     * @name uiBBCreditSuggest#messages\n     * @type {object} messages\n     */\n    messages: '<',\n    /**\n     * @description\n     * Template ID (or URL) which will be rendered\n     * as an option in dropdown\n     *\n     * @name uiBBCreditSuggest#customTemplateId\n     * @type {string} customTemplateId\n     */\n    customTemplateId: '@',\n    allowExternal: '<',\n    getAccounts: '&',\n    formatAmountTemplateUrl: '@?',\n    hideAccountNumber: '<?',\n    config: '<',\n    modalSelectorContacts: '<',\n    modalSelectorAccounts: '<',\n    modalSelectorLoadMore: '&',\n    form: '<',\n  },\n  controller: 'uiBBCreditSuggestNgController',\n  template: `\n    <div class=\"credit-suggest has-feedback\">\n      <div class=\"form-group\"\n        data-ng-class=\"{ 'is-invalid': $ctrl.form.creditName.$error.required &&\n          $ctrl.form.showSpecialValidationMessages }\">\n        <label data-i18n-key=\"form.label.name\"></label>\n        <span data-i18n-key=\"form.label.required\" class=\"text-muted\"></span>\n        <div class=\"input-group col-12 p-0\">\n\n          <ui-bb-autocomplete-search-ng\n            name=\"creditName\"\n            class=\"col-12 p-0\"\n            data-ng-required=\"true\"\n            data-label-key=\"name\"\n            data-ng-model=\"$ctrl.searchModel.name\"\n            data-search-min-length=\"$ctrl.config.searchMinLength\"\n            data-load-result=\"$ctrl.filterAccounts(options, 'name')\"\n            data-ng-model-options=\"{\n              getterSetter: true,\n              allowInvalid: true\n            }\"\n            data-on-select=\"$ctrl.selectedSetter($model)\"\n            data-on-clear=\"$ctrl.clearSelected()\"\n            data-search-box-config=\"{\n              labels: { placeholder: $ctrl.messages.filterPlaceholder },\n              iconClasses: $ctrl.config.isModal ? 'fa fa-address-book' : 'fa fa-chevron-down',\n              submitSearchCustom: $ctrl.config.isModal,\n            }\"\n            data-submit-search-custom=\"$ctrl.toggleModalSelector()\"\n            data-match-template-url=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\"\n            data-messages=\"{\n                result: $ctrl.messages.oneResultFound,\n                results: $ctrl.messages.resultsFound\n              }\"\n            data-role=\"ui-bb-credit-suggest-ng-name\">\n          </ui-bb-autocomplete-search-ng>\n          \n          <div data-ng-show=\"$ctrl.form.showSpecialValidationMessages\"\n               data-ng-messages=\"$ctrl.form.creditName.$error\" role=\"alert\" class=\"text-danger\">\n            <div data-ng-message=\"required\" data-i18n-key=\"form.error.required\"\n                 data-role=\"ext-bus-initiate-payment-ng-credit-name-required-error\"></div>\n          </div>\n          \n          <ui-bb-char-counter-ng\n            data-state=\"$ctrl.nameCreditCounterState\"\n            data-config=\"{ blockTyping: true,\n              maxChars: 140, initStyling: 'd-none' }\"\n            data-text-el-query=\"ui-bb-autocomplete-search-ng[data-label-key=name] input\">\n          </ui-bb-char-counter-ng>\n\n          <!-- Modal beneficiary select -->\n          <ui-bus-beneficiary-select-modal-ng\n            data-ng-if=\"$ctrl.config.isModal\"\n            data-is-open=\"$ctrl.isModalSelectorOpen\"\n            data-on-select=\"$ctrl.selectedSetter(account)\"\n            data-load-more=\"$ctrl.modalSelectorLoadMore({params})\"\n            data-contacts=\"$ctrl.modalSelectorContacts\"\n            data-accounts=\"$ctrl.modalSelectorAccounts\"\n            data-config=\"{\n             labels: {\n               headerText: $ctrl.messages.modalHeaderText,\n               contactsTab: $ctrl.messages.modalContactsTab,\n               ownAccountsTab: $ctrl.messages.modalOwnAccountsTab,\n               noSearchResults: $ctrl.messages.modalNoSearchResults,\n               placeholderContacts: $ctrl.messages.modalPlaceholderContacts,\n               placeholderAccounts: $ctrl.messages.modalPlaceholderAccounts,\n               outOf: $ctrl.messages.modalOutOf,\n             },\n             pageSize: $ctrl.config.modalPageSize,\n            }\"\n          >\n          </ui-bus-beneficiary-select-modal-ng>\n\n        </div>\n      </div>\n      <div class=\"form-group\"\n           data-ng-class=\"{ 'is-invalid': $ctrl.form.creditIban.$error.required &&\n             $ctrl.form.showSpecialValidationMessages || $ctrl.form.credit.$error.iban }\">\n        <label data-i18n-key=\"form.label.iban\"></label>\n        <span data-i18n-key=\"form.label.required\" class=\"text-muted\"></span>\n        <ui-bb-iban-autocomplete-search-ng\n          name=\"creditIban\"\n          data-ng-required=\"!$ctrl.searchModel.BBAN\"\n          data-label-key=\"IBAN\"\n          data-disabled=\"$ctrl.searchModel.BBAN\"\n          data-search-min-length=\"3\"\n          data-ng-model=\"$ctrl.searchModel.IBAN\"\n          data-ng-model-options=\"{\n            getterSetter: true,\n            allowInvalid: false\n          }\"\n          data-load-result=\"$ctrl.filterAccounts(options, 'iban')\"\n          data-on-select=\"$ctrl.selectedSetter($model)\"\n          data-on-clear=\"$ctrl.clearSelected()\"\n          data-search-box-config=\"{\n             showIcon : false,\n             hideButton : true,\n             maxlength: 44,\n             inputClasses: 'initialism',\n             labels: { placeholder: $ctrl.messages.accountPlaceholder },\n           }\"\n          data-match-template-url=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\"\n          data-messages=\"{\n              result: $ctrl.messages.oneResultFound,\n              results: $ctrl.messages.resultsFound,\n              noResults: $ctrl.messages.noResultsFound,\n          }\"\n          data-role=\"ui-bb-credit-suggest-ng-iban\">\n        </ui-bb-iban-autocomplete-search-ng>\n\n        <div data-ng-messages=\"$ctrl.form.credit.$error\" role=\"alert\" class=\"text-danger\">\n          <div data-ng-message=\"iban\" data-i18n-key=\"form.credit.iban\"\n            data-role=\"ext-bus-initiate-payment-ng-form-creditor-iban-error-message\"></div>\n          <div data-ng-message=\"credit\" data-i18n-key=\"form.credit.select\"\n            data-role=\"ext-bus-initiate-payment-ng-form-creditor-select-error-message\"></div>\n        </div>\n        <div data-ng-show=\"$ctrl.form.showSpecialValidationMessages\"\n          data-ng-messages=\"$ctrl.form.creditIban.$error\" role=\"alert\" class=\"text-danger\">\n          <div data-ng-message=\"required\" data-i18n-key=\"form.error.required\"\n            data-role=\"ext-bus-initiate-payment-ng-form-credit-name-required-error\"></div>\n        </div>\n        \n        <ui-bb-char-counter-ng\n          data-state=\"$ctrl.ibanCreditCounterState\"\n          data-config=\"{ blockTyping: true,\n            maxChars: 34, excludeSpaces: true, initStyling: 'd-none' }\"\n          data-text-el-query=\"ui-bb-iban-autocomplete-search-ng[data-label-key=IBAN] input\">\n        </ui-bb-char-counter-ng>\n        \n      </div>\n      <div class=\"form-group\"\n        data-ng-if=\"!$ctrl.hideAccountNumber\">\n        <label data-i18n-key=\"form.label.accountnumber\"></label>\n        <ui-bb-autocomplete-search-ng\n          data-ng-required=\"!$ctrl.searchModel.IBAN\"\n          data-disabled=\"$ctrl.searchModel.IBAN\"\n          data-label-key=\"BBAN\"\n          data-ng-model=\"$ctrl.searchModel.BBAN\"\n          data-ng-model-options=\"{\n            getterSetter: true,\n            allowInvalid: true\n          }\"\n          data-load-result=\"$ctrl.filterAccounts(options, 'bban')\"\n          data-on-select=\"$ctrl.selectedSetter($model)\"\n          data-on-clear=\"$ctrl.clearSelected()\"\n          data-search-box-config=\"{\n            showIcon : false,\n            hideButton : true,\n            labels: { placeholder: $ctrl.messages.accountnumberPlaceholder },\n            forcedSubmit: false,\n          }\"\n          data-match-template-url=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\"\n          data-messages=\"{\n            result: $ctrl.messages.oneResultFound,\n            results: $ctrl.messages.resultsFound\n          }\"\n          data-role=\"ui-bb-credit-suggest-ng-account-number\">\n        </ui-bb-autocomplete-search-ng>\n\n      </div>\n    </div>\n\n    <script type=\"text/ng-template\" id=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\">\n      <!-- Group Name / Header -->\n      <p\n        class=\"h6 m-0\"\n        data-ng-if=\"match.model.group\"\n        data-ng-bind-html=\"match.model.group\"\n        data-role=\"ui-bb-credit-suggest-ng-search-result-header\">\n      </p>\n\n      <!-- List item content -->\n      <div class=\"row\" data-ng-if=\"!match.model.group\">\n        <div class=\"col-8\">\n          <span\n            data-ng-if=\"match.model.name\"\n            data-ng-bind-html=\"match.model.filteredBy == 'name' ?\n            (match.model.name | uibTypeaheadHighlight:query) : match.model.name\"\n            data-role=\"ui-bb-credit-suggest-ng-search-result-account-name\"\n            class=\"text-truncate\">\n          </span>\n          <span data-ng-if=\"match.model.accountName\"> &mdash; \n            <span data-ng-bind-html=\"match.model.accountName | uibTypeaheadHighlight:query\"></span>\n          </span>\n\n          <div\n            data-ng-bind-html=\"match.model.filteredBy === 'iban'\n            || match.model.filteredBy === 'bban' ?\n            (match.model.formatIban(match.model.identifier) | uibTypeaheadHighlight:query) : \n            match.model.formatIban(match.model.identifier)\"\n            data-role=\"ui-bb-credit-suggest-ng-search-result-iban\"\n            class=\"text-truncate text-muted\">\n          </div>\n        </div>\n\n        <div\n          class=\"col-4 d-flex align-items-center justify-content-end\"\n          data-ng-if=\"match.model.amount\" >\n          <div\n            class=\"text-primary\"\n            data-ng-include=\"'${FORMAT_AMOUNT_TEMPLATE_URL}'\"\n            data-ng-init=\"$option=match.model\">\n          </div>\n        </div>\n      </div>\n\n      <!-- More items indicator -->\n      <div\n        class=\"text-center py-1\"\n        data-ng-if=\"match.model.more\"\n        data-ng-bind-html=\"match.model.more\">\n      </div>\n    </script>\n\n    <script type=\"text/ng-template\" id=\"${FORMAT_AMOUNT_TEMPLATE_URL}\">\n      <ui-bb-format-amount\n        class=\"float-right search-result-ammount\"\n        data-amount=\"$option.amount\"\n        data-currency=\"$option.currency\"\n        data-wrap>\n      </ui-bb-format-amount>\n    </script>\n  `,\n};\n\nexport default component;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/component.js","export const FORMAT_AMOUNT_TEMPLATE_URL = 'ui-bb-credit-suggest-ng/format-amount-template.html';\n\n/**\n * @name BENEFICIARY_LIST_SIZE\n * @type {number}\n * @description\n * Max number of item that should be visible in beneficiary account seleter listbox\n */\nexport const BENEFICIARY_LIST_SIZE = 10;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/constants.js","/* globals document */\nimport angular from 'vendor-bb-angular';\nimport { isValidIBAN, formatByGroups } from 'lib-bb-iban';\nimport {\n  FORMAT_AMOUNT_TEMPLATE_URL,\n  BENEFICIARY_LIST_SIZE,\n} from './constants';\n\n/**\n * @name uiBbCreditSuggestController\n * @ngkey uiBbCreditSuggestController\n * @type {object}\n * @description\n * Credit suggest component controller.\n */\nexport default function controller($element, $attrs, $filter, $templateCache) {\n  const i18nFilter = $filter('i18n');\n\n  const GroupName = {\n    INTERNAL: i18nFilter('ui-bb-credit-suggest-ng.group.internal'),\n    EXTERNAL: i18nFilter('ui-bb-credit-suggest-ng.group.external'),\n  };\n\n  const ctrl = {};\n\n  const EMPTY_VALUE = {\n    name: '',\n    bban: '',\n    iban: '',\n    isNew: true,\n  };\n\n  const ngModelCtrl = $element.controller('ngModel');\n  const ibanInput = $element.find('input').eq(1);\n\n  const isMyAccount = (identifier) =>\n    ctrl.accounts && !!ctrl.accounts.find(acc => !acc.external && acc.identifier === identifier);\n\n  /**\n   * @description\n   * Checks if iban should be validated, and if so, sets the result on model.\n   *\n   * @name uiBbCreditSuggestController#validateIban\n   * @inner\n   * @param {string} iban to be validated\n   * @type {function} validateIban\n   */\n  const validateIban = () => {\n    const isIbanFocused = $element[0].querySelector('input:focus') === ibanInput[0];\n    /* ctrl.searchmodel.IBAN is not reflecting the current state of the IBAN value in all cases,\n       so grap by value */\n    const iban = ibanInput[0].value;\n\n    const isValid =\n      !iban ||\n      isIbanFocused ||\n      isMyAccount(iban) ||\n      isValidIBAN(iban);\n\n    ngModelCtrl.$setValidity('iban', isValid);\n    return isValid;\n  };\n\n  const filterByAccountOrContactName = (list, search) =>\n    list.filter(it => (\n      (it.name && it.name.toLowerCase().indexOf(search.toLowerCase()) !== -1) ||\n      (it.contactPerson && it.contactPerson.toLowerCase().indexOf(search.toLowerCase()) !== -1) ||\n      (it.accountName && it.accountName.toLowerCase().indexOf(search.toLowerCase()) !== -1))\n    );\n\n  const filterByIban = (list, search) =>\n    list.filter(item => (item.IBAN &&\n    (item.IBAN.toLowerCase().replace(/\\s/g, '').indexOf(\n      search.toLowerCase().replace(/\\s/g, '')) !== -1))\n    );\n\n  const filterByBban = (list, search) =>\n    list.filter(item => (!item.IBAN && item.BBAN &&\n    (item.BBAN.toLowerCase().replace(/\\s/g, '').indexOf(\n      search.toLowerCase().replace(/\\s/g, '')) !== -1))\n    );\n\n  /**\n   * @description\n   * Restructure the normalized accounts' list by adding an extra item to that list\n   * just before the start of each group of accounts,that extra item\n   * represents the group like the following\n   *\n   * So:\n   *  [\n   *    {name: 'Joost', id:'1', external: true},\n   *    {name: 'SomeInternal', id:'3'},\n   *    {name: 'Joost', id:'4', external: true}\n   *  ]\n   *\n   * Will be:\n   *  [\n   *    {group: 'GroupName.INTERNAL'} // start of the INTERNAL group\n   *    {name: 'SomeInternal', id:'3'},\n   *    {group: 'GroupName.EXTERNAL'} // start of the EXTERNAL group\n   *    {name: 'Joost', id:'1'},\n   *    {name: 'Joost', id:'4'},\n   *  ]\n   *\n   * @name uiBbCreditSuggestController#addGroupHeaders\n   * @inner\n   * @param {array} normalisedAccounts\n   * @param {number} totalItemsCount\n   * @type {function} addGroupHeaders\n   */\n  const addGroupHeaders = (normalisedAccounts, totalItemsCount) => {\n    // accounts without external:true are considered internal\n    let internalGroup = normalisedAccounts.filter(account => !account.external);\n\n    if (internalGroup.length) {\n      internalGroup = [\n        { group: GroupName.INTERNAL },\n        ...internalGroup,\n      ];\n    }\n\n    let externalGroup = normalisedAccounts.filter(account => account.external);\n    // sort on name then within that on accountName. Two statements for readability\n    if (externalGroup.length) {\n      externalGroup.sort((a, b) => (a.name < b.name ? -1 : 1));\n      externalGroup.sort((a, b) => {\n        if (a.name === b.name) {\n          if (a.accountName < b.accountName) return -1;\n          return 1;\n        }\n        return 0;\n      });\n    }\n\n    if (externalGroup.length) {\n      externalGroup = [\n        { group: GroupName.EXTERNAL },\n        ...externalGroup,\n      ];\n    }\n\n    const list = [...internalGroup, ...externalGroup];\n\n    // add extra item as indicator for more results\n    if (totalItemsCount > BENEFICIARY_LIST_SIZE) {\n      list.push({\n        more: i18nFilter('ui-bb-credit-suggest-ng.group.more', {\n          count: (totalItemsCount - BENEFICIARY_LIST_SIZE), // count remaining items\n        }),\n      });\n    }\n\n    return list;\n  };\n\n  /**\n   * @description\n   * Filters accounts by name\n   * Called by the uiBBAutocomplete load-result - uses as a data composer for accounts\n   *\n   * @name uiBbCreditSuggestController#filterAccounts\n   * @type {function}\n   * @param {object} options as provided by uiBBAutocomplete, we only use searchQuery prop\n   * @param {string} filterBy specifies which field triggers filtering (name, iban or bban).\n   * @param {number} [size=10] - Number of returned items\n   */\n  const filterAccounts = (options, filterBy, size = 10) => {\n    if (options && options.searchQuery) {\n      const normalisedAccounts = ctrl.getAccounts({ accounts: ctrl.accounts }) || ctrl.accounts;\n\n      let filteredAccounts;\n      if (filterBy === 'iban') {\n        filteredAccounts = filterByIban(normalisedAccounts, options.searchQuery);\n      } else if (filterBy === 'bban') {\n        filteredAccounts = filterByBban(normalisedAccounts, options.searchQuery);\n      } else {\n        filteredAccounts = filterByAccountOrContactName(normalisedAccounts, options.searchQuery);\n      }\n\n      filteredAccounts.forEach((item) => Object.assign(item, {\n        filteredBy: filterBy,\n        formatIban: (acc) => (isValidIBAN(acc) ? formatByGroups(acc) : acc),\n      }));\n      return Promise.resolve({\n        totalItems: filteredAccounts.length,\n        data: addGroupHeaders(filteredAccounts.slice(0, size), filteredAccounts.length),\n      });\n    // eslint-disable-next-line no-else-return\n    } else {\n      const normalisedAccounts = ctrl.getAccounts({ accounts: ctrl.accounts }) || ctrl.accounts;\n      return Promise.resolve({\n        totalItems: normalisedAccounts.length,\n        data: addGroupHeaders(normalisedAccounts.slice(0, size), normalisedAccounts.length),\n      });\n    }\n  };\n\n    /**\n   * @description\n   * Clears the selected beneficiary account\n   *\n   * @name uiBbCreditSuggestController#$clearSelected\n   * @inner\n   * @type {function} clearSelected\n   */\n  const clearSelected = () => {\n    ctrl.selected = Object.assign({}, EMPTY_VALUE);\n    ctrl.searchModel = {\n      name: null,\n      IBAN: null,\n      BBAN: null,\n    };\n  };\n\n  /**\n   * @name uiBbCreditSuggestController#isSearchModelEmpty\n   * @inner\n   * @description\n   * Checks if the search model is empty\n   *\n   * @param {Object} searchModel Search model reference\n   * @returns {boolean}\n   */\n  const isSearchModelEmpty = searchModel =>\n    !searchModel.name && !searchModel.IBAN && !searchModel.BBAN;\n\n  /**\n   * @name uiBbCreditSuggestController#setSearchModelValue\n   * @inner\n   * @description\n   * Sets search model with new values\n   *\n   * @param {Object} newValue New search model object\n   */\n  const setSearchModelValue = newValue => {\n    if (newValue.IBAN || ctrl.hideAccountNumber) {\n      ctrl.searchModel.IBAN = newValue.IBAN;\n      ctrl.searchModel.BBAN = '';\n    } else {\n      ctrl.searchModel.BBAN = newValue.BBAN;\n      ctrl.searchModel.IBAN = '';\n    }\n    ctrl.searchModel.name = newValue.name;\n  };\n\n  /**\n   * @description\n   * Default angular function running on digest cycle\n   * Applies selected credit to model.\n   *\n   * @name uiBbCreditSuggestController#$doCheck\n   * @type {function} $doCheck\n   */\n  const $doCheck = () => {\n    const selected = ctrl.selected;\n\n    /* IBAN could be set from autosearch selection callback, manually by user, via clear\n       function or could be initially set via edit drafs/edit payment. So on-blur is not enough,\n       and the on-change call is not working icw the ui-bb-autocomplete-search-ng component so\n       include this cheap check action within every cycle.\n    */\n    validateIban();\n\n    if (selected) {\n      if (isSearchModelEmpty(ctrl.searchModel)) {\n        setSearchModelValue(selected);\n      } else {\n        selected.IBAN = ctrl.searchModel.IBAN ? ctrl.searchModel.IBAN : '';\n        selected.BBAN = ctrl.searchModel.BBAN ? ctrl.searchModel.BBAN : '';\n        selected.identifier = ctrl.searchModel.IBAN === null ?\n          selected.identifier : ctrl.searchModel.IBAN.replace(/\\s+/g, '') ||\n          (ctrl.searchModel.BBAN && ctrl.searchModel.BBAN.replace(/\\s+/g, ''));\n        ctrl.selected.name = ctrl.searchModel.name === null ?\n          selected.name : ctrl.searchModel.name;\n      }\n    } else {\n      ngModelCtrl.$setPristine();\n      clearSelected();\n    }\n\n    ngModelCtrl.$setViewValue(selected);\n  };\n\n  /**\n   * @description\n   * Sets the beneficiary account\n   *\n   * @name uiBbCreditSuggestController#$selectedSetter\n   * @type {function} selectedSetter\n   */\n  const selectedSetter = (newValue) => {\n    if (newValue || typeof newValue === 'object') {\n      ctrl.selected = Object.assign({}, newValue);\n      setSearchModelValue(newValue);\n\n      setTimeout(() => {\n        // Trigger IBAN format on item select (via DOM event)\n        ibanInput.triggerHandler('keyup');\n\n        // Close dropdown on select - in case of program selecting (draft)\n        angular.element(document).triggerHandler('click');\n      });\n    }\n\n    return ctrl.selected;\n  };\n\n  /**\n   * @description\n   * Called after this controller's element and its children have been linked\n   * Initialize necessary functionality\n   *\n   * @name uiBbCreditSuggestController#$postLink\n   * @type {function} $postLink\n   */\n  const $postLink = () => {\n    if (ctrl.formatAmountTemplateUrl) {\n      const formatAmountTemplate = $templateCache.get(ctrl.formatAmountTemplateUrl);\n      $templateCache.put(FORMAT_AMOUNT_TEMPLATE_URL, formatAmountTemplate);\n    }\n  };\n\n  /**\n   * @description\n   * Called after in case of binding changes\n   *\n   * @name uiBbCreditSuggestController#$onChanges\n   * @type {function} $onChanges\n   */\n  const $onChanges = () => {\n    if (ctrl.selected && ctrl.accounts) {\n      const isListed = ctrl.accounts.filter(item => item.name === ctrl.selected.name && (\n        item.identifier === ctrl.selected.IBAN || item.identifier === ctrl.selected.BBAN ||\n        (item.accounts && item.accounts.length && item.accounts.filter(acc =>\n          acc.identifier === ctrl.selected.IBAN || acc.identifier === ctrl.selected.BBAN))\n      )).length;\n\n      if (isListed) {\n        selectedSetter(ctrl.selected);\n      }\n    }\n  };\n\n  /**\n   * @description\n   * Toggle modal selector popup visibility (show/hide)\n   *\n   * @name uiBbCreditSuggestController#toggleModalSelector\n   * @type {function}\n   */\n  const toggleModalSelector = () => {\n    ctrl.isModalSelectorOpen = !ctrl.isModalSelectorOpen;\n  };\n\n  ngModelCtrl.$formatters.push((credit) => {\n    ctrl.selected = credit;\n  });\n\n  Object.assign(ctrl, {\n    // models\n    /**\n     * @name uiBbCreditSuggestController#selected\n     * @type {AccountView} selected\n     */\n    selected: undefined,\n    searchModel: {},\n    selectedSetter,\n\n    // methods\n    $postLink,\n    $doCheck,\n    $onChanges,\n    filterAccounts,\n    validateIban,\n    clearSelected,\n    toggleModalSelector,\n\n    // flags\n    filterInFocus: false,\n    ibanInFocus: false,\n    markIbanStatus: false,\n    isModalSelectorOpen: null,\n  });\n\n  return ctrl;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/controller.js"],"sourceRoot":""}