{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6***","webpack:///webpack/bootstrap 59b29c6361f41ebec32c?d678***","webpack:///./ext-bbm-initiate-payment-form-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01***","webpack:///external \"vendor-bb-angular-ng-messages\"?7dc7*","webpack:///external \"ui-bb-format-amount-ng\"?8f72*","webpack:///./ext-bbm-initiate-payment-form-ng/scripts/index.js","webpack:///external \"ui-bb-iban-ng\"","webpack:///external \"ui-bbm-amount-field-ng\"","webpack:///external \"ui-bbm-beneficiary-select-ng\"","webpack:///external \"ui-bbm-switch-ng\"","webpack:///external \"ui-bbm-textfield-ng\"","webpack:///./ext-bbm-initiate-payment-form-ng/scripts/helpers.js","webpack:///external \"lib-bbm-plugins\"","webpack:///./ext-bbm-initiate-payment-form-ng/scripts/events.js","webpack:///./ext-bbm-initiate-payment-form-ng/scripts/intents.js","webpack:///./ext-bbm-initiate-payment-form-ng/scripts/constants.js","webpack:///./ext-bbm-initiate-payment-form-ng/styles/index.css?aef9","webpack:///./ext-bbm-initiate-payment-form-ng/styles/index.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js"],"names":["events","extEvents","helpers","extHelpers","intents","extIntents","dependencyKeys","uiBbFormatAmountKey","uiBbI18nKey","uiBbIbanKey","uiBbmAmountFieldKey","uiBbmBeneficiarySelectKey","uiBbmSwitchKey","uiBbmTextfieldKey","vendorBbAngularNgMessagesKey","RecurrenceEnding","NEVER","ON","AFTER","TransferFrequency","ONCE","DAILY","WEEKLY","MONTHLY","QUARTERLY","YEARLY","TransferFrequencyMessage","isToday","date","Date","dateStr","today","getDate","getMonth","getFullYear","$filter","service","stateContainer","dateFilter","i18n","RecurrenceEndingString","schedule","repeat","endDate","getScheduleFrequencyString","transferFrequency","getScheduleEndingString","end","getScheduleStartDateString","startDate","showUrgentPaymentInfo","alertDialog","plugins","AlertDialog","infoOptions","title","message","buttons","type","ButtonType","NEUTRAL","text","callbackFn","show","isRecurring","getAccountDisplayAmount","account","primaryValue","amount","getAccountDisplayName","alias","name","getPayment","createSelector","state","payment","data","getSchedule","getAllBeneficiaries","beneficiaries","contacts","creditAccounts","getDebitAccount","debitAccount","getDebitAccountCurrency","currency","getDebitAccountIdentifier","identifier","getDebitAccountDisplayAmount","getDebitAccountDisplayName","hasDebitAccount","Boolean","showSaveContact","form","beneficiary","$valid","canSaveContact","getScheduleSummary","startingFrom","frequency","ending","isCreateBeneficiaryAllowed","externalTransferAllowed","showUrgentToggle","getPreferences","urgent","isAllowed","isUrgentPaymentAllowed","setUrgentPayment","onUrgentPaymentInfoClick","isPaymentFormValid","makePayment","saveContactIfNeeded","makePaymentWithAuthorization","then","resetPayment","submitPayment","setPayment","reviewStep","showReview","onPaymentFormSubmit","$setUntouched","selectBeneficiary","setBeneficiary","prepareBeneficiaries","showBeneficiaries","selectDebitAccount","setDebitAccount","prepareDebitAccounts","showDebitAccounts","selectSchedule","setSchedule","showSchedule","Event","PAYMENT_DONE","PAYMENT_FAILED","PAYMENT_START","SELECT_ACCOUNT_LOAD_START","SELECT_ACCOUNT_LOAD_DONE","SELECT_ACCOUNT_FAILED","Preference","PAYMENT_REVIEW_STEP","LOAD_ACCOUNTS_SPINNER_DELAY","widget","hasReviewStep","getBooleanPreference","timeoutId","setTimeout","ActivityIndicator","hide","clearTimeout","Snackbar","error","Object","assign","success","createRequest","handleRequest","initiatePayment","Intent","INITIATE_PAYMENT","startNewPayment","initialPaymentData","SELECT_BENEFICIARY","SELECT_DEBIT_ACCOUNT","SELECT_SCHEDULE","Error","SHOW_BENEFICIARIES","SHOW_DEBIT_ACCOUNTS","SHOW_REVIEW","SHOW_SCHEDULE"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA,0C;;;;;;;;ACAA,gD;;;;;;;;;;;;ACAA,iD;;;;;;;;;;ACAA,iD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AAzBA;;;;;;;;;;;;AA2BO,KAAMA,0BAASC,gBAAf;AACA,KAAMC,4BAAUC,iBAAhB;AACA,KAAMC,4BAAUC,iBAAhB;;AAEA,KAAMC,0CAAiB,CAC5BC,4BAD4B,EAE5BC,oBAF4B,EAG5BC,oBAH4B,EAI5BC,4BAJ4B,EAK5BC,kCAL4B,EAM5BC,uBAN4B,EAO5BC,0BAP4B,EAQ5BC,mCAR4B,CAAvB,C;;;;;;AC/BP,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;;;;;;;;;ACAA;;;;;;;;;;AAEA,KAAMC,mBAAmB;AACvBC,UAAO,OADgB;AAEvBC,OAAI,IAFmB;AAGvBC,UAAO;AAHgB,EAAzB;;AAMA,KAAMC,oBAAoB;AACxBC,SAAM,MADkB;AAExBC,UAAO,OAFiB;AAGxBC,WAAQ,QAHgB;AAIxBC,YAAS,SAJe;AAKxBC,cAAW,WALa;AAMxBC,WAAQ;AANgB,EAA1B;;AASA,KAAMC,+FACHP,kBAAkBC,IADf,EACsB,yCADtB,0CAEHD,kBAAkBE,KAFf,EAEuB,0CAFvB,0CAGHF,kBAAkBG,MAHf,EAGwB,2CAHxB,0CAIHH,kBAAkBI,OAJf,EAIyB,4CAJzB,0CAKHJ,kBAAkBK,SALf,EAK2B,8CAL3B,0CAMHL,kBAAkBM,MANf,EAMwB,2CANxB,yBAAN;;AASA;;;;;;;;;AASA,KAAME,UAAU,SAAVA,OAAU,UAAW;AACzB,OAAMC,OAAO,IAAIC,IAAJ,CAASC,OAAT,CAAb;AACA,OAAMC,QAAQ,IAAIF,IAAJ,EAAd;;AAEA,UAAOD,KAAKI,OAAL,OAAmBD,MAAMC,OAAN,EAAnB,IACLJ,KAAKK,QAAL,OAAoBF,MAAME,QAAN,EADf,IAELL,KAAKM,WAAL,OAAuBH,MAAMG,WAAN,EAFzB;AAGD,EAPD;;AASA;;;;;;;;mBAQe,gBAAmD;AAAA;;AAAA,OAAhDC,OAAgD,QAAhDA,OAAgD;AAAA,OAAvC/B,OAAuC,QAAvCA,OAAuC;AAAA,OAA9BgC,OAA8B,QAA9BA,OAA8B;AAAA,OAArBC,cAAqB,QAArBA,cAAqB;;AAChE,OAAMC,aAAaH,QAAQ,MAAR,CAAnB;AACA,OAAMI,OAAOJ,QAAQ,MAAR,CAAb;;AAEA,OAAMK,6FACHzB,iBAAiBC,KADd,EACsB;AAAA,YACxBuB,KAAK,8CAAL,CADwB;AAAA,IADtB,0CAIHxB,iBAAiBG,KAJd,EAIsB;AAAA,YACrBuB,SAASC,MADY,SACFH,KAAK,8CAAL,CADE;AAAA,IAJtB,0CAOHxB,iBAAiBE,EAPd,EAOmB,oBAAY;AACjC,SAAM0B,UAAUL,WAAWG,SAASE,OAApB,EAA6B,YAA7B,CAAhB;AACA,YAAUJ,KAAK,2CAAL,CAAV,SAA+DI,OAA/D;AACD,IAVG,yBAAN;;AAaA,OAAMC,6BAA6B,SAA7BA,0BAA6B;AAAA,YACjCL,KAAKb,yBAAyBe,SAASI,iBAAlC,CAAL,CADiC;AAAA,IAAnC;;AAIA,OAAMC,0BAA0B,SAA1BA,uBAA0B;AAAA,YAC9BN,uBAAuBC,SAASM,GAAhC,EAAqCN,QAArC,CAD8B;AAAA,IAAhC;;AAIA,OAAMO,6BAA6B,SAA7BA,0BAA6B;AAAA,YACjCrB,QAAQc,SAASQ,SAAjB,IACIV,KAAK,gCAAL,CADJ,WAEUD,WAAWG,SAASQ,SAApB,EAA+B,YAA/B,CAHuB;AAAA,IAAnC;;AAMA,OAAMC,wBAAwB,SAAxBA,qBAAwB,GAAM;AAClC,SAAMC,cAAcC,wBAAQC,WAA5B;AACA,SAAMC,cAAc;AAClBC,cAAOhB,KAAK,0CAAL,CADW;AAElBiB,gBAASjB,KAAK,4CAAL,CAFS;AAGlBkB,gBAAS,CACP;AACEC,eAAMP,cAAcQ,UAAd,CAAyBC,OADjC;AAEEC,eAAMtB,KAAK,8CAAL,CAFR;AAGEuB,qBAAY;AAHd,QADO;AAHS,MAApB;;AAYA,YAAOX,cAAcY,IAAd,CAAmBT,WAAnB,CAAP;AACD,IAfD;;AAiBA,OAAMU,cAAc,SAAdA,WAAc;AAAA,YAAYvB,SAASI,iBAAT,KAA+B1B,kBAAkBC,IAA7D;AAAA,IAApB;;AAEA,OAAM6C,0BAA0B,SAA1BA,uBAA0B;AAAA,YAC9BC,UAAWA,QAAQC,YAAR,IAAwBD,QAAQE,MAA3C,GAAqD,EADvB;AAAA,IAAhC;;AAIA,OAAMC,wBAAwB,SAAxBA,qBAAwB;AAAA,YAC5BH,UAAWA,QAAQI,KAAR,IAAiBJ,QAAQK,IAAzB,IAAiC,EAA5C,GAAkD,EADtB;AAAA,IAA9B;;AAIA;;;;;;;AAOA,OAAMC,aAAanC,eAAeoC,cAAf,CACjB;AAAA,YAASC,MAAMC,OAAN,CAAcC,IAAvB;AAAA,IADiB,CAAnB;;AAIA,OAAMC,cAAcxC,eAAeoC,cAAf,CAClB;AAAA,YAAOD,eAAeA,aAAa/B,QAA5B,GAAuC,IAA9C;AAAA,IADkB,CAApB;;AAIA;;;;;;;AAOA,OAAMqC,sBAAsBzC,eAAeoC,cAAf,CAA8B,iBAAS;AACjE,SAAMM,gBAAgBL,MAAMK,aAAN,CAAoBH,IAA1C;;AAEA,SAAIG,aAAJ,EAAmB;AAAA,WACTC,QADS,GACoBD,aADpB,CACTC,QADS;AAAA,WACCC,cADD,GACoBF,aADpB,CACCE,cADD;;AAEjB,2CACKA,cADL,sBAEKD,QAFL;AAID;;AAED,YAAO,EAAP;AACD,IAZ2B,CAA5B;;AAcA;;;;;;;AAOA,OAAME,kBAAkB7C,eAAeoC,cAAf,CACtB;AAAA,YAAOD,eAAeA,aAAaW,YAA5B,GAA2C,IAAlD;AAAA,IADsB,CAAxB;;AAIA;;;;;;;AAOA,OAAMC,0BAA0B/C,eAAeoC,cAAf,CAC9B;AAAA,YAAOS,oBAAoBA,kBAAkBG,QAAtC,GAAiD,EAAxD;AAAA,IAD8B,CAAhC;;AAIA;;;;;;;AAOA,OAAMC,4BAA4BjD,eAAeoC,cAAf,CAChC;AAAA,YAAOS,oBAAoBA,kBAAkBK,UAAtC,GAAmD,EAA1D;AAAA,IADgC,CAAlC;;AAIA;;;;;;;AAOA,OAAMC,+BAA+B,SAA/BA,4BAA+B;AAAA,YAAMvB,wBAAwBiB,iBAAxB,CAAN;AAAA,IAArC;;AAEA;;;;;;;AAOA,OAAMO,6BAA6B,SAA7BA,0BAA6B;AAAA,YAAMpB,sBAAsBa,iBAAtB,CAAN;AAAA,IAAnC;;AAEA;;;;;;;AAOA,OAAMQ,kBAAkB,SAAlBA,eAAkB;AAAA,YAAMC,QAAQT,iBAAR,CAAN;AAAA,IAAxB;;AAEA;;;;;;;;AAQA,OAAMU,kBAAkB,SAAlBA,eAAkB;AAAA,YACtBC,KAAKC,WAAL,CAAiBC,MAAjB,IAA2B3D,QAAQ4D,cAAR,EADL;AAAA,IAAxB;;AAIA;;;;;;;;AAQA,OAAMC,qBAAqB,SAArBA,kBAAqB,GAAM;AAC/B,SAAMxD,WAAWoC,aAAjB;;AAEA,SAAI,CAACpC,QAAL,EAAe;AACb,cAAO,EAAP;AACD;;AAED,SAAMyD,eAAe3D,KAAK,uCAAL,CAArB;;AAEA,SAAMU,YAAYD,2BAA2BP,QAA3B,CAAlB;AACA,SAAM0D,YAAYvD,2BAA2BH,QAA3B,CAAlB;AACA,SAAM2D,SAAStD,wBAAwBL,QAAxB,CAAf;;AAEA,YAAOuB,YAAYvB,QAAZ,IACA0D,SADA,UACcD,YADd,SAC8BjD,SAD9B,UAC4CmD,MAD5C,GAEAD,SAFA,UAEclD,SAFrB;AAGD,IAhBD;;AAkBA;;;;;;;;;AASA,OAAMoD,6BAA6B,SAA7BA,0BAA6B,GAAM;AACvC,SAAM1B,UAAUH,YAAhB;AACA,YAAOmB,QACLhB,YAAY,CAACA,QAAQQ,YAAT,IAAyBR,QAAQQ,YAAR,CAAqBmB,uBAA1D,CADK,CAAP;AAGD,IALD;;AAOA;;;;;;;;;AASA,OAAMC,mBAAmB,SAAnBA,gBAAmB,GAAM;AAC7B,SAAM5B,UAAUH,YAAhB;;AAEA,SAAI,CAACG,OAAL,EAAc;AACZ,cAAO,KAAP;AACD;;AAED,SAAI,CAACvC,QAAQoE,cAAR,GAAyBC,MAA9B,EAAsC;AACpC,cAAO,KAAP;AACD;;AAED,SAAMC,YAAYtE,QAAQuE,sBAAR,CAA+BhC,OAA/B,CAAlB;AACA,SAAI,CAAC+B,SAAL,EAAgB;AACdtE,eAAQwE,gBAAR,CAAyB,KAAzB;AACD;;AAED,YAAOF,SAAP;AACD,IAjBD;;AAmBA;;;;;;AAMA,OAAMG,2BAA2B,SAA3BA,wBAA2B;AAAA,YAAM3D,uBAAN;AAAA,IAAjC;;AAEA;;;;;;;;AAQA,OAAM4D,qBAAqB,SAArBA,kBAAqB,OAAQ;AACjC,SAAMnC,UAAUH,YAAhB;;AAEA,YAAOmB,QAAQhB,WAAWA,QAAQmB,WAAnB,IACbnB,QAAQQ,YADK,IACWU,KAAKE,MADxB,CAAP;AAED,IALD;;AAOA,OAAMgB,cAAc,SAAdA,WAAc,GAAM;AACxB3E,aAAQ4E,mBAAR;;AAEA,YAAO5E,QAAQ6E,4BAAR,GACJC,IADI,CACC;AAAA,cAAM9E,QAAQ+E,YAAR,EAAN;AAAA,MADD,CAAP;AAED,IALD;;AAOA;;;;;;;;AAQA,OAAMC,gBAAgB,SAAhBA,aAAgB,GAAM;AAC1BhF,aAAQiF,UAAR,CAAmB7C,YAAnB;;AAEA,YAAOpC,QAAQoE,cAAR,GAAyBc,UAAzB,GACHlH,QAAQmH,UAAR,EADG,GAEHR,aAFJ;AAGD,IAND;;AAQA;;;;;;;AAOA,OAAMS,sBAAsB,SAAtBA,mBAAsB,OAAQ;AAClC3B,UAAK4B,aAAL;AACAL;AACD,IAHD;;AAKA;;;;;;;;AAQA,OAAMM,oBAAoB,SAApBA,iBAAoB,GAAM;AAC9BtF,aAAQuF,cAAR,CAAuBnD,aAAasB,WAApC;;AAEA,YAAO1D,QAAQwF,oBAAR,GACJV,IADI,CACC,YAAM;AACV9G,eAAQyH,iBAAR;AACD,MAHI,CAAP;AAID,IAPD;;AASA;;;;;;;;AAQA,OAAMC,qBAAqB,SAArBA,kBAAqB,GAAM;AAC/B1F,aAAQ2F,eAAR,CAAwBvD,aAAaW,YAArC;;AAEA,YAAO/C,QAAQ4F,oBAAR,GACJd,IADI,CACC,YAAM;AACV9G,eAAQ6H,iBAAR;AACD,MAHI,CAAP;AAID,IAPD;;AASA;;;;;;;AAOA,OAAMC,iBAAiB,SAAjBA,cAAiB,GAAM;AAC3B9F,aAAQ+F,WAAR,CAAoBtD,aAApB;AACAzE,aAAQgI,YAAR;AACD,IAHD;;AAKA,UAAO;AACLtD,6CADK;AAELI,qCAFK;AAGLE,qDAHK;AAILE,yDAJK;AAKLE,+DALK;AAMLC,2DANK;AAOLjB,2BAPK;AAQLyB,2CARK;AASLP,qCATK;AAULW,2DAVK;AAWLS,2CAXK;AAYLD,uDAZK;AAaLW,6CAbK;AAcLE,yCAdK;AAeLI,2CAfK;AAgBLI,mCAhBK;AAiBLtC,qCAjBK;AAkBLW;AAlBK,IAAP;AAoBD,E;;AAED;;;;;;;;;;AAUA;;;;;;;AAOA;;;;;;;;;;AC/aA,iD;;;;;;;;;;;;ACEA;;;;;;mNAFA;AACA;;;AAGA;;;;;;;;AAQA,KAAM8B,QAAQ;AACZC,iBAAc,uBADF;AAEZC,mBAAgB,yBAFJ;AAGZC,kBAAe,0BAHH;AAIZC,8BAA2B,2CAJf;AAKZC,6BAA0B,0CALd;AAMZC,0BAAuB;AANX,EAAd;;AASA;;;;;AAKA,KAAMC,aAAa;AACjBC,wBAAqB;AADJ,EAAnB;;AAIA;;;;;;;;AAQA,KAAMC,8BAA8B,GAApC;;mBAEe,gBAAyB;AAAA;;AAAA,OAAtB3G,OAAsB,QAAtBA,OAAsB;AAAA,OAAb4G,MAAa,QAAbA,MAAa;;AACtC,OAAMxG,OAAOJ,QAAQ,MAAR,CAAb;AACA,OAAM6G,gBAAgBD,OAAOE,oBAAP,CAA4BL,WAAWC,mBAAvC,CAAtB;;AAEA,OAAIK,kBAAJ;;AAEA,OAAMlJ,iDACHqI,MAAMI,yBADH,EAC+B,iBAAc;AAAA,SAAX/E,IAAW,SAAXA,IAAW;;AAC/CwF,iBAAYC,WAAW,YAAM;AAC3B/F,+BAAQgG,iBAAR,GAA4BrF,IAA5B,CACExB,KAAKmB,SAAS,OAAT,GACD,oCADC,GAED,oCAFJ,CADF;AAKD,MANW,EAMToF,2BANS,CAAZ;AAOD,IATG,4BAWHT,MAAMK,wBAXH,EAW8B,YAAM;AACtCtF,6BAAQgG,iBAAR,GAA4BC,IAA5B;AACAC,kBAAaJ,SAAb;AACD,IAdG,4BAgBHb,MAAMM,qBAhBH,EAgB2B,iBAAc;AAAA,SAAXjF,IAAW,SAAXA,IAAW;;AAC3CN,6BAAQgG,iBAAR,GAA4BC,IAA5B;AACAC,kBAAaJ,SAAb;;AAEA9F,6BAAQmG,QAAR,GAAmBC,KAAnB,CACEjH,KAAKmB,SAAS,OAAT,GACD,2CADC,GAED,2CAFJ,CADF;AAKD,IAzBG,WAAN;;AA4BA,OAAI,CAACsF,aAAL,EAAoB;AAAA;;AAClBS,YAAOC,MAAP,CAAc1J,MAAd,wDACGqI,MAAMG,aADT,EACyB,YAAM;AAC3BpF,+BAAQgG,iBAAR,GAA4BrF,IAA5B,CAAiCxB,KAAK,uBAAL,CAAjC;AACD,MAHH,mCAKG8F,MAAMC,YALT,EAKwB,YAAM;AAC1BlF,+BAAQgG,iBAAR,GAA4BC,IAA5B;AACAjG,+BAAQmG,QAAR,GAAmBI,OAAnB,CAA2BpH,KAAK,sBAAL,CAA3B;AACD,MARH,mCAUG8F,MAAME,cAVT,EAU0B,YAAM;AAC5BnF,+BAAQgG,iBAAR,GAA4BC,IAA5B;AACAjG,+BAAQmG,QAAR,GAAmBC,KAAnB,CAAyBjH,KAAK,wBAAL,CAAzB;AACD,MAbH;AAeD;;AAED,UAAOvC,MAAP;AACD,E;;;;;;;;;;;;AC7FD;;AAEA;;;;mBAIe;AAAA,OAAG4J,aAAH,QAAGA,aAAH;AAAA,OAAkBC,aAAlB,QAAkBA,aAAlB;AAAA,OAAiCzH,OAAjC,QAAiCA,OAAjC;AAAA,UAAgD;AAC7D;;;;;;AAMA0H,sBAAiBD,cAAcE,kBAAOC,gBAArB,EAAuC,8BAAsB;AAC5E5H,eAAQ6H,eAAR,CAAwBC,kBAAxB;AACD,MAFgB,CAP4C;;AAW7D;;;;;;AAMAxC,wBAAmBmC,cAAcE,kBAAOI,kBAArB,EAAyC,uBAAe;AACzE/H,eAAQuF,cAAR,CAAuB7B,WAAvB;AACD,MAFkB,CAjB0C;;AAqB7D;;;;;;AAMAgC,yBAAoB+B,cAAcE,kBAAOK,oBAArB,EAA2C,wBAAgB;AAC7EhI,eAAQ2F,eAAR,CAAwB5C,YAAxB;AACD,MAFmB,CA3ByC;;AA+B7D;;;;;;AAMA+C,qBAAgB2B,cAAcE,kBAAOM,eAArB,EAAsC,oBAAY;AAChE,WAAI5H,QAAJ,EAAc;AACZL,iBAAQ+F,WAAR,CAAoB1F,QAApB;AACD,QAFD,MAEO;AACL,eAAM,IAAI6H,KAAJ,+FAAN;AAED;AACF,MAPe,CArC6C;;AA8C7D;;;;;AAKAzC,wBAAmB+B,cAAcG,kBAAOQ,kBAArB,CAnD0C;;AAqD7D;;;;;AAKAtC,wBAAmB2B,cAAcG,kBAAOS,mBAArB,CA1D0C;;AA4D7D;;;;;AAKAjD,iBAAYqC,cAAcG,kBAAOU,WAArB,CAjEiD;;AAmE7D;;;;;AAKArC,mBAAcwB,cAAcG,kBAAOW,aAArB;AAxE+C,IAAhD;AAAA,E;;AA2Ef;;;;;;;;;;;;;;;ACjFA;;AAEA;;;;AAIO,KAAMX,0BAAS;AACpBC,qBAAkB,0CADE;AAEpBG,uBAAoB,4CAFA;AAGpBC,yBAAsB,6CAHF;AAIpBC,oBAAiB,yCAJG;AAKpBE,uBAAoB,4CALA;AAMpBC,wBAAqB,4CAND;AAOpBC,gBAAa,qCAPO;AAQpBC,kBAAe;AARK,EAAf,C;;;;;;ACNP;;AAEA;AACA;AACA;AACA;AACA,iDAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,8DAA6D,uBAAuB,GAAG;;AAEvF;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA","file":"ext-bbm-initiate-payment-form-ng/scripts/ext-bbm-initiate-payment-form-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"vendor-bb-angular-ng-messages\"), require(\"ui-bb-format-amount-ng\"), require(\"ui-bb-iban-ng\"), require(\"ui-bbm-amount-field-ng\"), require(\"ui-bbm-beneficiary-select-ng\"), require(\"ui-bbm-switch-ng\"), require(\"ui-bbm-textfield-ng\"), require(\"lib-bbm-plugins\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bbm-initiate-payment-form-ng\", [\"ui-bb-i18n-ng\", \"vendor-bb-angular-ng-messages\", \"ui-bb-format-amount-ng\", \"ui-bb-iban-ng\", \"ui-bbm-amount-field-ng\", \"ui-bbm-beneficiary-select-ng\", \"ui-bbm-switch-ng\", \"ui-bbm-textfield-ng\", \"lib-bbm-plugins\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bbm-initiate-payment-form-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"vendor-bb-angular-ng-messages\"), require(\"ui-bb-format-amount-ng\"), require(\"ui-bb-iban-ng\"), require(\"ui-bbm-amount-field-ng\"), require(\"ui-bbm-beneficiary-select-ng\"), require(\"ui-bbm-switch-ng\"), require(\"ui-bbm-textfield-ng\"), require(\"lib-bbm-plugins\"));\n\telse\n\t\troot[\"ext-bbm-initiate-payment-form-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"vendor-bb-angular-ng-messages\"], root[\"ui-bb-format-amount-ng\"], root[\"ui-bb-iban-ng\"], root[\"ui-bbm-amount-field-ng\"], root[\"ui-bbm-beneficiary-select-ng\"], root[\"ui-bbm-switch-ng\"], root[\"ui-bbm-textfield-ng\"], root[\"lib-bbm-plugins\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_45__, __WEBPACK_EXTERNAL_MODULE_46__, __WEBPACK_EXTERNAL_MODULE_47__, __WEBPACK_EXTERNAL_MODULE_48__, __WEBPACK_EXTERNAL_MODULE_49__, __WEBPACK_EXTERNAL_MODULE_51__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59b29c6361f41ebec32c","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-initiate-payment-form-ng/model.xml\n// module id = 0\n// module chunks = 3","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 8 9 10 11 12 13 14 19 24","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-messages\"\n// module id = 10\n// module chunks = 0 1 3 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount-ng\"\n// module id = 15\n// module chunks = 0 2 3 4 6 7","/**\n * @module ext-bbm-initiate-payment-form-ng\n *\n * @description\n * Mobile extension for the payment form in the Mobile initiate payment widget.\n *\n * @example\n * <!-- File model.xml of widget-bbm-initiate-payment-ng -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *   <value type=\"string\">ext-bbm-initiate-payment-form-ng</value>\n * </property>\n */\nimport uiBbFormatAmountKey from 'ui-bb-format-amount-ng';\nimport uiBbI18nKey from 'ui-bb-i18n-ng';\nimport uiBbIbanKey from 'ui-bb-iban-ng';\nimport uiBbmAmountFieldKey from 'ui-bbm-amount-field-ng';\nimport uiBbmBeneficiarySelectKey from 'ui-bbm-beneficiary-select-ng';\nimport uiBbmSwitchKey from 'ui-bbm-switch-ng';\nimport uiBbmTextfieldKey from 'ui-bbm-textfield-ng';\nimport vendorBbAngularNgMessagesKey from 'vendor-bb-angular-ng-messages';\n\nimport extHelpers from './helpers';\nimport extEvents from './events';\nimport extIntents from './intents';\n\nimport '../styles/index.css';\n\nexport const events = extEvents;\nexport const helpers = extHelpers;\nexport const intents = extIntents;\n\nexport const dependencyKeys = [\n  uiBbFormatAmountKey,\n  uiBbI18nKey,\n  uiBbIbanKey,\n  uiBbmAmountFieldKey,\n  uiBbmBeneficiarySelectKey,\n  uiBbmSwitchKey,\n  uiBbmTextfieldKey,\n  vendorBbAngularNgMessagesKey,\n];\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-form-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_45__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-iban-ng\"\n// module id = 45\n// module chunks = 3 19 24","module.exports = __WEBPACK_EXTERNAL_MODULE_46__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-amount-field-ng\"\n// module id = 46\n// module chunks = 3","module.exports = __WEBPACK_EXTERNAL_MODULE_47__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-beneficiary-select-ng\"\n// module id = 47\n// module chunks = 3","module.exports = __WEBPACK_EXTERNAL_MODULE_48__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-switch-ng\"\n// module id = 48\n// module chunks = 3","module.exports = __WEBPACK_EXTERNAL_MODULE_49__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-textfield-ng\"\n// module id = 49\n// module chunks = 3 5 24","import plugins from 'lib-bbm-plugins';\n\nconst RecurrenceEnding = {\n  NEVER: 'NEVER',\n  ON: 'ON',\n  AFTER: 'AFTER',\n};\n\nconst TransferFrequency = {\n  ONCE: 'ONCE',\n  DAILY: 'DAILY',\n  WEEKLY: 'WEEKLY',\n  MONTHLY: 'MONTHLY',\n  QUARTERLY: 'QUARTERLY',\n  YEARLY: 'YEARLY',\n};\n\nconst TransferFrequencyMessage = {\n  [TransferFrequency.ONCE]: 'message.payment.schedule.frequency.once',\n  [TransferFrequency.DAILY]: 'message.payment.schedule.frequency.daily',\n  [TransferFrequency.WEEKLY]: 'message.payment.schedule.frequency.weekly',\n  [TransferFrequency.MONTHLY]: 'message.payment.schedule.frequency.monthly',\n  [TransferFrequency.QUARTERLY]: 'message.payment.schedule.frequency.quarterly',\n  [TransferFrequency.YEARLY]: 'message.payment.schedule.frequency.yearly',\n};\n\n/**\n * @name isToday\n * @type {function}\n * @description\n * Checks if the given date is today.\n * @param {string} dateStr\n * @returns {boolean}\n * @inner\n */\nconst isToday = dateStr => {\n  const date = new Date(dateStr);\n  const today = new Date();\n\n  return date.getDate() === today.getDate() &&\n    date.getMonth() === today.getMonth() &&\n    date.getFullYear() === today.getFullYear();\n};\n\n/**\n * @description\n * Helpers for ext-bbm-initiate-payment-form-ng\n *\n * @name Helpers\n * @type {Object}\n */\n\nexport default ({ $filter, intents, service, stateContainer }) => {\n  const dateFilter = $filter('date');\n  const i18n = $filter('i18n');\n\n  const RecurrenceEndingString = {\n    [RecurrenceEnding.NEVER]: () => (\n      i18n('message.payment.schedule.frequency.end.never')\n    ),\n    [RecurrenceEnding.AFTER]: schedule => (\n      `${schedule.repeat} ${i18n('message.payment.schedule.frequency.end.after')}`\n    ),\n    [RecurrenceEnding.ON]: schedule => {\n      const endDate = dateFilter(schedule.endDate, 'mediumDate');\n      return `${i18n('message.payment.schedule.frequency.end.on')} ${endDate}`;\n    },\n  };\n\n  const getScheduleFrequencyString = schedule => (\n    i18n(TransferFrequencyMessage[schedule.transferFrequency])\n  );\n\n  const getScheduleEndingString = schedule => (\n    RecurrenceEndingString[schedule.end](schedule)\n  );\n\n  const getScheduleStartDateString = schedule => (\n    isToday(schedule.startDate)\n      ? i18n('message.payment.schedule.today')\n      : `on ${dateFilter(schedule.startDate, 'mediumDate')}`\n  );\n\n  const showUrgentPaymentInfo = () => {\n    const alertDialog = plugins.AlertDialog;\n    const infoOptions = {\n      title: i18n('message.payment.urgentPayment.info.title'),\n      message: i18n('message.payment.urgentPayment.info.message'),\n      buttons: [\n        {\n          type: alertDialog().ButtonType.NEUTRAL,\n          text: i18n('message.payment.urgentPayment.info.button.ok'),\n          callbackFn: 'OK',\n        },\n      ],\n    };\n\n    return alertDialog().show(infoOptions);\n  };\n\n  const isRecurring = schedule => schedule.transferFrequency !== TransferFrequency.ONCE;\n\n  const getAccountDisplayAmount = account => (\n    account ? (account.primaryValue || account.amount) : ''\n  );\n\n  const getAccountDisplayName = account => (\n    account ? (account.alias || account.name || '') : ''\n  );\n\n  /**\n   * @name Helpers#getPayment\n   * @type {function}\n   * @description\n   * Returns the payment object.\n   * @returns {module:widget-bbm-initiate-payment-ng.Payment}\n   */\n  const getPayment = stateContainer.createSelector(\n    state => state.payment.data\n  );\n\n  const getSchedule = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().schedule : null)\n  );\n\n  /**\n   * @name Helpers#getAllBeneficiaries\n   * @type {function}\n   * @description\n   * Returns the list of all beneficiaries including accounts and contacts.\n   * @returns {module:widget-bbm-initiate-payment-ng.<Array.<AccountView>>}\n   */\n  const getAllBeneficiaries = stateContainer.createSelector(state => {\n    const beneficiaries = state.beneficiaries.data;\n\n    if (beneficiaries) {\n      const { contacts, creditAccounts } = beneficiaries;\n      return [\n        ...creditAccounts,\n        ...contacts,\n      ];\n    }\n\n    return [];\n  });\n\n  /**\n   * @name Helpers#getDebitAccount\n   * @type {function}\n   * @description\n   * Returns selected debit account of the payment.\n   * @returns {module:widget-bbm-initiate-payment-ng.AccountView}\n   */\n  const getDebitAccount = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().debitAccount : null)\n  );\n\n  /**\n   * @name Helpers#getDebitAccountCurrency\n   * @type {function}\n   * @description\n   * Returns the currency of the selected debit account.\n   * @returns {string}\n   */\n  const getDebitAccountCurrency = stateContainer.createSelector(\n    () => (getDebitAccount() ? getDebitAccount().currency : '')\n  );\n\n  /**\n   * @name Helpers#getDebitAccountIdentifier\n   * @type {function}\n   * @description\n   * Returns the identifier of the selected debit account.\n   * @returns {string}\n   */\n  const getDebitAccountIdentifier = stateContainer.createSelector(\n    () => (getDebitAccount() ? getDebitAccount().identifier : '')\n  );\n\n  /**\n   * @name Helpers#getDebitAccountDisplayAmount\n   * @type {function}\n   * @description\n   * Returns a string that will be displayed as an amount of the selected debit account.\n   * @returns {string}\n   */\n  const getDebitAccountDisplayAmount = () => getAccountDisplayAmount(getDebitAccount());\n\n  /**\n   * @name Helpers#getDebitAccountDisplayName\n   * @type {function}\n   * @description\n   * Returns a string that will be displayed as a name of the selected debit account.\n   * @returns {string}\n   */\n  const getDebitAccountDisplayName = () => getAccountDisplayName(getDebitAccount());\n\n  /**\n   * @name Helpers#hasDebitAccount\n   * @type {function}\n   * @description\n   * Checks if there is a selected debit account\n   * @returns {boolean}\n   */\n  const hasDebitAccount = () => Boolean(getDebitAccount());\n\n  /**\n   * @name Helpers#showSaveContact\n   * @type {function}\n   * @description\n   * Returns true if the \"Save contact\" checkbox should be displayed, and false otherwise.\n   * @param {FormController} form Instance of the Form controller\n   * @returns {boolean}\n   */\n  const showSaveContact = form => (\n    form.beneficiary.$valid && service.canSaveContact()\n  );\n\n  /**\n   * @name Helpers#getScheduleSummary\n   * @type {function}\n   * @description\n   * Returns a summary of the given payment schedule as a string.\n   * @param {Schedule} schedule\n   * @returns {string}\n   */\n  const getScheduleSummary = () => {\n    const schedule = getSchedule();\n\n    if (!schedule) {\n      return '';\n    }\n\n    const startingFrom = i18n('message.payment.schedule.startingFrom');\n\n    const startDate = getScheduleStartDateString(schedule);\n    const frequency = getScheduleFrequencyString(schedule);\n    const ending = getScheduleEndingString(schedule);\n\n    return isRecurring(schedule)\n      ? `${frequency}, ${startingFrom} ${startDate}, ${ending}`\n      : `${frequency}, ${startDate}`;\n  };\n\n  /**\n   * @name Helpers#isCreateBeneficiaryAllowed\n   * @type {function}\n   * @description\n   * Checks for the payment whether it is allowed to create a new beneficiary\n   * instead of selecting an existing one from the list of beneficiaries.\n   * Returns true, if a user can create a beneficiary, otherwise false.\n   * @returns {boolean}\n   */\n  const isCreateBeneficiaryAllowed = () => {\n    const payment = getPayment();\n    return Boolean(\n      payment && (!payment.debitAccount || payment.debitAccount.externalTransferAllowed)\n    );\n  };\n\n  /**\n   * @description\n   * Checks if urgent payment is available for the current transaction.\n   * @name Helpers#showUrgentToggle\n   * @type {function}\n   * Returns true, if beneficiary allows urgent payments, payment is scheduled only for once,\n   * payment is not scheduled for future, otherwise false.\n   * @returns {boolean}\n   */\n  const showUrgentToggle = () => {\n    const payment = getPayment();\n\n    if (!payment) {\n      return false;\n    }\n\n    if (!service.getPreferences().urgent) {\n      return false;\n    }\n\n    const isAllowed = service.isUrgentPaymentAllowed(payment);\n    if (!isAllowed) {\n      service.setUrgentPayment(false);\n    }\n\n    return isAllowed;\n  };\n\n  /**\n   * @name Helpers#onUrgentPaymentInfoClick\n   * @type {function}\n   * @description\n   * Shows information about urgent payment.\n   */\n  const onUrgentPaymentInfoClick = () => showUrgentPaymentInfo();\n\n  /**\n   * @name Helpers#isPaymentFormValid\n   * @type {function}\n   * @description\n   * Checks whether the form is valid. Returns true, if the form is valid, false otherwise.\n   * @param {Object} form Instance of the form\n   * @returns {boolean}\n   */\n  const isPaymentFormValid = form => {\n    const payment = getPayment();\n\n    return Boolean(payment && payment.beneficiary &&\n      payment.debitAccount && form.$valid);\n  };\n\n  const makePayment = () => {\n    service.saveContactIfNeeded();\n\n    return service.makePaymentWithAuthorization()\n      .then(() => service.resetPayment());\n  };\n\n  /**\n   * @name Helpers#submitPayment\n   * @type {function}\n   * @description\n   * Depending on the preference either navigates the user to the review page\n   * or makes the payment.\n   * @returns {Promise} Promise that resolves once the operation is complete.\n   */\n  const submitPayment = () => {\n    service.setPayment(getPayment());\n\n    return service.getPreferences().reviewStep\n      ? intents.showReview()\n      : makePayment();\n  };\n\n  /**\n   * @name Helpers#onPaymentFormSubmit\n   * @type {function}\n   * @description\n   * Handles the payment form submit.\n   * @param {Object} form Angular form instance\n   */\n  const onPaymentFormSubmit = form => {\n    form.$setUntouched();\n    submitPayment();\n  };\n\n  /**\n   * @name Helpers#selectBeneficiary\n   * @type {function}\n   * @description\n   * Initiates the process of selecting of the beneficiary by calling\n   * the \"intent.rbm.paymentOrder.beneficiaries.show\" intent.\n   * Before calling the intent it ensures, that beneficiaries are loaded.\n   */\n  const selectBeneficiary = () => {\n    service.setBeneficiary(getPayment().beneficiary);\n\n    return service.prepareBeneficiaries()\n      .then(() => {\n        intents.showBeneficiaries();\n      });\n  };\n\n  /**\n   * @name Helpers#selectDebitAccount\n   * @type {function}\n   * @description\n   * Initiates the process of selecting of the debit account by calling\n   * the \"intent.rbm.paymentOrder.debitAccounts.show\" intent.\n   * Before calling the intent it ensures, that debit accounts are loaded.\n   */\n  const selectDebitAccount = () => {\n    service.setDebitAccount(getPayment().debitAccount);\n\n    return service.prepareDebitAccounts()\n      .then(() => {\n        intents.showDebitAccounts();\n      });\n  };\n\n  /**\n   * @name Helpers#selectSchedule\n   * @type {function}\n   * @description\n   * Initiates the process of selecting a schedule by calling\n   * the \"intent.rbm.paymentOrder.schedule.show\" intent.\n   */\n  const selectSchedule = () => {\n    service.setSchedule(getSchedule());\n    intents.showSchedule();\n  };\n\n  return {\n    getAllBeneficiaries,\n    getDebitAccount,\n    getDebitAccountCurrency,\n    getDebitAccountIdentifier,\n    getDebitAccountDisplayAmount,\n    getDebitAccountDisplayName,\n    getPayment,\n    getScheduleSummary,\n    hasDebitAccount,\n    isCreateBeneficiaryAllowed,\n    isPaymentFormValid,\n    onUrgentPaymentInfoClick,\n    onPaymentFormSubmit,\n    selectBeneficiary,\n    selectDebitAccount,\n    selectSchedule,\n    showSaveContact,\n    showUrgentToggle,\n  };\n};\n\n/**\n * @typedef {Object} AccountView\n * @property {string} id The internal account identifier\n * @property {string} name The account's name, suitable for display to users\n * @property {?string} identifier The identifier of the account from the user's perspective\n * @property {?string} amount The most important associated value to be displayed\n * @property {?string} currency Account currency\n * @property {?boolean} external Whether the account is external\n */\n\n/**\n * @typedef {Object} Beneficiaries\n * @property {Array.<AccountView>} all The list of all beneficiaries.\n * @property {Array.<AccountView>} creditAccounts The list of credit accounts.\n * @property {Array.<ContactsGroup>} contacts The list of contacts groups.\n */\n\n/**\n * @typedef {Object} ContactsGroup\n * @property {string} char The first character of a contact name\n * @property {Array.<AccountView>} contacts The list of contacts\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-form-ng/scripts/helpers.js","module.exports = __WEBPACK_EXTERNAL_MODULE_51__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bbm-plugins\"\n// module id = 51\n// module chunks = 3 4 5","// Temporary disable capsInNew until it fixed in lib-bbm-plugins\n/* eslint new-cap: [\"error\", { \"capIsNew\": false }] */\nimport plugins from 'lib-bbm-plugins';\n\n/**\n * @description\n * Events that the extension subscribes to.\n *\n * @name Event\n * @type {Object}\n * @inner\n */\nconst Event = {\n  PAYMENT_DONE: 'bb.event.payment.done',\n  PAYMENT_FAILED: 'bb.event.payment.failed',\n  PAYMENT_START: 'bb.event.payment.started',\n  SELECT_ACCOUNT_LOAD_START: 'bb.event.payment.selectAccount.load.start',\n  SELECT_ACCOUNT_LOAD_DONE: 'bb.event.payment.selectAccount.load.done',\n  SELECT_ACCOUNT_FAILED: 'bb.event.payment.selectAccount.failed',\n};\n\n/**\n * @name Preference\n * @type {Object}\n * @inner\n */\nconst Preference = {\n  PAYMENT_REVIEW_STEP: 'bb.payment.review.step',\n};\n\n/**\n * @description\n * Delay in milliseconds before the spinner that indicates loading of accounts gets displayed.\n *\n * @name LOAD_ACCOUNTS_SPINNER_DELAY\n * @type {number}\n * @inner\n */\nconst LOAD_ACCOUNTS_SPINNER_DELAY = 100;\n\nexport default ({ $filter, widget }) => {\n  const i18n = $filter('i18n');\n  const hasReviewStep = widget.getBooleanPreference(Preference.PAYMENT_REVIEW_STEP);\n\n  let timeoutId;\n\n  const events = {\n    [Event.SELECT_ACCOUNT_LOAD_START]: ({ type }) => {\n      timeoutId = setTimeout(() => {\n        plugins.ActivityIndicator().show(\n          i18n(type === 'debit'\n            ? 'message.payment.debitAccounts.load'\n            : 'message.payment.beneficiaries.load')\n        );\n      }, LOAD_ACCOUNTS_SPINNER_DELAY);\n    },\n\n    [Event.SELECT_ACCOUNT_LOAD_DONE]: () => {\n      plugins.ActivityIndicator().hide();\n      clearTimeout(timeoutId);\n    },\n\n    [Event.SELECT_ACCOUNT_FAILED]: ({ type }) => {\n      plugins.ActivityIndicator().hide();\n      clearTimeout(timeoutId);\n\n      plugins.Snackbar().error(\n        i18n(type === 'debit'\n          ? 'message.payment.debitAccounts.load.failed'\n          : 'message.payment.beneficiaries.load.failed')\n      );\n    },\n  };\n\n  if (!hasReviewStep) {\n    Object.assign(events, {\n      [Event.PAYMENT_START]: () => {\n        plugins.ActivityIndicator().show(i18n('message.payment.start'));\n      },\n\n      [Event.PAYMENT_DONE]: () => {\n        plugins.ActivityIndicator().hide();\n        plugins.Snackbar().success(i18n('message.payment.done'));\n      },\n\n      [Event.PAYMENT_FAILED]: () => {\n        plugins.ActivityIndicator().hide();\n        plugins.Snackbar().error(i18n('message.payment.failed'));\n      },\n    });\n  }\n\n  return events;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-form-ng/scripts/events.js","import { Intent } from './constants';\n\n/**\n * @name Intents\n * @type {Object}\n */\nexport default ({ createRequest, handleRequest, service }) => ({\n  /**\n   * @name Intents#initiatePayment\n   * @description Handles the intent to initiate a payment\n   * @type {function}\n   * @param {InitiatePaymentIntentParameters} initialPaymentData Initial payment\n   */\n  initiatePayment: handleRequest(Intent.INITIATE_PAYMENT, initialPaymentData => {\n    service.startNewPayment(initialPaymentData);\n  }),\n\n  /**\n   * @name Intents#initiatePayment\n   * @description Handles the intent to select a beneficiary.\n   * @type {function}\n   * @param {Object} beneficiary\n   */\n  selectBeneficiary: handleRequest(Intent.SELECT_BENEFICIARY, beneficiary => {\n    service.setBeneficiary(beneficiary);\n  }),\n\n  /**\n   * @name Intents#initiatePayment\n   * @description Handles the intent to select a debit account\n   * @type {function}\n   * @param {Object} debitAccount\n   */\n  selectDebitAccount: handleRequest(Intent.SELECT_DEBIT_ACCOUNT, debitAccount => {\n    service.setDebitAccount(debitAccount);\n  }),\n\n  /**\n   * @name Intents#selectSchedule\n   * @description Handles the intent to select schedule\n   * @type {function}\n   * @param {Object} schedule\n   */\n  selectSchedule: handleRequest(Intent.SELECT_SCHEDULE, schedule => {\n    if (schedule) {\n      service.setSchedule(schedule);\n    } else {\n      throw new Error(`Schedule is undefined. \n        Please pass a schedule object as the payload of the intent`);\n    }\n  }),\n\n  /**\n   * @name Intents#showBeneficiaries\n   * @description The intent to show the list of beneficiaries.\n   * @type {function}\n   */\n  showBeneficiaries: createRequest(Intent.SHOW_BENEFICIARIES),\n\n  /**\n   * @name Intents#showDebitAccounts\n   * @description The intent to show the list of debit accounts.\n   * @type {function}\n   */\n  showDebitAccounts: createRequest(Intent.SHOW_DEBIT_ACCOUNTS),\n\n  /**\n   * @name Intents#showReview\n   * @description The intent to show payment review.\n   * @type {function}\n   */\n  showReview: createRequest(Intent.SHOW_REVIEW),\n\n  /**\n   * @name Intents#showSchedule\n   * @description The intent to show schedule\n   * @type {function}\n   */\n  showSchedule: createRequest(Intent.SHOW_SCHEDULE),\n});\n\n/**\n * @typedef {Object} InitiatePaymentIntentParameters\n * @property {module:model-bb-product-summary-ng.Product?} debitAccount\n *   An optional debit account for a new payment.\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-form-ng/scripts/intents.js","/* eslint import/prefer-default-export: \"off\" */\n\n/**\n * Intents\n * @type {Object}\n */\nexport const Intent = {\n  INITIATE_PAYMENT: 'intent.rbm.paymentOrder.payment.initiate',\n  SELECT_BENEFICIARY: 'intent.rbm.paymentOrder.beneficiary.select',\n  SELECT_DEBIT_ACCOUNT: 'intent.rbm.paymentOrder.debitAccount.select',\n  SELECT_SCHEDULE: 'intent.rbm.paymentOrder.schedule.select',\n  SHOW_BENEFICIARIES: 'intent.rbm.paymentOrder.beneficiaries.show',\n  SHOW_DEBIT_ACCOUNTS: 'intent.rbm.paymentOrder.debitAccounts.show',\n  SHOW_REVIEW: 'intent.rbm.paymentOrder.review.show',\n  SHOW_SCHEDULE: 'intent.rbm.paymentOrder.schedule.show',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-form-ng/scripts/constants.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./index.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./index.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./index.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-initiate-payment-form-ng/styles/index.css\n// module id = 55\n// module chunks = 3","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".ext-bbm-initiate-payment-form-ng {\\n  position: relative;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./ext-bbm-initiate-payment-form-ng/styles/index.css\n// module id = 56\n// module chunks = 3","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 57\n// module chunks = 3","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 58\n// module chunks = 3"],"sourceRoot":""}