{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6****","webpack:///webpack/bootstrap 70052c6c6190d07a36f3?d006****","webpack:///./ext-bbm-initiate-payment-review-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01****","webpack:///external \"ui-bb-format-amount-ng\"?8f72**","webpack:///external \"lib-bbm-plugins\"?dfbe","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/index.js","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/events.js","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/helpers.js","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/intents.js","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/constants.js"],"names":["events","extEvents","helpers","extHelpers","intents","extIntents","dependencyKeys","uiBbI18nKey","uiBbFormatAmountKey","Event","PAYMENT_DONE","PAYMENT_FAILED","PAYMENT_START","Preference","PAYMENT_REVIEW_STEP","$filter","widget","i18n","hasReviewStep","getBooleanPreference","Object","assign","plugins","ActivityIndicator","show","hide","Snackbar","success","error","RecurrenceEnding","NEVER","ON","AFTER","TransferFrequency","ONCE","DAILY","WEEKLY","MONTHLY","QUARTERLY","YEARLY","TransferFrequencyMessage","isToday","date","Date","dateStr","today","getDate","getMonth","getFullYear","service","stateContainer","dateFilter","RecurrenceEndingString","schedule","repeat","endDate","getScheduleFrequencyString","transferFrequency","getScheduleEndingString","end","getScheduleStartDateString","startDate","isRecurring","getAccountDisplayAmount","account","primaryValue","amount","getAccountDisplayName","alias","name","getPayment","createSelector","state","payment","data","getSchedule","getBeneficiary","beneficiary","getBeneficiaryDisplayName","getBeneficiaryIdentifier","identifier","getDebitAccount","debitAccount","getDebitAccountCurrency","currency","getDebitAccountDisplayAmount","getDebitAccountDisplayName","getDebitAccountIdentifier","getDescription","description","getPaymentAmount","value","getPaymentCurrency","getSaveContact","saveContact","getScheduleSummary","startingFrom","frequency","ending","showBeneficiaryIdentifier","Boolean","showBeneficiaryName","showDebitAccount","showDescription","showSaveContact","canSaveContact","showUrgentPayment","urgent","submitPayment","saveContactIfNeeded","makePaymentWithAuthorization","then","initiatePayment","createRequest","handleRequest","Intent","INITIATE_PAYMENT","showReview","SHOW_REVIEW"],"mappings":"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","file":"ext-bbm-initiate-payment-review-ng/scripts/ext-bbm-initiate-payment-review-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"lib-bbm-plugins\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bbm-initiate-payment-review-ng\", [\"ui-bb-i18n-ng\", \"ui-bb-format-amount-ng\", \"lib-bbm-plugins\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bbm-initiate-payment-review-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"lib-bbm-plugins\"));\n\telse\n\t\troot[\"ext-bbm-initiate-payment-review-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"ui-bb-format-amount-ng\"], root[\"lib-bbm-plugins\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_51__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70052c6c6190d07a36f3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-initiate-payment-review-ng/model.xml\n// module id = 0\n// module chunks = 4","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 8 9 10 11 12 13 14 19 24","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount-ng\"\n// module id = 15\n// module chunks = 0 2 3 4 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_51__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bbm-plugins\"\n// module id = 51\n// module chunks = 3 4 5","/**\n * @module ext-bbm-initiate-payment-review-ng\n *\n * @description\n * Mobile extension for a payment review step in the Mobile initiate payment widget.\n *\n * @example\n * <!-- Contact widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *   <value type=\"string\">ext-bbm-initiate-payment-review-ng</value>\n * </property>\n */\nimport uiBbFormatAmountKey from 'ui-bb-format-amount-ng';\nimport uiBbI18nKey from 'ui-bb-i18n-ng';\n\nimport extEvents from './events';\nimport extHelpers from './helpers';\nimport extIntents from './intents';\n\nexport const events = extEvents;\nexport const helpers = extHelpers;\nexport const intents = extIntents;\n\nexport const dependencyKeys = [\n  uiBbI18nKey,\n  uiBbFormatAmountKey,\n];\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/index.js","// Temporary disable capsInNew until it fixed in lib-bbm-plugins\n/* eslint new-cap: [\"error\", { \"capIsNew\": false }] */\nimport plugins from 'lib-bbm-plugins';\n\n/**\n * @description\n * Events that the extension subscribes to.\n *\n * @name Event\n * @type {Object}\n * @inner\n */\nconst Event = {\n  PAYMENT_DONE: 'bb.event.payment.done',\n  PAYMENT_FAILED: 'bb.event.payment.failed',\n  PAYMENT_START: 'bb.event.payment.started',\n};\n\n/**\n * @name Preference\n * @type {Object}\n * @inner\n */\nconst Preference = {\n  PAYMENT_REVIEW_STEP: 'bb.payment.review.step',\n};\n\nexport default ({ $filter, widget }) => {\n  const i18n = $filter('i18n');\n  const hasReviewStep = widget.getBooleanPreference(Preference.PAYMENT_REVIEW_STEP);\n  const events = {};\n\n  if (hasReviewStep) {\n    Object.assign(events, {\n      [Event.PAYMENT_START]: () => {\n        plugins.ActivityIndicator().show(i18n('message.payment.start'));\n      },\n\n      [Event.PAYMENT_DONE]: () => {\n        plugins.ActivityIndicator().hide();\n        plugins.Snackbar().success(i18n('message.payment.done'));\n      },\n\n      [Event.PAYMENT_FAILED]: () => {\n        plugins.ActivityIndicator().hide();\n        plugins.Snackbar().error(i18n('message.payment.failed'));\n      },\n    });\n  }\n\n  return events;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/events.js","const RecurrenceEnding = {\n  NEVER: 'NEVER',\n  ON: 'ON',\n  AFTER: 'AFTER',\n};\n\nconst TransferFrequency = {\n  ONCE: 'ONCE',\n  DAILY: 'DAILY',\n  WEEKLY: 'WEEKLY',\n  MONTHLY: 'MONTHLY',\n  QUARTERLY: 'QUARTERLY',\n  YEARLY: 'YEARLY',\n};\n\nconst TransferFrequencyMessage = {\n  [TransferFrequency.ONCE]: 'message.payment.schedule.frequency.once',\n  [TransferFrequency.DAILY]: 'message.payment.schedule.frequency.daily',\n  [TransferFrequency.WEEKLY]: 'message.payment.schedule.frequency.weekly',\n  [TransferFrequency.MONTHLY]: 'message.payment.schedule.frequency.monthly',\n  [TransferFrequency.QUARTERLY]: 'message.payment.schedule.frequency.quarterly',\n  [TransferFrequency.YEARLY]: 'message.payment.schedule.frequency.yearly',\n};\n\nconst isToday = dateStr => {\n  const date = new Date(dateStr);\n  const today = new Date();\n\n  return date.getDate() === today.getDate() &&\n    date.getMonth() === today.getMonth() &&\n    date.getFullYear() === today.getFullYear();\n};\n\n/**\n * @description\n * Helpers for ext-bbm-initiate-payment-form-ng\n *\n * @name Helpers\n * @type {Object}\n */\n\nexport default ({ $filter, intents, service, stateContainer }) => {\n  const dateFilter = $filter('date');\n  const i18n = $filter('i18n');\n\n  const RecurrenceEndingString = {\n    [RecurrenceEnding.NEVER]: () => (\n      i18n('message.payment.schedule.frequency.end.never')\n    ),\n    [RecurrenceEnding.AFTER]: schedule => (\n      `${schedule.repeat} ${i18n('message.payment.schedule.frequency.end.after')}`\n    ),\n    [RecurrenceEnding.ON]: schedule => {\n      const endDate = dateFilter(schedule.endDate, 'mediumDate');\n      return `${i18n('message.payment.schedule.frequency.end.on')} ${endDate}`;\n    },\n  };\n\n  const getScheduleFrequencyString = schedule => (\n    i18n(TransferFrequencyMessage[schedule.transferFrequency])\n  );\n\n  const getScheduleEndingString = schedule => (\n    RecurrenceEndingString[schedule.end](schedule)\n  );\n\n  const getScheduleStartDateString = schedule => (\n    isToday(schedule.startDate)\n      ? i18n('message.payment.schedule.today')\n      : `on ${dateFilter(schedule.startDate, 'mediumDate')}`\n  );\n\n  const isRecurring = schedule => schedule.transferFrequency !== TransferFrequency.ONCE;\n\n  const getAccountDisplayAmount = account => (\n    account\n      ? (account.primaryValue || account.amount)\n      : ''\n  );\n\n  const getAccountDisplayName = account => (\n    account\n      ? (account.alias || account.name || '')\n      : ''\n  );\n\n  /**\n   * @name Helpers#getPayment\n   * @type {function}\n   * @description\n   * Returns the payment object.\n   * @returns {module:widget-bbm-initiate-payment-ng.Payment}\n   */\n  const getPayment = stateContainer.createSelector(\n    state => state.payment.data\n  );\n\n  const getSchedule = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().schedule : null)\n  );\n\n  /**\n   * @name Helpers#Beneficiary\n   * @type {function}\n   * @description\n   * Returns selected beneficiary of the payment.\n   * @returns {module:widget-bbm-initiate-payment-ng.AccountView}\n   */\n  const getBeneficiary = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().beneficiary : null)\n  );\n\n  /**\n   * @name Helpers#getBeneficiaryDisplayName\n   * @type {function}\n   * @description\n   * Returns a string that will be displayed as the name of the beneficiary.\n   * @returns {string}\n   */\n  const getBeneficiaryDisplayName = () => getAccountDisplayName(getBeneficiary());\n\n  /**\n   * @name Helpers#getBeneficiaryIdentifier\n   * @type {function}\n   * @description\n   * Returns the beneficiary identifier.\n   * @returns {string}\n   */\n  const getBeneficiaryIdentifier = stateContainer.createSelector(\n    () => (getBeneficiary() ? (getBeneficiary().identifier || '') : '')\n  );\n\n  /**\n   * @name Helpers#getDebitAccount\n   * @type {function}\n   * @description\n   * Returns selected debit account of the payment.\n   * @returns {module:widget-bbm-initiate-payment-ng.AccountView}\n   */\n  const getDebitAccount = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().debitAccount : null)\n  );\n\n  /**\n   * @name Helpers#getDebitAccountCurrency\n   * @type {function}\n   * @description\n   * Returns the amount of the debit account that should be displayed.\n   * @returns {string}\n   */\n  const getDebitAccountCurrency = stateContainer.createSelector(\n    () => (getDebitAccount() ? (getDebitAccount().currency || '') : '')\n  );\n\n  /**\n   * @name Helpers#getDebitAccountDisplayAmount\n   * @type {function}\n   * @description\n   * Returns the amount of the debit account that should be displayed.\n   * @returns {string}\n   */\n  const getDebitAccountDisplayAmount = () => getAccountDisplayAmount(getDebitAccount());\n\n  /**\n   * @name Helpers#getDebitAccountDisplayName\n   * @type {function}\n   * @description\n   * Returns a string that will be displayed as the name of the debit account.\n   * @returns {string}\n   */\n  const getDebitAccountDisplayName = () => getAccountDisplayName(getDebitAccount());\n\n  /**\n   * @name Helpers#getDebitAccountIdentifier\n   * @type {function}\n   * @description\n   * Returns the debit account identifier.\n   * @returns {string}\n   */\n  const getDebitAccountIdentifier = stateContainer.createSelector(\n    () => (getDebitAccount() ? (getDebitAccount().identifier || '') : '')\n  );\n\n  /**\n   * @name Helpers#getDescription\n   * @type {function}\n   * @description\n   * Returns the description of the payment.\n   * @returns {string}\n   */\n  const getDescription = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().description : '')\n  );\n\n  /**\n   * @name Helpers#getPaymentAmount\n   * @type {function}\n   * @description\n   * Returns the amount of the payment.\n   * @returns {string}\n   */\n  const getPaymentAmount = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().amount.value : '')\n  );\n\n  /**\n   * @name Helpers#getPaymentCurrency\n   * @type {function}\n   * @description\n   * Returns the currency of the payment.\n   * @returns {string}\n   */\n  const getPaymentCurrency = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().amount.currency : '')\n  );\n\n  const getSaveContact = stateContainer.createSelector(\n    () => (getPayment() ? getPayment().saveContact : false)\n  );\n\n  /**\n   * @name Helpers#getScheduleSummary\n   * @type {function}\n   * @description\n   * Returns a summary of the given payment schedule as a string.\n   * @returns {string}\n   */\n  const getScheduleSummary = () => {\n    const schedule = getSchedule();\n\n    if (!schedule) return '';\n\n    const startingFrom = i18n('message.payment.schedule.startingFrom');\n\n    const startDate = getScheduleStartDateString(schedule);\n    const frequency = getScheduleFrequencyString(schedule);\n    const ending = getScheduleEndingString(schedule);\n\n    return isRecurring(schedule)\n      ? `${frequency}, ${startingFrom} ${startDate}, ${ending}`\n      : `${frequency}, ${startDate}`;\n  };\n\n  /**\n   * @name Helpers#showBeneficiaryIdentifier\n   * @type {function}\n   * @description\n   * Returns true, if the beneficiary name should be shown, or false otherwise.\n   * @returns {boolean}\n   */\n  const showBeneficiaryIdentifier = () => Boolean(getBeneficiaryIdentifier());\n\n  /**\n   * @name Helpers#showBeneficiaryName\n   * @type {function}\n   * @description\n   * Returns true, if the beneficiary name should be shown, or false otherwise.\n   * @returns {boolean}\n   */\n  const showBeneficiaryName = () => Boolean(getBeneficiaryDisplayName());\n\n  /**\n   * @name Helpers#showDebitAccount\n   * @type {function}\n   * @description\n   * Returns true, if the debit account should be shown, or false otherwise.\n   * @returns {boolean}\n   */\n  const showDebitAccount = () => Boolean(getDebitAccount());\n\n  /**\n   * @name Helpers#showDescription\n   * @type {function}\n   * @description\n   * Returns true, if the payment description should be shown, or false otherwise.\n   * @returns {boolean}\n   */\n  const showDescription = () => Boolean(getDescription());\n\n  /**\n   * @name Helpers#showSaveContact\n   * @type {function}\n   * @description\n   * Returns true, if the save contact message should be shown, or false otherwise.\n   * @returns {boolean}\n   */\n  const showSaveContact = () => Boolean(getSaveContact() && service.canSaveContact());\n\n  /**\n   * @name Helpers#showUrgentPayment\n   * @type {function}\n   * @description\n   * Returns true, if the urgent payment message should be shown, or false otherwise.\n   * @returns {boolean}\n   */\n  const showUrgentPayment = () => Boolean(getPayment().urgent);\n\n  /**\n   * @name Helpers#submitPayment\n   * @type {function}\n   * @description\n   * Submits the payment.\n   * @returns {Promise}\n   */\n  const submitPayment = () => {\n    service.saveContactIfNeeded();\n\n    return service.makePaymentWithAuthorization()\n      .then(() => {\n        intents.initiatePayment();\n      });\n  };\n\n  return {\n    getBeneficiaryDisplayName,\n    getBeneficiaryIdentifier,\n    getDebitAccountCurrency,\n    getDebitAccountDisplayAmount,\n    getDebitAccountDisplayName,\n    getDebitAccountIdentifier,\n    getDescription,\n    getPaymentCurrency,\n    getPaymentAmount,\n    getScheduleSummary,\n    showBeneficiaryIdentifier,\n    showBeneficiaryName,\n    showDebitAccount,\n    showDescription,\n    showSaveContact,\n    showUrgentPayment,\n    submitPayment,\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/helpers.js","import { Intent } from './constants';\n\n/**\n * @name Intents\n * @type {Object}\n */\nexport default ({ createRequest, handleRequest }) => ({\n  /**\n   * @name Intents#initiatePayment\n   * @description The intent to start a new payment.\n   * @type {function}\n   */\n  initiatePayment: createRequest(Intent.INITIATE_PAYMENT),\n\n  /**\n   * @name Intents#showReview\n   * @description Handles the intent to review a payment.\n   * @type {function}\n   */\n  showReview: handleRequest(Intent.SHOW_REVIEW),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/intents.js","/* eslint import/prefer-default-export: \"off\" */\n\n/**\n * Intents\n * @type {Object}\n */\nexport const Intent = {\n  INITIATE_PAYMENT: 'intent.rbm.paymentOrder.payment.initiate',\n  SHOW_REVIEW: 'intent.rbm.paymentOrder.review.show',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/constants.js"],"sourceRoot":""}