{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap eb1a3c706fc83c476bc2?9b81","webpack:///./model-bb-budget-ng/model.xml","webpack:///./model-bb-budget-ng/scripts/index.js","webpack:///external \"vendor-bb-angular\"","webpack:///external \"data-bb-budgeting-http-ng\"","webpack:///external \"data-bb-categories-management-http-ng\"","webpack:///external \"data-bb-transactions-http-ng\"","webpack:///external \"lib-bb-storage-ng\"","webpack:///./model-bb-budget-ng/scripts/budget.js","webpack:///external \"lib-bb-model-errors\"","webpack:///./model-bb-budget-ng/scripts/constants.js"],"names":["moduleKey","modelBudgetKey","angular","module","budgetingDataModuleKey","categoriesManagementDataModuleKey","transactionsDataModuleKey","bbStorageModuleKey","factory","budgetingDataKey","categoriesManagementDataKey","transactionsDataKey","bbStorageServiceKey","budgetsModel","name","budgetModel","Promise","budgetingData","categoriesData","transactionsData","bbStorage","defaultErrorHandler","httpErrorResponse","getBudgetSchema","schemas","postBudgetsRecord","properties","getBudgets","params","then","items","response","data","catch","createBudget","budget","updateBudget","budgetId","putBudgetsRecord","deleteBudget","deleteBudgetsRecord","loadCategories","getCategories","setItem","bbStorageKeys","TRANSACTION_CATEGORIES_LIST","e","getItem","getSpending","getCategorytotals"],"mappings":"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","file":"model-bb-budget-ng/scripts/model-bb-budget-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"data-bb-budgeting-http-ng\"), require(\"data-bb-categories-management-http-ng\"), require(\"data-bb-transactions-http-ng\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-model-errors\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"model-bb-budget-ng\", [\"vendor-bb-angular\", \"data-bb-budgeting-http-ng\", \"data-bb-categories-management-http-ng\", \"data-bb-transactions-http-ng\", \"lib-bb-storage-ng\", \"lib-bb-model-errors\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"model-bb-budget-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"data-bb-budgeting-http-ng\"), require(\"data-bb-categories-management-http-ng\"), require(\"data-bb-transactions-http-ng\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-model-errors\"));\n\telse\n\t\troot[\"model-bb-budget-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"data-bb-budgeting-http-ng\"], root[\"data-bb-categories-management-http-ng\"], root[\"data-bb-transactions-http-ng\"], root[\"lib-bb-storage-ng\"], root[\"lib-bb-model-errors\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_20__, __WEBPACK_EXTERNAL_MODULE_21__, __WEBPACK_EXTERNAL_MODULE_23__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap eb1a3c706fc83c476bc2","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./model-bb-budget-ng/model.xml\n// module id = 0\n// module chunks = 1","/**\n * @module model-bb-budget-ng\n *\n * @description\n * Budget widget model\n *\n * @example\n * import modelBudgetModuleKey, { modelBudgetKey } from 'model-bb-budget-ng';\n */\n\nimport angular from 'vendor-bb-angular';\nimport budgetingDataModuleKey, { budgetingDataKey } from 'data-bb-budgeting-http-ng';\nimport categoriesManagementDataModuleKey, {\n  categoriesManagementDataKey,\n} from 'data-bb-categories-management-http-ng';\nimport transactionsDataModuleKey, {\n  transactionsDataKey,\n} from 'data-bb-transactions-http-ng';\n\nimport bbStorageModuleKey, {\n  bbStorageServiceKey,\n} from 'lib-bb-storage-ng';\n\nimport budgetsModel from './budget';\n\nconst moduleKey = 'model-bb-budget-ng';\nexport const modelBudgetKey = `${moduleKey}:model`;\n\nexport default angular\n  .module(moduleKey, [\n    budgetingDataModuleKey,\n    categoriesManagementDataModuleKey,\n    transactionsDataModuleKey,\n    bbStorageModuleKey,\n  ])\n\n  .factory(modelBudgetKey, [\n    '$q',\n    budgetingDataKey,\n    categoriesManagementDataKey,\n    transactionsDataKey,\n    bbStorageServiceKey,\n    /* into */\n    budgetsModel,\n  ])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-budget-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_17__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 17\n// module chunks = 1 2 3","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-budgeting-http-ng\"\n// module id = 18\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-categories-management-http-ng\"\n// module id = 19\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_20__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-transactions-http-ng\"\n// module id = 20\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_21__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-storage-ng\"\n// module id = 21\n// module chunks = 1","/* eslint max-len: [\"error\", 100, { \"ignoreComments\": true }]*/\nimport { fromHttpError } from 'lib-bb-model-errors';\nimport bbStorageKeys from './constants';\n\n/**\n * @inner\n * @type {function}\n * @param {object} Promise An ES2015 compatible `Promise` object.\n * @param {object} budgetingData budgeting data module\n * @param {object} categoriesData categories managemenet data module\n * @param {object} transactionsData transactions data module\n * @param {object} bbStorage storage instance\n *\n * @return {object} model object\n */\nexport default function budgetModel(\n  Promise,\n  budgetingData,\n  categoriesData,\n  transactionsData,\n  bbStorage\n) {\n  const defaultErrorHandler = httpErrorResponse => {\n    throw fromHttpError(httpErrorResponse);\n  };\n\n  /**\n   * @name budgetModel#getBudgetSchema\n   * @type {function}\n   *\n   * @description\n   * Gets the budgeting item schema from the data (RAML)\n   *\n   * @returns {BudgetingSchema}\n   */\n  const getBudgetSchema = () => budgetingData.schemas.postBudgetsRecord.properties;\n\n   /**\n   * @name budgetModel#getBudgets\n   * @type {function}\n   *\n   * @description\n   * Gets the list of budgets\n   *\n   * @param {object} params Parameters to be passed.\n   * @returns {Promise.<BudgetingResponse>} A Promise with an array of budgets\n   */\n  const getBudgets = (params = {}) =>\n    budgetingData.getBudgets(params)\n      .then(response => ({\n        items: response.data,\n      }))\n      .catch(defaultErrorHandler);\n\n  /**\n   * @name budgetModel#createBudget\n   * @type {function}\n   *\n   * @description\n   * Creates a new budget\n   *\n   * @param {object} budget Budget data\n   * @returns {Promise} A Promise with response data\n   */\n  const createBudget = (budget) => budgetingData.postBudgetsRecord(budget)\n    .catch(defaultErrorHandler);\n\n  /**\n   * @name budgetModel#updateBudget\n   * @type {function}\n   *\n   * @description\n   * Updates an existing budget\n   *\n   * @param {string} budgetId Budget id\n   * @param {object} budget budget object\n   * @returns {Promise} A Promise with response data\n   */\n  const updateBudget = (budgetId, budget) => budgetingData.putBudgetsRecord(budgetId, budget)\n    .catch(defaultErrorHandler);\n\n  /**\n   * @name budgetModel#deleteBudget\n   * @type {function}\n   *\n   * @description\n   * Deletes a budget\n   *\n   * @param {string} budgetId Budget id\n   * @param {object} budget Budget data\n   * @returns {Promise} A Promise with response data\n   */\n  const deleteBudget = (budgetId, budget) => budgetingData.deleteBudgetsRecord(budgetId, budget)\n    .catch(defaultErrorHandler);\n\n  /**\n   * @name budgetModel#loadCategories\n   * @type {function}\n   *\n   * @inner\n   * @description\n   * Load availabe categories.\n   *\n   * @returns {Promise.<Object>} A Promise with all of the availabe categories.\n   */\n  const loadCategories = () =>\n    categoriesData.getCategories()\n      .then(data => {\n        bbStorage.setItem(bbStorageKeys.TRANSACTION_CATEGORIES_LIST, data);\n        return data;\n      })\n      .catch(e => {\n        throw fromHttpError(e);\n      });\n\n  /**\n   * @name budgetModel#getCategories\n   * @type {function}\n   *\n   * @description\n   * Load the availabe categories from server or storage.\n   *\n   * @returns {Promise.<Object>} A Promise with all of the availabe categories.\n   */\n  const getCategories = () =>\n    bbStorage.getItem(bbStorageKeys.TRANSACTION_CATEGORIES_LIST)\n      .then(data => data || loadCategories());\n\n  /**\n   * @name budgetModel#getSpending\n   * @type {function}\n   *\n   * @description\n   * Load spending analysis data by category\n   *\n   * @param {object} params Request parameters\n   * @returns {Promise.<module:model-bb-income-spending-analysis-category-ng.AnalysisCategoryData, module:lib-bb-model-errors.ModelError>} A Promise with spending or error data\n   */\n  const getSpending = (params) => transactionsData.getCategorytotals(params)\n    .then(response => response.data)\n    .catch(e => {\n      throw fromHttpError(e);\n    });\n\n  /**\n   * @name budgetModel\n   * @type {Object}\n   */\n  return {\n    getBudgetSchema,\n    getBudgets,\n    createBudget,\n    updateBudget,\n    deleteBudget,\n    getCategories,\n    getSpending,\n  };\n}\n\n/**\n * @typedef {object} BudgetingResponse\n * @property {Array.<BudgetingItem>} data\n */\n\n/**\n * @typedef {object} BudgetingItem\n * @extends module:data-bb-budgeting-http-ng.BudgetingData\n */\n\n/**\n * @typedef {object} BudgetingSchema\n * @extends module:data-bb-budgeting-http-ng.schemas\n */\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-budget-ng/scripts/budget.js","module.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 23\n// module chunks = 1 3","/**\n * @name bbStorageKeys\n * @description\n * bbStorage keys enum\n * @type {object}\n */\nconst bbStorageKeys = {\n  TRANSACTION_CATEGORIES_LIST: 'bb.transaction.categories.list',\n};\n\nexport default bbStorageKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-budget-ng/scripts/constants.js"],"sourceRoot":""}