{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*********","webpack:///webpack/bootstrap d0309a746b17cd403690?c295*********","webpack:///./ext-wm-portfolio-transactions-ng/model.xml","webpack:///external \"ui-bb-loading-indicator-ng\"?8f10********","webpack:///external \"ui-bb-i18n-ng\"?dc01********","webpack:///external \"ui-bb-empty-state-ng\"?88ee********","webpack:///external \"ui-bb-format-amount-ng\"?8f72*******","webpack:///external \"lib-bb-model-errors\"?7567********","webpack:///external \"vendor-bb-uib-accordion\"?1141*","webpack:///external \"vendor-bb-angular-ng-aria\"","webpack:///external \"ui-bb-calendar-popup-ng\"?7edd","webpack:///external \"ui-bb-ellipsis-tooltip-ng\"?1933*","webpack:///./ext-wm-portfolio-transactions-ng/scripts/index.js","webpack:///external \"ui-wm-portfolio-transactions-filter-ng\"","webpack:///external \"ui-bb-load-more-ng\"","webpack:///./ext-wm-portfolio-transactions-ng/scripts/helpers.js"],"names":["extHooks","hooks","helpers","extHelpers","dependencyKeys","uibAccordionKey","uiBbFormatAmountKey","ngAriaModuleKey","uiBbEllipsisTooltipKey","uiBbLoadingIndicatorKey","i18nKey","uiBbEmptyStateKey","uiBbCalendarPopupKey","uiWmPortfolioTransactionsFilterKey","uiBbLoadMoreKey","errors","E_AUTH","message","title","icon","E_CONNECTIVITY","E_USER","E_UNEXPECTED","statusBackgrounds","open","pending","closed","rejected","accepted","live","$filter","stateContainer","filterTimePeriodConfig","minDate","Date","maxDate","numberFilter","PRECISION","showSign","absNumber","Math","abs","number","toFixed","sign","localizedNumber","isUndefined","value","POSITION_TYPES","SECURITY","CASH","ALL","transactionsFilterFn","createSelector","transaction","positionType","toLowerCase","state","isPositionTypeSelected","isAllSelected","isSecuritySelected","isCashSelected","allColumnsDefaultConfig","dateAndDescription","quantity","price","amountAndCcy","balance","status","columnsConfigByPositionType","amount","getError","code","transactions","portfolioTransactions","data","map","list","id","isFilterApplied","appliedFilter","mapOfOpenItems","Map","isOpen","get","onToggle","item","$ctrl","details","loadTransactionDetails","set","filterOpenState","isFilterOpen","toggleFilter","closeFilter","isTransactionCategoryShown","transactionCategory","name","initialFilterState","isAssetClassShown","assetClass","isAccountShown","account","getStatusBackground","statusName"],"mappings":"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","file":"ext-wm-portfolio-transactions-ng/scripts/ext-wm-portfolio-transactions-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"lib-bb-model-errors\"), require(\"vendor-bb-uib-accordion\"), require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-calendar-popup-ng\"), require(\"ui-bb-ellipsis-tooltip-ng\"), require(\"ui-wm-portfolio-transactions-filter-ng\"), require(\"ui-bb-load-more-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-wm-portfolio-transactions-ng\", [\"ui-bb-loading-indicator-ng\", \"ui-bb-i18n-ng\", \"ui-bb-empty-state-ng\", \"ui-bb-format-amount-ng\", \"lib-bb-model-errors\", \"vendor-bb-uib-accordion\", \"vendor-bb-angular-ng-aria\", \"ui-bb-calendar-popup-ng\", \"ui-bb-ellipsis-tooltip-ng\", \"ui-wm-portfolio-transactions-filter-ng\", \"ui-bb-load-more-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-wm-portfolio-transactions-ng\"] = factory(require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"lib-bb-model-errors\"), require(\"vendor-bb-uib-accordion\"), require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-calendar-popup-ng\"), require(\"ui-bb-ellipsis-tooltip-ng\"), require(\"ui-wm-portfolio-transactions-filter-ng\"), require(\"ui-bb-load-more-ng\"));\n\telse\n\t\troot[\"ext-wm-portfolio-transactions-ng\"] = factory(root[\"ui-bb-loading-indicator-ng\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-empty-state-ng\"], root[\"ui-bb-format-amount-ng\"], root[\"lib-bb-model-errors\"], root[\"vendor-bb-uib-accordion\"], root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-calendar-popup-ng\"], root[\"ui-bb-ellipsis-tooltip-ng\"], root[\"ui-wm-portfolio-transactions-filter-ng\"], root[\"ui-bb-load-more-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_39__, __WEBPACK_EXTERNAL_MODULE_59__, __WEBPACK_EXTERNAL_MODULE_60__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0309a746b17cd403690","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-wm-portfolio-transactions-ng/model.xml\n// module id = 0\n// module chunks = 9","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-loading-indicator-ng\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-empty-state-ng\"\n// module id = 4\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount-ng\"\n// module id = 6\n// module chunks = 0 1 2 3 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 8\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 21","module.exports = __WEBPACK_EXTERNAL_MODULE_17__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-accordion\"\n// module id = 17\n// module chunks = 2 8 9 10 11 12 13","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 18\n// module chunks = 2 4 5 6 7 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-calendar-popup-ng\"\n// module id = 32\n// module chunks = 5 9","module.exports = __WEBPACK_EXTERNAL_MODULE_39__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-ellipsis-tooltip-ng\"\n// module id = 39\n// module chunks = 7 8 9 10 11 12 13","/**\n * @module ext-wm-portfolio-transactions-ng\n *\n * @description\n * Default extension for portfolio transactions widget.\n *\n *\n * @requires vendor-bb-uib-accordion\n * @example\n * <!-- portfolio widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *  <value type=\"string\">ext-wm-portfolio-transactions-ng</value>\n * </property>\n *\n *\n */\n\nimport uibAccordionKey from 'vendor-bb-uib-accordion';\nimport uiBbFormatAmountKey from 'ui-bb-format-amount-ng';\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport uiBbEllipsisTooltipKey from 'ui-bb-ellipsis-tooltip-ng';\nimport uiBbLoadingIndicatorKey from 'ui-bb-loading-indicator-ng';\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbEmptyStateKey from 'ui-bb-empty-state-ng';\nimport uiBbCalendarPopupKey from 'ui-bb-calendar-popup-ng';\nimport uiWmPortfolioTransactionsFilterKey from 'ui-wm-portfolio-transactions-filter-ng';\nimport uiBbLoadMoreKey from 'ui-bb-load-more-ng';\n\nimport extHelpers from './helpers';\nimport * as extHooks from './hooks';\n\n/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-wm-portfolio-transactions-ng\n */\nexport const hooks = extHooks;\nexport const helpers = extHelpers;\n\nexport const dependencyKeys = [\n  uibAccordionKey,\n  uiBbFormatAmountKey,\n  ngAriaModuleKey,\n  uiBbEllipsisTooltipKey,\n  uiBbLoadingIndicatorKey,\n  i18nKey,\n  uiBbEmptyStateKey,\n  uiBbCalendarPopupKey,\n  uiWmPortfolioTransactionsFilterKey,\n  uiBbLoadMoreKey,\n];\n\n/**\n * Portfolio type definition\n * @typedef {Object} PortfolioTransaction\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-portfolio-transactions-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_59__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-wm-portfolio-transactions-filter-ng\"\n// module id = 59\n// module chunks = 9","module.exports = __WEBPACK_EXTERNAL_MODULE_60__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-load-more-ng\"\n// module id = 60\n// module chunks = 9","import { E_AUTH, E_CONNECTIVITY, E_UNEXPECTED, E_USER } from 'lib-bb-model-errors';\n\n/**\n * @typedef {Object} errorMessageDescriptor\n * @property {string} message Localization key of the error message\n * @property {string} title Localization key of the error message`s title\n * @property {string} icon CSS class for icon\n */\n\n/**\n * @description\n * Map of error code to message, title and icon to display to user\n *\n * @public\n * @name errors\n * @type {object.<E_AUTH | E_CONNECTIVITY | E_UNEXPECTED | E_USER, errorMessageDescriptor>}\n */\nconst errors = {\n  [E_AUTH]: {\n    message: 'model.error.auth.message',\n    title: 'model.error.auth.title',\n    icon: 'fa-sign-in-alt',\n  },\n  [E_CONNECTIVITY]: {\n    message: 'model.error.connectivity.message',\n    title: 'model.error.connectivity.title',\n    icon: 'fa-exclamation-triangle',\n  },\n  [E_USER]: {\n    message: 'model.error.user.message',\n    title: 'model.error.user.title',\n    icon: 'fa-user',\n  },\n  [E_UNEXPECTED]: {\n    message: 'model.error.unexpected.message',\n    title: 'model.error.unexpected.title',\n    icon: 'fa-server',\n  },\n};\n\n/**\n * @description\n * Relations between statuses and background color classes for these statuses\n *\n * @name statusBackgrounds\n * @type {object}\n */\nconst statusBackgrounds = {\n  open: 'bg-primary',\n  pending: 'bg-warning',\n  closed: 'bg-secondary',\n  rejected: 'bg-danger',\n  accepted: 'bg-success',\n  'in progress': 'bg-warning',\n  live: 'bg-primary',\n};\n\nexport default ({ $filter, stateContainer }) => {\n  /**\n   * @description\n   * Ui-bb-calendar config to be used in transactions` filter`s 'Time period' date-range picker\n   *\n   * @name filterTimePeriodConfig\n   * @type {UiBbCalendarConfig}\n   */\n  const filterTimePeriodConfig = {\n    minDate: new Date(0),\n    maxDate: new Date(),\n  };\n\n  /**\n   * @name numberFilter\n   * @type {function}\n   * @description Memorized filter by number\n   */\n  const numberFilter = $filter('number');\n\n  /**\n   * @name PRECISION\n   * @type {number}\n   *\n   * @description\n   * Number of decimals to display\n   */\n  const PRECISION = 2;\n\n  /**\n   * @description\n   * Appends + or - sign if number is positive or negative\n   *\n   * @public\n   * @name showSign\n   * @type {function}\n   * @param {number} number     Number inputed\n   *\n   * @returns {string}          String with appended sign and number\n   */\n  const showSign = number => {\n    const absNumber = Math.abs(number).toFixed(PRECISION);\n    const sign = number > 0 ? '+' : '-';\n    const localizedNumber = numberFilter(absNumber, PRECISION);\n    return `${sign} ${localizedNumber}`;\n  };\n\n  /**\n   * @description\n   * Checks whether value is undefined\n   *\n   * @public\n   * @name isUndefined\n   * @type {function}\n   * @param {value} any\n   *\n   * @returns {boolean}\n   */\n  const isUndefined = value => typeof value === 'undefined';\n\n\n  /**\n   * @name POSITION_TYPES\n   * @enum {string}\n   *\n   * @description\n   * Map of constants for positions types\n   */\n  const POSITION_TYPES = {\n    SECURITY: 'Security',\n    CASH: 'Cash',\n    ALL: 'All',\n  };\n\n  /**\n   * @description\n   * Returns a function that filters transactions by position type\n   *\n   * @public\n   * @name transactionsFilterFn\n   * @type {function}\n   * @param {POSITION_TYPES} positionType\n   *\n   * @returns {function}\n   */\n  const transactionsFilterFn = stateContainer.createSelector(state =>\n    transaction => (\n      transaction.positionType.toLowerCase() === state.positionType.toLowerCase()\n      || state.positionType === POSITION_TYPES.ALL\n    )\n  );\n\n  /**\n   * @public\n   * @name isPositionTypeSelected\n   * @type {function}\n   * @description Returns boolean which tells wether given position type is currently selected\n   * @param {string} positionType Transactions' position type\n   * @returns {boolean} Is given type selected\n   */\n  const isPositionTypeSelected = positionType => stateContainer.createSelector(state =>\n    state.positionType.toLowerCase() === positionType.toLowerCase()\n  );\n\n  /**\n   * @public\n   * @name isAllSelected\n   * @type {boolean}\n   * @description Tells, whether all types of transactions have to be shown\n   */\n  const isAllSelected = isPositionTypeSelected('ALL');\n\n  /**\n   * @public\n   * @name isSecuritySelected\n   * @type {boolean} Do security type of transactions has to be shown\n   * @description Tells, whether security type of transactions has to be shown\n   */\n  const isSecuritySelected = isPositionTypeSelected('SECURITY');\n\n  /**\n   * @public\n   * @name isCashSelected\n   * @type {boolean} Do cash type of transactions has to be shown\n   * @description Tells, whether cash type of transactions has to be shown\n   */\n  const isCashSelected = isPositionTypeSelected('CASH');\n\n  /**\n   * @description\n   * Default config for columns.\n   * Specifies whether specific columns is visible by default,\n   * and what width it has.\n   *\n   * @public\n   * @name allColumnsDefaultConfig\n   * @type {Object.<string, Object>}\n   */\n  const allColumnsDefaultConfig = {\n    dateAndDescription: true,\n    quantity: true,\n    price: true,\n    amountAndCcy: true,\n    balance: true,\n    status: true,\n  };\n\n  /**\n   * @description\n   * Config for changing table`s view based on selected position type.\n   * Config contains info whether specific column should be visible\n   * if specific position type is selected,\n   * and how width of visible column should change if some other columns are hidden.\n   *\n   * @public\n   * @name columnsConfigByPositionType\n   * @type {Object.<POSITION_TYPES, Object>}\n   */\n  const columnsConfigByPositionType = {\n    [POSITION_TYPES.ALL]: allColumnsDefaultConfig,\n    [POSITION_TYPES.SECURITY]: allColumnsDefaultConfig,\n    [POSITION_TYPES.CASH]: {\n      ...allColumnsDefaultConfig,\n      dateAndDescription: true,\n      quantity: false,\n      price: false,\n      amount: true,\n    },\n  };\n\n  /**\n   * @description\n   * Returns error object by error code\n   *\n   * @public\n   * @name getError\n   * @type {function}\n   * @returns {errorMessageDescriptor} Descriptor of the error\n   */\n  const getError = (code) => errors[code];\n\n  /**\n   * @public\n   * @name transactions\n   * @type {function}\n   * @description Selector for transactions' data\n   * @returns {array} Transactions list\n   */\n  const transactions = stateContainer.createSelector(state => (\n    state.portfolioTransactions.data.map(id => state.portfolioTransactions.list[id])\n  ));\n\n  /**\n   * @public\n   * @name isFilterApplied\n   * @type {boolean} Are filter options applied\n   * @description Tells, whether filter options are applied\n   */\n  const isFilterApplied = stateContainer.createSelector(state => !!state.appliedFilter);\n\n  /**\n   * @name mapOfOpenItems\n   * @type {map}\n   *\n   * @description\n   * Keeps ids of items that were toggled\n   */\n  const mapOfOpenItems = new Map();\n\n  /**\n   * @name isOpen\n   * @type {function}\n   * @description Tells, whether item's open property is truthy\n   * @param {number} id\n   * @returns {boolean} Flag (true|false) that stands for open state of item\n   */\n  const isOpen = id => mapOfOpenItems.get(id);\n\n  /**\n   * @name onToggle\n   * @type {function}\n   * @description Changes open state of item to the opposite\n   * @param {object} item Transaction object\n   * @returns {map} Map of items\n   */\n  const onToggle = (item, $ctrl) => {\n    if (!item.details) {\n      $ctrl.loadTransactionDetails(item.id);\n    }\n\n    return mapOfOpenItems.set(item.id, !mapOfOpenItems.get(item.id));\n  };\n\n  /**\n   * @name filterOpenState\n   * @type {boolean}\n   *\n   * @description\n   * Displays current state of filter (open|closed)\n   */\n  let filterOpenState = false;\n\n  /**\n   * @public\n   * @name isFilterOpen\n   * @type {function}\n   * @returns {{filterOpenState: boolean}} Current state of filter\n   */\n  const isFilterOpen = () => filterOpenState;\n\n  /**\n   * @public\n   * @name toggleFilter\n   * @type {function}\n   * @param {object} state Current state of widget\n   * @description Toggles filter open state\n   */\n  const toggleFilter = () => {\n    filterOpenState = !filterOpenState;\n  };\n\n  /**\n   * @public\n   * @name closeFilter\n   * @type {function}\n   * @description Sets filter open state to false\n   */\n  const closeFilter = () => {\n    filterOpenState = false;\n  };\n\n  /**\n   * @name isTransactionCategoryShown\n   * @type {function}\n   * @description Tells, whether filter transaction category label must be shown\n   * @returns {boolean} Flag (true|false) that stands for display state of filter label\n   */\n  const isTransactionCategoryShown = stateContainer.createSelector(state => {\n    if (!state.appliedFilter) { return false; }\n    return state.appliedFilter.transactionCategory.name !==\n      state.initialFilterState.transactionCategory.name;\n  });\n\n  /**\n   * @name isAssetClassShown\n   * @type {function}\n   * @description Tells, whether filter asset class label must be shown\n   * @returns {boolean} Flag (true|false) that stands for display state of filter label\n   */\n  const isAssetClassShown = stateContainer.createSelector(state => {\n    if (!state.appliedFilter) { return false; }\n    return state.appliedFilter.assetClass.name !== state.initialFilterState.assetClass.name;\n  });\n\n  /**\n   * @name isAccountShown\n   * @type {function}\n   * @description Tells, whether filter account label must be shown\n   * @returns {boolean} Flag (true|false) that stands for display state of filter label\n   */\n  const isAccountShown = stateContainer.createSelector(state => {\n    if (!state.appliedFilter || !state.appliedFilter.account) { return false; }\n    return state.appliedFilter.account.name !== state.initialFilterState.account.name;\n  });\n\n  /**\n   * @descriptions\n   * Gets background color class for current status\n   *\n   * @name getStatusBackground\n   * @type {function}\n   * @param {string} status Status name\n   * @returns {string} Class name with background color\n   */\n  const getStatusBackground = (status) => {\n    if (!status) { return ''; }\n    const statusName = status.toLowerCase();\n    return statusBackgrounds[statusName] || '';\n  };\n\n  return {\n    getError,\n    filterTimePeriodConfig,\n    showSign,\n    isUndefined,\n    transactionsFilterFn,\n    POSITION_TYPES,\n    columnsConfigByPositionType,\n    isPositionTypeSelected,\n    transactions,\n    isFilterApplied,\n    isAllSelected,\n    isCashSelected,\n    isSecuritySelected,\n    isOpen,\n    onToggle,\n    isFilterOpen,\n    toggleFilter,\n    closeFilter,\n    isTransactionCategoryShown,\n    isAssetClassShown,\n    isAccountShown,\n    getStatusBackground,\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-portfolio-transactions-ng/scripts/helpers.js"],"sourceRoot":""}