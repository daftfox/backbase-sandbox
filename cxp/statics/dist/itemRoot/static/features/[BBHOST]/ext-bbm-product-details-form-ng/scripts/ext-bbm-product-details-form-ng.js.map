{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6******","webpack:///webpack/bootstrap a983de776e3686600b94?4bc9******","webpack:///./ext-bbm-product-details-form-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01*****","webpack:///./ext-bbm-product-details-form-ng/scripts/index.js","webpack:///external \"ui-bbm-textfield-ng\"","webpack:///./ext-bbm-product-details-form-ng/scripts/events.js","webpack:///external \"lib-bbm-plugins\"","webpack:///./ext-bbm-product-details-form-ng/scripts/constants.js","webpack:///./ext-bbm-product-details-form-ng/scripts/helpers.js","webpack:///./ext-bbm-product-details-form-ng/scripts/intents.js"],"names":["events","extEvents","helpers","extHelpers","intents","extIntents","dependencyKeys","i18nKey","uiBbmTextfieldKey","$filter","withNativeEvents","i18n","Event","BEFORE_PRODUCT_ALIAS_UPDATE","plugins","ActivityIndicator","show","AFTER_PRODUCT_ALIAS_UPDATE_SUCCESS","hide","Snackbar","success","AFTER_PRODUCT_ALIAS_UPDATE_ERROR","error","Intent","SHOW_PRODUCT_DETAILS_VIEW","SHOW_PRODUCT_ALIAS_FORM","stateContainer","service","getProductDetails","createSelector","state","productDetails","data","getFormData","form","isFormValid","Boolean","$valid","$dirty","updateProductAlias","id","alias","then","patchProductDetailsDataState","showProductDetailsView","createRequest","handleRequest","showProductAliasForm","setProductAliasForm"],"mappings":"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","file":"ext-bbm-product-details-form-ng/scripts/ext-bbm-product-details-form-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bbm-textfield-ng\"), require(\"lib-bbm-plugins\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bbm-product-details-form-ng\", [\"ui-bb-i18n-ng\", \"ui-bbm-textfield-ng\", \"lib-bbm-plugins\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bbm-product-details-form-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bbm-textfield-ng\"), require(\"lib-bbm-plugins\"));\n\telse\n\t\troot[\"ext-bbm-product-details-form-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"ui-bbm-textfield-ng\"], root[\"lib-bbm-plugins\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_36__, __WEBPACK_EXTERNAL_MODULE_38__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a983de776e3686600b94","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-product-details-form-ng/model.xml\n// module id = 0\n// module chunks = 6","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 8\n// module chunks = 0 1 2 4 5 6 7 8 9 10 11 12 13 14","/**\n * @module ext-bbm-product-details-form-ng\n *\n * @description\n * Mobile extension for the product details form in the Mobile Product Details widget.\n *\n * @example\n * <!-- Mobile Product Details Widget widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *   <value type=\"string\">ext-bbm-product-details-form-ng</value>\n * </property>\n */\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbmTextfieldKey from 'ui-bbm-textfield-ng';\n\nimport extEvents from './events';\nimport extHelpers from './helpers';\nimport extIntents from './intents';\n\nexport const events = extEvents;\nexport const helpers = extHelpers;\nexport const intents = extIntents;\n\nexport const dependencyKeys = [\n  i18nKey,\n  uiBbmTextfieldKey,\n];\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-product-details-form-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_36__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-textfield-ng\"\n// module id = 36\n// module chunks = 6","// Temporary disable capsInNew until it fixed in lib-bbm-plugins\n/* eslint new-cap: [\"error\", { \"capIsNew\": false }] */\nimport plugins from 'lib-bbm-plugins';\nimport { Event } from './constants';\n\nexport default ({ $filter, withNativeEvents }) => {\n  const i18n = $filter('i18n');\n\n  return withNativeEvents({}, {\n    [Event.BEFORE_PRODUCT_ALIAS_UPDATE]: () => {\n      plugins.ActivityIndicator().show(i18n('message.productDetails.alias.edit.start'));\n    },\n    [Event.AFTER_PRODUCT_ALIAS_UPDATE_SUCCESS]: () => {\n      plugins.ActivityIndicator().hide();\n      plugins.Snackbar().success(i18n('message.productDetails.alias.edit.done'));\n    },\n    [Event.AFTER_PRODUCT_ALIAS_UPDATE_ERROR]: () => {\n      plugins.ActivityIndicator().hide();\n      plugins.Snackbar().error(i18n('message.personalProfile.alias.edit.failed'));\n    },\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-product-details-form-ng/scripts/events.js","module.exports = __WEBPACK_EXTERNAL_MODULE_38__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bbm-plugins\"\n// module id = 38\n// module chunks = 6","/* eslint-disable import/prefer-default-export */\n\n/**\n * Pubsub events\n * @type {Object}\n */\nexport const Event = {\n  BEFORE_PRODUCT_ALIAS_UPDATE: 'bb.event.productDetails.alias.edit.start',\n  AFTER_PRODUCT_ALIAS_UPDATE_SUCCESS: 'bb.event.productDetails.alias.edit.done',\n  AFTER_PRODUCT_ALIAS_UPDATE_ERROR: 'bb.event.productDetails.alias.edit.failed',\n};\n\n/**\n * Intent\n * @type {Object}\n */\nexport const Intent = {\n  SHOW_PRODUCT_DETAILS_VIEW: 'intent.rbm.productDetails.view.show',\n  SHOW_PRODUCT_ALIAS_FORM: 'intent.rbm.productDetails.alias.edit',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-product-details-form-ng/scripts/constants.js","/**\n * @name Helpers\n * @type {Object}\n *\n * @description\n * Helpers for ext-bbm-product-details-form-ng\n */\nexport default ({ stateContainer, service, intents }) => {\n  /**\n   * @name Helpers#getProductDetails\n   * @description Returns product details data.\n   * @type {function}\n   *\n   * @returns {object}\n   */\n  const getProductDetails = stateContainer.createSelector(state =>\n    state.productDetails.data\n  );\n\n  /**\n   * @name Helpers#getFormData\n   * @description Retrieves form data.\n   * @type {function}\n   *\n   * @returns {object}\n   */\n  const getFormData = stateContainer.createSelector(state =>\n    state.form.data\n  );\n\n  /**\n   * @name Helpers#isFormValid\n   * @description\n   * Helper to get the form validation status.\n   * @type {function}\n   *\n   * @param {Object} form\n   * @return {boolean} validation status.\n   */\n  const isFormValid = form => Boolean(form.$valid && form.$dirty);\n\n  /**\n   * @name Helpers#updateProductAlias\n   * @description\n   * Helper to update a product alias.\n   * @type {function}\n   *\n   * @return {Promise}\n   */\n  const updateProductAlias = () => {\n    const { id } = getProductDetails();\n    const { alias } = getFormData();\n\n    return service.updateProductAlias({ id, alias })\n      .then(() => {\n        service.patchProductDetailsDataState({ alias });\n        intents.showProductDetailsView(id);\n      });\n  };\n\n  return {\n    getProductDetails,\n    getFormData,\n    updateProductAlias,\n    isFormValid,\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-product-details-form-ng/scripts/helpers.js","import { Intent } from './constants';\n\n/**\n * @name Intents\n * @type {Object}\n */\nexport default ({ createRequest, handleRequest, service }) => ({\n  /**\n   * @name Intents#showProductDetailsView\n   * @description The intent to show the product details view.\n   * @type {function}\n   */\n  showProductDetailsView: createRequest(Intent.SHOW_PRODUCT_DETAILS_VIEW),\n\n  /**\n   * @name Intents#showProductAliasForm\n   * @description Handler of the 'intent.bb.productDetails.alias.edit' intent.\n   * @type {function}\n   */\n  showProductAliasForm: handleRequest(Intent.SHOW_PRODUCT_ALIAS_FORM, () => {\n    service.setProductAliasForm();\n  }),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-product-details-form-ng/scripts/intents.js"],"sourceRoot":""}