{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap cc7322ffdf95b24f50a3","webpack:///./ext-bb-action-recipes-ng/model.xml","webpack:///./ext-bb-action-recipes-ng/scripts/index.js","webpack:///external \"vendor-bb-angular-ng-aria\"","webpack:///external \"ui-bb-substitute-error-ng\"","webpack:///external \"ui-bb-i18n-ng\"","webpack:///external \"ui-bb-account-selector-ng\"","webpack:///external \"ui-bb-dropdown-select-ng\"","webpack:///external \"ui-bb-currency-input-ng\"","webpack:///external \"ui-bb-format-amount-ng\"","webpack:///external \"ui-bb-loading-indicator-ng\"","webpack:///external \"ui-bb-confirm-ng\"","webpack:///external \"ui-bb-switcher-ng\"","webpack:///external \"ui-bb-load-more-ng\"","webpack:///./ext-bb-action-recipes-ng/scripts/helpers.js","webpack:///./ext-bb-action-recipes-ng/scripts/hooks.js","webpack:///./ext-bb-action-recipes-ng/scripts/recipes/credit-transaction.js","webpack:///./ext-bb-action-recipes-ng/scripts/constants.js","webpack:///./ext-bb-action-recipes-ng/scripts/recipes/filter-helpers.js","webpack:///./ext-bb-action-recipes-ng/scripts/recipes/low-balance.js","webpack:///./ext-bb-action-recipes-ng/scripts/events.js"],"names":["dependencyKeys","ngAriaModuleKey","uiBbSubstituteErrorKey","i18nKey","uiBbAccountSelectorKey","uiBbDropdownSelectKey","uiBbCurrencyInputKey","uiBbFormatAmountKey","uiBbLoadingIndicatorKey","uiBbConfirmKey","uiBbSwitcherKey","uiBbLoadMoreKey","hooks","extHooks","helpers","extHelpers","events","extEvents","CONDITION_OPTIONS","isValid","recipe","account","amount","value","actions","isSelected","conditions","createRecipeFilter","specification","trigger","accounts","type","CREDIT_TRANSACTION_TYPE","CreditTransactionFilter","ACCOUNT_LOW_BALANCE_TYPE","AccountLowBalanceFilter","ACCOUNT_ID","TRANSACTION_TYPE_PARAM","TRANSACTION_TYPE_CREDIT","TRANSACTION_AMOUNT_PARAM","DEFAULT_AMOUNT","TEMPLATE_ID","condition","Operator","greaterOrEqual","filter","transactionAmountFilter","toString","operator","selectors","accountIdSelector","find","item","path","acc","id","templateId","currency","Boolean","and","equals","pathValue","parseFloat","greaterThan","lessThan","lessOrEqual","findFilter","filterDefinition","searchKey","Object","keys","fnParams","result","i","length","isTriggerFilterEmpty","isTriggerSelectorsEmpty","isTriggerEmpty","ACCOUNT_CURRENT_BALANCE_PARAM","ACCOUNT_PREVIOUS_BALANCE_PARAM","lowBalanceFilter","notifications","$filter","notifyAlert"],"mappings":"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","file":"ext-bb-action-recipes-ng/scripts/ext-bb-action-recipes-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-account-selector-ng\"), require(\"ui-bb-dropdown-select-ng\"), require(\"ui-bb-currency-input-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-confirm-ng\"), require(\"ui-bb-switcher-ng\"), require(\"ui-bb-load-more-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bb-action-recipes-ng\", [\"vendor-bb-angular-ng-aria\", \"ui-bb-substitute-error-ng\", \"ui-bb-i18n-ng\", \"ui-bb-account-selector-ng\", \"ui-bb-dropdown-select-ng\", \"ui-bb-currency-input-ng\", \"ui-bb-format-amount-ng\", \"ui-bb-loading-indicator-ng\", \"ui-bb-confirm-ng\", \"ui-bb-switcher-ng\", \"ui-bb-load-more-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bb-action-recipes-ng\"] = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-account-selector-ng\"), require(\"ui-bb-dropdown-select-ng\"), require(\"ui-bb-currency-input-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-confirm-ng\"), require(\"ui-bb-switcher-ng\"), require(\"ui-bb-load-more-ng\"));\n\telse\n\t\troot[\"ext-bb-action-recipes-ng\"] = factory(root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-substitute-error-ng\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-account-selector-ng\"], root[\"ui-bb-dropdown-select-ng\"], root[\"ui-bb-currency-input-ng\"], root[\"ui-bb-format-amount-ng\"], root[\"ui-bb-loading-indicator-ng\"], root[\"ui-bb-confirm-ng\"], root[\"ui-bb-switcher-ng\"], root[\"ui-bb-load-more-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cc7322ffdf95b24f50a3","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bb-action-recipes-ng/model.xml\n// module id = 0\n// module chunks = 0","/**\n * @module ext-bb-action-recipes-ng\n *\n * @description\n * Action Recipes default extension.\n *\n * @example\n * <!-- messages widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *   <value type=\"string\">ext-bb-action-recipes-ng</value>\n * </property>\n */\n\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport uiBbSubstituteErrorKey from 'ui-bb-substitute-error-ng';\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbAccountSelectorKey from 'ui-bb-account-selector-ng';\nimport uiBbDropdownSelectKey from 'ui-bb-dropdown-select-ng';\nimport uiBbCurrencyInputKey from 'ui-bb-currency-input-ng';\nimport uiBbFormatAmountKey from 'ui-bb-format-amount-ng';\nimport uiBbLoadingIndicatorKey from 'ui-bb-loading-indicator-ng';\nimport uiBbConfirmKey from 'ui-bb-confirm-ng';\nimport uiBbSwitcherKey from 'ui-bb-switcher-ng';\nimport uiBbLoadMoreKey from 'ui-bb-load-more-ng';\n\nimport extHelpers from './helpers';\nimport extHooks from './hooks';\nimport extEvents from './events';\n\nexport const dependencyKeys = [\n  ngAriaModuleKey,\n  uiBbSubstituteErrorKey,\n  i18nKey,\n  uiBbAccountSelectorKey,\n  uiBbDropdownSelectKey,\n  uiBbCurrencyInputKey,\n  uiBbFormatAmountKey,\n  uiBbLoadingIndicatorKey,\n  uiBbConfirmKey,\n  uiBbSwitcherKey,\n  uiBbLoadMoreKey,\n];\n\nexport const hooks = extHooks;\nexport const helpers = extHelpers;\nexport const events = extEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-substitute-error-ng\"\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-account-selector-ng\"\n// module id = 5\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-dropdown-select-ng\"\n// module id = 6\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-currency-input-ng\"\n// module id = 7\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount-ng\"\n// module id = 8\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-loading-indicator-ng\"\n// module id = 9\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-confirm-ng\"\n// module id = 10\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-switcher-ng\"\n// module id = 11\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-load-more-ng\"\n// module id = 12\n// module chunks = 0","const CONDITION_OPTIONS = ['lt', 'gt'];\n\n/**\n * @description\n * Validate Recipe data.\n * @name isValid\n * @type {function}\n * @return {boolean} true if recipe passes the validation\n */\nconst isValid = recipe => recipe.account && recipe.amount.value && recipe.actions.isSelected();\n\nexport default {\n  conditions: CONDITION_OPTIONS,\n  isValid,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/helpers.js","import { CreditTransactionFilter, CREDIT_TRANSACTION_TYPE } from './recipes/credit-transaction';\nimport { AccountLowBalanceFilter, ACCOUNT_LOW_BALANCE_TYPE } from './recipes/low-balance';\n\nexport default {\n  createRecipeFilter(specification, trigger, accounts) {\n    switch (specification.type) {\n      case CREDIT_TRANSACTION_TYPE:\n        return new CreditTransactionFilter(trigger, accounts);\n      case ACCOUNT_LOW_BALANCE_TYPE:\n        return new AccountLowBalanceFilter(trigger, accounts);\n      default:\n        return null;\n    }\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/hooks.js","import { Operator } from '../constants';\nimport { findFilter, isTriggerFilterEmpty, isTriggerSelectorsEmpty } from './filter-helpers';\n\nconst ACCOUNT_ID = 'transaction.arrangementId';\nconst TRANSACTION_TYPE_PARAM = 'transaction.creditDebitIndicator';\nconst TRANSACTION_TYPE_CREDIT = 'CRDT';\nconst TRANSACTION_AMOUNT_PARAM = 'transaction.amount';\nconst DEFAULT_AMOUNT = '0';\nconst TEMPLATE_ID = 'credit-transaction';\n\nexport const CREDIT_TRANSACTION_TYPE = 'newTransaction';\n\n/**\n * @name CreditTransactionFilter\n * @type {object}\n */\nexport class CreditTransactionFilter {\n  constructor(trigger, accounts) {\n    let condition = Operator.greaterOrEqual;\n    let amount = DEFAULT_AMOUNT;\n\n    // When a recipe is already created\n    if (trigger) {\n      if (!isTriggerFilterEmpty(trigger.filter)) {\n        const transactionAmountFilter = findFilter(trigger.filter, TRANSACTION_AMOUNT_PARAM);\n\n        amount = transactionAmountFilter.value.toString();\n        condition = transactionAmountFilter.operator;\n      }\n\n      if (!isTriggerSelectorsEmpty(trigger.selectors)) {\n        const accountIdSelector = trigger.selectors.find(item => item.path === ACCOUNT_ID);\n\n        if (accounts) {\n          this.account = accounts.find(acc => acc.id === accountIdSelector.value);\n        }\n      }\n    }\n\n    this.templateId = TEMPLATE_ID;\n    this.amount = { value: amount, currency: 'USD' };\n    this.condition = condition;\n  }\n\n  validate() {\n    return Boolean(this.account &&\n      this.amount && this.amount.value && this.amount.value > 0 &&\n      this.condition);\n  }\n\n  /**\n   * @name CreditTransactionFilter#changeAccount\n   * @description Handles change of selected account. Changes the currency of this filter to\n   * the currency of the selected account. Retains the old inputted amount value.\n   * @param {object} account the newly selected account\n   * @type {function} * @typedef CreditTransactionFilter\n   */\n  changeAccount(account) {\n    this.amount = {\n      value: this.amount.value,\n      currency: account.currency,\n    };\n    this.account = account;\n  }\n\n  toApiModel() {\n    return {\n      selectors: [\n        {\n          path: ACCOUNT_ID,\n          value: this.account.id,\n        },\n      ],\n      filter: {\n        and: [{\n          [Operator.equals]: [{ pathValue: [TRANSACTION_TYPE_PARAM] }, TRANSACTION_TYPE_CREDIT],\n        }, {\n          [this.condition]: [\n            { pathValue: [TRANSACTION_AMOUNT_PARAM] },\n            parseFloat(this.amount.value),\n          ],\n        }],\n      },\n    };\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/recipes/credit-transaction.js","export const Operator = {\n  greaterThan: 'gt',\n  lessThan: 'lt',\n  equals: 'eq',\n  greaterOrEqual: 'gte',\n  lessOrEqual: 'lte',\n};\n\nexport default {\n  Operator,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/constants.js","/**\n * @name filterHelpers\n * @type {object}\n */\n\n/**\n * @name filterHelpers#findFilter\n * @param {Object} trigger trigger to check\n * @type {function}\n * @returns {Object}\n */\nexport const findFilter = (filterDefinition, searchKey) => {\n  const operator = Object.keys(filterDefinition)[0]; // Get function operator\n  const fnParams = filterDefinition[operator];\n  let result = null;\n\n  // Leaf logic\n  if (fnParams[0].pathValue) {\n    if (fnParams[0].pathValue[0] === searchKey) {\n      return {\n        operator,\n        value: fnParams[1],\n      };\n    }\n    return null;\n  }\n\n  // Branch logic\n  for (let i = 0; result == null && i < fnParams.length; i++) {\n    result = findFilter(fnParams[i], searchKey);\n  }\n\n  return result;\n};\n\n/**\n * @description Checks empty state the given trigger's filter.\n * @name filterHelpers#isTriggerFilterEmpty\n * @param {Object} trigger trigger to check\n * @type {function}\n * @returns {boolean} True if trigger's filter is empty\n */\nexport const isTriggerFilterEmpty = (filter) => Boolean(filter) && Object.keys(filter).length === 0;\n\n/**\n * @description Checks empty state the given trigger's selectors.\n * @name filterHelpers#isTriggerSelectorsEmpty\n * @param {Object} trigger trigger to check\n * @type {function}\n * @returns {boolean} True if trigger's selectors is empty\n */\nexport const isTriggerSelectorsEmpty = (selectors) => Boolean(selectors) && selectors.length === 0;\n\n/**\n * @description Checks empty state the given trigger (looks on trigger's filter and its selectors).\n * @name filterHelpers#isTriggerEmpty\n * @param {Object} trigger trigger to check\n * @type {function}\n * @returns {boolean} True if trigger's filter and its selectors are empty\n */\nexport const isTriggerEmpty = ({ filter, selectors }) =>\n  isTriggerFilterEmpty(filter) && isTriggerSelectorsEmpty(selectors);\n\nexport default {\n  findFilter,\n  isTriggerFilterEmpty,\n  isTriggerSelectorsEmpty,\n  isTriggerEmpty,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/recipes/filter-helpers.js","import { Operator } from '../constants';\nimport { findFilter, isTriggerFilterEmpty, isTriggerSelectorsEmpty } from './filter-helpers';\n\nconst ACCOUNT_ID = 'account.arrangementId';\nconst ACCOUNT_CURRENT_BALANCE_PARAM = 'account.currentBalance';\nconst ACCOUNT_PREVIOUS_BALANCE_PARAM = 'account.previousBalance';\nconst DEFAULT_AMOUNT = '0';\nconst TEMPLATE_ID = 'low-balance';\n\nexport const ACCOUNT_LOW_BALANCE_TYPE = 'accountLowBalance';\n\n/**\n * @name AccountLowBalanceFilter\n * @type {object}\n */\nexport class AccountLowBalanceFilter {\n  constructor(trigger, accounts) {\n    let condition = Operator.lessThan;\n    let amount = DEFAULT_AMOUNT;\n\n    // When a recipe is already created\n    if (trigger) {\n      if (!isTriggerFilterEmpty(trigger.filter)) {\n        const lowBalanceFilter = findFilter(trigger.filter, ACCOUNT_CURRENT_BALANCE_PARAM);\n\n        amount = lowBalanceFilter.value.toString();\n        condition = lowBalanceFilter.operator;\n      }\n\n      if (!isTriggerSelectorsEmpty(trigger.selectors)) {\n        const accountIdSelector = trigger.selectors.find(item => item.path === ACCOUNT_ID);\n\n        if (accounts) {\n          this.account = accounts.find(acc => acc.id === accountIdSelector.value);\n        }\n      }\n    }\n\n    this.templateId = TEMPLATE_ID;\n    this.amount = { value: amount, currency: 'USD' };\n    this.condition = condition;\n  }\n\n  validate() {\n    return Boolean(this.account &&\n      this.amount && this.amount.value && this.amount.value > 0 &&\n      this.condition);\n  }\n\n  /**\n   * @name AccountLowBalanceFilter#changeAccount\n   * @description Handles change of selected account. Changes the currency of this filter to\n   * the currency of the selected account. Retains the old inputted amount value.\n   * @param {object} account the newly selected account\n   * @type {function} * @typedef AccountLowBalanceFilter\n   */\n  changeAccount(account) {\n    this.amount = {\n      value: this.amount.value,\n      currency: account.currency,\n    };\n    this.account = account;\n  }\n\n  toApiModel() {\n    const amount = parseFloat(this.amount.value);\n\n    return {\n      selectors: [\n        {\n          path: ACCOUNT_ID,\n          value: this.account.id,\n        },\n      ],\n      filter: {\n        and: [\n          {\n            [Operator.greaterOrEqual]: [\n              { pathValue: [ACCOUNT_PREVIOUS_BALANCE_PARAM] },\n              amount,\n            ],\n          },\n          {\n            [this.condition]: [\n              { pathValue: [ACCOUNT_CURRENT_BALANCE_PARAM] },\n              amount,\n            ],\n          },\n        ],\n      },\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/recipes/low-balance.js","const events = ({ notifications, $filter }) => ({\n  'bb.event.actionrecipe.activate.failed': () => {\n    notifications.notifyAlert($filter('i18n')('error.recipe.activation.failed'));\n  },\n  'bb.event.actionrecipe.deactivate.failed': () => {\n    notifications.notifyAlert($filter('i18n')('error.recipe.deactivation.failed'));\n  },\n});\n\nexport default events;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-action-recipes-ng/scripts/events.js"],"sourceRoot":""}