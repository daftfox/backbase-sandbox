{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6******","webpack:///webpack/bootstrap 01348824f603eeb6378e?e65a******","webpack:///./ui-bb-draft-edit-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114**","webpack:///external \"ui-bb-rich-text-editor-ng\"?8967","webpack:///./ui-bb-draft-edit-ng/scripts/index.js","webpack:///external \"ui-bb-dropdown-select-ng\"","webpack:///./ui-bb-draft-edit-ng/scripts/component.js","webpack:///./ui-bb-draft-edit-ng/scripts/controller.js"],"names":["dependencyKeys","module","component","name","bindings","topics","config","onClose","onSend","messages","controller","template","attrs","selectTopicPlaceholder","messagePlaceholder","$ctrl","checkForm","ctrl","result","$error","required","length","maxLength","$$controls","close","formCtrl","isEmpty","draft","$isEmpty","send","Object","assign","category","code","then"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,0C;;;;;;;ACAA,iD;;;;;;;ACAA,iD;;;;;;;;;;;;;ACGA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAPA;;;AASA,KAAMA,iBAAiB,gEAAvB;;mBAKe,0BAAQC,MAAR,CAAe,qBAAf,EAAsCD,cAAtC,EACZE,SADY,CACF,iBADE,uBAEZC,I;;;;;;;AChBH,iD;;;;;;;;;;;;;ACAA;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,KAAMD,YAAY;AAChBE,aAAU;AACRC,aAAQ,GADA;AAERC,aAAQ,GAFA;AAGRC,cAAS,GAHD;AAIRC,aAAQ,GAJA;AAKRC,eAAU;AALF,IADM;AAQhBC,mCARgB;AAShBC,aAAU,CAAC,QAAD,EAAW,UAACC,KAAD;AAAA,ooBAcaA,MAAMC,sBAdnB,k0CA8CMD,MAAME,kBA9CZ;AAAA,IAAX;AATM,EAAlB;;mBA4FeZ,S;;AAEf;;;;;;;AAOA;;;;;AAKA;;;;;;;;;;;;;;;;;;;;mBCxIwBQ,U;AAAT,UAASA,UAAT,GAAsB;AACnC,OAAMK,QAAQ,IAAd;;AAEA;;;;;;;;;AASA,OAAMC,YAAY,SAAZA,SAAY,CAACC,IAAD,EAAU;AAC1B,SAAIC,SAAS,IAAb;;AAEA,SAAID,KAAKE,MAAL,CAAYC,QAAhB,EAA0B;AACxB,WAAMC,SAASJ,KAAKE,MAAL,CAAYC,QAAZ,CAAqBC,MAApC;AACA,WAAMC,YAAYL,KAAKM,UAAL,CAAgBF,MAAlC;;AAEAH,gBAASG,SAAS,CAAT,IAAcA,WAAWC,SAAlC;AACD;AACD,YAAOJ,MAAP;AACD,IAVD;;AAYA;;;;;;;;AAQA,OAAMM,QAAQ,SAARA,KAAQ,CAACC,QAAD,EAAc;AAC1B,SAAMC,UAAUV,UAAUS,QAAV,CAAhB;;AAEA,SAAI,CAACC,OAAL,EAAc;AACZX,aAAMY,KAAN,GAAc,EAAd;AACD;;AAEDZ,WAAMR,OAAN,CAAc,EAAEqB,UAAUF,OAAZ,EAAd;AACD,IARD;;AAUA;;;;;;AAMA,OAAMG,OAAO,SAAPA,IAAO,GAAM;AACjB,SAAMF,QAAQG,OAAOC,MAAP,CAAc,EAAd,EAAkBhB,MAAMY,KAAxB,CAAd;AACAA,WAAMK,QAAN,GAAiBjB,MAAMY,KAAN,CAAYK,QAAZ,CAAqBC,IAAtC;;AAEAlB,WAAMP,MAAN,CAAa,EAAEmB,YAAF,EAAb,EAAwBO,IAAxB,CAA6B,YAAM;AACjCnB,aAAMY,KAAN,GAAc,EAAd;AACA;AACD,MAHD;AAID,IARD;;AAUAG,UAAOC,MAAP,CAAchB,KAAd,EAAqB;AACnBY,YAAO,EADY;AAEnBH,iBAFmB;AAGnBK;AAHmB,IAArB;AAKD,E","file":"ui-bb-draft-edit-ng/scripts/ui-bb-draft-edit-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"ui-bb-rich-text-editor-ng\"), require(\"ui-bb-dropdown-select-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-draft-edit-ng\", [\"vendor-bb-angular\", \"ui-bb-rich-text-editor-ng\", \"ui-bb-dropdown-select-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-draft-edit-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"ui-bb-rich-text-editor-ng\"), require(\"ui-bb-dropdown-select-ng\"));\n\telse\n\t\troot[\"ui-bb-draft-edit-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"ui-bb-rich-text-editor-ng\"], root[\"ui-bb-dropdown-select-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_38__, __WEBPACK_EXTERNAL_MODULE_42__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 01348824f603eeb6378e","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-draft-edit-ng/model.xml\n// module id = 0\n// module chunks = 7","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 28\n// module chunks = 4 5 6 7 8 9","module.exports = __WEBPACK_EXTERNAL_MODULE_38__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-rich-text-editor-ng\"\n// module id = 38\n// module chunks = 6 7","/**\n * @module ui-bb-draft-edit-ng\n */\nimport angular from 'vendor-bb-angular';\nimport uiBbRichTextEditorKey from 'ui-bb-rich-text-editor-ng';\nimport uiBbDropdownSelectKey from 'ui-bb-dropdown-select-ng';\n\nimport component from './component';\n\nconst dependencyKeys = [\n  uiBbRichTextEditorKey,\n  uiBbDropdownSelectKey,\n];\n\nexport default angular.module('ui-bb-draft-edit-ng', dependencyKeys)\n  .component('uiBbDraftEditNg', component)\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-draft-edit-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_42__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-dropdown-select-ng\"\n// module id = 42\n// module chunks = 7","import controller from './controller';\n\n/**\n * @name uiBbDraftEditNg\n * @type {Object}\n * @property {Array<Topic>} list of topics\n * @property {UiBbDraftEditNgConfig} config config object\n * @property {Function} onClose function to call when user closes component\n * @property {Function} onSend function to call to send the draft\n * @property {UiBbDraftEditNgMessages} messages object containing localized labels\n *\n * @example\n *  <ui-bb-draft-edit-ng\n *    data-topics=\"$ctrl.topics\"\n *    data-config=\"$draftCtrl.config\"\n *    data-on-close=\"$draftCtrl.dismiss()\"\n *    data-on-send=\"$draftCtrl.send(draft)\"\n *    data-messages=\"{\n *      labelClose: ('ui-bb-draft-ng.label.close' | i18n),\n *      labelSend: ('ui-bb-draft-ng.label.send' | i18n),\n *      labelRemove: ('ui-bb-draft-ng.label.remove' | i18n),\n *      labelToggleImportance: ('ui-bb-draft-ng.label.toggleImportance' | i18n),\n *      formHeader: ('ui-bb-draft-ng.form.header' | i18n),\n *      formSubject: ('ui-bb-draft-ng.form.subject' | i18n),\n *      formTopic: ('ui-bb-draft-ng.form.topic' | i18n),\n *      formMessage: ('ui-bb-draft-ng.form.message' | i18n),\n *      formSend: ('ui-bb-draft-ng.form.send' | i18n),\n *      errorSend: ('ui-bb-draft-ng.error.send' | i18n),\n *    }\"></ui-bb-draft-edit-ng>\n */\nconst component = {\n  bindings: {\n    topics: '<',\n    config: '<',\n    onClose: '&',\n    onSend: '&',\n    messages: '<',\n  },\n  controller,\n  template: ['$attrs', (attrs) => `\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <button type=\"button\" class=\"close\"\n          aria-label=\"{{ $ctrl.messages.labelClose }}\" data-ng-click=\"$ctrl.close(newMessageForm)\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n        <h5 class=\"mb-3\">{{ $ctrl.messages.formHeader }}</h5>\n        <form name=\"newMessageForm\">\n          <div class=\"form-row mb-3\">\n            <div class=\"col-12 col-md-8 mb-3\">\n              <label>{{ $ctrl.messages.formTopic }}</label>\n              <ui-bb-dropdown-select-ng\n                name=\"topic\"\n                data-placeholder=\"${attrs.selectTopicPlaceholder}\"\n                required\n                class=\"form-control\"\n                data-ng-model=\"$ctrl.draft.category\"\n                data-selected-as=\"$option.name\"\n                data-role=\"i-bb-draft-edit-ng\">\n                <ui-bb-dropdown-option-ng\n                  data-option=\"topic\"\n                  data-ng-repeat=\"topic in $ctrl.topics track by $index\"\n                  class=\"list-group-item-text\"\n                >\n                  <a href=\"#\">{{:: $option.name }}</a>\n                </ui-bb-dropdown-option-ng>\n              </ui-bb-dropdown-select-ng>\n            </div>\n            <div class=\"col-12\" data-ng-if=\"$ctrl.config.subjectMaxLength > 0\">\n              <label>{{ $ctrl.messages.formSubject }}</label>\n              <input\n                type=\"text\"\n                placeholder=\"{{ $ctrl.messages.formSubjectPlaceholder }}\"\n                name=\"subject\"\n                class=\"form-control\"\n                data-ng-model=\"$ctrl.draft.subject\"\n                required\n                maxlength=\"{{$ctrl.config.subjectMaxLength}}\"\n              />\n            </div>\n          </div>\n          <div class=\"form-group\">\n            <label>{{ $ctrl.messages.formMessage }}</label>\n            <ui-bb-rich-text-editor-ng\n              name=\"message\"\n              placeholder=\"${attrs.messagePlaceholder}\"\n              class=\"form-control d-flex flex-row flex-wrap\"\n              data-ng-model=\"$ctrl.draft.body\"\n              tabindex=\"0\"\n              required\n            >\n            </ui-bb-rich-text-editor-ng>\n          </div>\n          <div class=\"bg-danger\" data-ng-show=\"$ctrl.sendMessageError\">\n            <p>{{ $ctrl.messages.errorSend }}</p>\n          </div>\n          <div class=\"form-row justify-content-end flex-column-reverse flex-md-row\">\n            <div class=\"col-12 col-md-3 col-lg-3\">\n              <button\n                type=\"button\"\n                class=\"btn btn-md btn-secondary w-100\" \n                data-ng-click=\"$ctrl.close(newMessageForm)\"\n                aria-label=\"{{ $ctrl.messages.labelClose }}\"\n              >\n                {{ $ctrl.messages.formCancel }}\n              </button>\n            </div>\n            <div class=\"col-12 col-md-3 col-lg-3 mb-2 mb-md-0\">\n              <button type=\"submit\" class=\"btn btn-md btn-primary w-100\"\n                data-ng-click=\"$ctrl.send()\"\n                data-ng-disabled=\"!newMessageForm.$valid\"\n                aria-label=\"{{ $ctrl.messages.labelSend }}\">\n                {{ $ctrl.messages.formSend }}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  `],\n};\n\nexport default component;\n\n/**\n * @typedef {Object} Topic\n * @property {string} id\n * @property {string} code\n * @property {string} name\n */\n\n/**\n * @typedef {Object} UiBbDraftEditNgConfig\n * @property {number} subjectMaxLength Max allowed length for new draft subject.\n */\n\n/**\n * @typedef {Object} UiBbDraftEditNgMessages\n * @property {string} formHeader text for form heading\n * @property {string} formTopic label for topic/category/recipient field\n * @property {string} formSubject label for subject field\n * @property {string} formMessage label for message body text area\n * @property {string} formSend label for send button\n * @property {string} errorSend error to be shown if draft sending fails\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-draft-edit-ng/scripts/component.js","export default function controller() {\n  const $ctrl = this;\n\n  /**\n   * @description\n   * Check if any field's form has not empty value of controls\n   * @name controller#checkForm\n   * @param {ctrl} ctrl Controller object of message form\n   * @type {function}\n   * @inner\n   * @return {Boolean} true/false status of form\n   */\n  const checkForm = (ctrl) => {\n    let result = true;\n\n    if (ctrl.$error.required) {\n      const length = ctrl.$error.required.length;\n      const maxLength = ctrl.$$controls.length;\n\n      result = length > 0 && length !== maxLength;\n    }\n    return result;\n  };\n\n  /**\n   * @description\n   * Call the close callback method from bindings\n   * and check the status of message form\n   * @name controller#close\n   * @param {formCtrl} formCtrl Controller object of message form\n   * @type {function}\n   */\n  const close = (formCtrl) => {\n    const isEmpty = checkForm(formCtrl);\n\n    if (!isEmpty) {\n      $ctrl.draft = {};\n    }\n\n    $ctrl.onClose({ $isEmpty: isEmpty });\n  };\n\n  /**\n   * @description\n   * Call the callback send out method of message from bindings\n   * @name controller#send\n   * @type {function}\n   */\n  const send = () => {\n    const draft = Object.assign({}, $ctrl.draft);\n    draft.category = $ctrl.draft.category.code;\n\n    $ctrl.onSend({ draft }).then(() => {\n      $ctrl.draft = {};\n      return;\n    });\n  };\n\n  Object.assign($ctrl, {\n    draft: {},\n    close,\n    send,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-draft-edit-ng/scripts/controller.js"],"sourceRoot":""}