{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*****","webpack:///webpack/bootstrap 16ce69979da567ada154?cec8*****","webpack:///./ui-bb-char-counter-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*****","webpack:///./ui-bb-char-counter-ng/scripts/index.js","webpack:///./ui-bb-char-counter-ng/scripts/component.js","webpack:///./ui-bb-char-counter-ng/scripts/controller.js","webpack:///./ui-bb-char-counter-ng/scripts/constants.js"],"names":["angular","module","component","controller","uiBBCharCharCounter","name","bindings","textEl","textElQuery","config","state","template","$scope","$document","$timeout","ctrl","charsExcluded","value","excludeSpaces","match","length","updateCounterState","spaces","maxChars","counter","blockTyping","substr","model","$setViewValue","isValid","$digest","preventInput","isDeleting","event","keyCode","KeyboardKeys","BackSpace","Delete","preventDefault","$onInit","querySelector","isTextEl","tagName","ValidElementsList","indexOf","toUpperCase","element","data","Object","assign","InitialState","InitialConfig","addEventListener","initStyling"],"mappings":"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","file":"ui-bb-char-counter-ng/scripts/ui-bb-char-counter-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-char-counter-ng\", [\"vendor-bb-angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-char-counter-ng\"] = factory(require(\"vendor-bb-angular\"));\n\telse\n\t\troot[\"ui-bb-char-counter-ng\"] = factory(root[\"vendor-bb-angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 16ce69979da567ada154","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-char-counter-ng/model.xml\n// module id = 0\n// module chunks = 5","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41","/**\n * @module ui-bb-char-counter-ng\n * @description\n * UI component for displaying chars counter.\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbCharCounterNg from 'ui-bb-char-counter-ng';\n *\n * export const dependencyKeys = [\n *   uiBbCharCounterNg,\n * ];\n *\n * // file: templates/template.ng.html\n * <textarea name=\"description\"></textarea>\n * <ui-bb-char-counter-ng\n *   data-state=\"stateTextarea\"\n *   data-text-el=\"$ctrl.textElTextarea\"\n *   data-config=\"$ctrl.configTextarea\">\n * </ui-bb-char-counter-ng>\n */\nimport angular from 'vendor-bb-angular';\n\nimport component from './component';\nimport uiBBCharCharCounter from './controller';\n\nexport default angular\n  .module('ui-bb-char-counter-ng', [])\n  .component('uiBbCharCounterNg', component)\n  .controller('uiBBCharCharCounter', ['$scope', '$document', '$timeout', uiBBCharCharCounter])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-char-counter-ng/scripts/index.js","/**\n * @name uiBbCharCounterNg\n * @type {object}\n *\n * @property {HTMLElement} textEl Text input DOM element\n * @property {string} textElQuery for searching element by query\n * @property {config} config Component configuration\n * @property {state} state Component state\n */\nconst component = {\n  bindings: {\n    textEl: '<',\n    textElQuery: '@',\n    config: '<',\n    state: '=?',\n  },\n  controller: 'uiBBCharCharCounter',\n  template: `\n  <div\n    data-ng-if=\"$ctrl.isTextEl\"\n    class=\"{{ $ctrl.config.initStyling }}\"\n    data-ng-class=\"{ 'text-danger': !$ctrl.state.isValid }\">\n    {{ $ctrl.state.counter }}/{{ $ctrl.config.maxChars }}\n  </div>\n  `,\n};\n\nexport default component;\n\n/**\n * @typedef {Object} config\n * @property {?number} maxChars Maximum chars allowed (140)\n * @property {?string} initStyling CSS classes to be added on init (\"text-left\" - default)\n * @property {?boolean} blockTyping If true, user prevented to input when limit reached (false)\n * @property {?boolean} excludeSpaces If true, char counter counts non-space chars only,\n *                                    and all characters otherwise\n */\n\n/**\n * @typedef {Object} state\n * @property {?number} counter Chars count\n * @property {?boolean} isValid Flag is true if limit is not reached and false otherwise\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-char-counter-ng/scripts/component.js","import angular from 'vendor-bb-angular';\n\nimport {\n  InitialConfig,\n  InitialState,\n  ValidElementsList,\n  KeyboardKeys,\n} from './constants';\n\nexport default function uiBBCharCharCounter($scope, $document, $timeout) {\n  const ctrl = this;\n\n  /**\n   * @name charsExcluded\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Returns number of spaces in input value string to be excluded from length calculation\n   * (in case config requires spaces to be excluded from calculation flow)\n   *\n   * @param {String} value\n   * @returns {number}\n   */\n  const charsExcluded = (value) => (ctrl.config.excludeSpaces ?\n    (value.match(/([\\s]+)/g) || '').length : 0);\n\n  /**\n   * @name updateCounterState\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Applies changes of attached input element into component's state object\n   */\n  const updateCounterState = () => {\n    const spaces = charsExcluded(ctrl.textEl.value);\n    const maxChars = ctrl.config.maxChars + spaces;\n    let counter = ctrl.textEl.value.length - spaces;\n\n    if (ctrl.config.blockTyping && counter > ctrl.config.maxChars) {\n      ctrl.textEl.value = ctrl.textEl.value.substr(0, maxChars);\n      counter = maxChars;\n    }\n\n    if (ctrl.model) {\n      ctrl.model.$setViewValue(ctrl.textEl.value);\n    }\n\n    ctrl.state = {\n      counter,\n      isValid: counter <= maxChars,\n    };\n\n    $scope.$digest();\n  };\n\n  /**\n   * @name preventInput\n   * @type {function}\n   *\n   * @description\n   * Prevent from further input in case of respective config property is true\n   * and the input limit is reached\n   *\n   * @param {KeyboardEvent} event\n   */\n  const preventInput = event => {\n    const isDeleting = !event || (event && (event.keyCode === KeyboardKeys.BackSpace ||\n      event.keyCode === KeyboardKeys.Delete));\n    const spaces = charsExcluded(ctrl.textEl.value);\n    const counter = ctrl.textEl.value.length - spaces;\n\n    if (counter >= ctrl.config.maxChars && !isDeleting) {\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * @name $onInit\n   * @type {function}\n   *\n   * @description\n   * Init hook - initialize component model\n   */\n  function $onInit() {\n    if (!ctrl.textEl && ctrl.textElQuery) {\n      ctrl.textEl = $document[0].querySelector(ctrl.textElQuery);\n    }\n\n    // Should be native element\n    ctrl.isTextEl = ctrl.textEl && ctrl.textEl.tagName &&\n      ValidElementsList.indexOf(ctrl.textEl.tagName.toUpperCase()) !== -1;\n\n    if (!ctrl.isTextEl) {\n      return;\n    }\n\n    // Get ngModel of input element\n    ctrl.model = angular.element(ctrl.textEl).data('$ngModelController');\n\n    // Init state\n    ctrl.state = Object.assign({}, InitialState, ctrl.state);\n\n    // Init configuration\n    ctrl.config = Object.assign({}, InitialConfig, ctrl.config);\n\n    // Add keypress listener to text input (to prevent input if needed)\n    if (ctrl.config.blockTyping) {\n      ctrl.textEl.addEventListener('keypress', preventInput, false);\n    }\n\n    // Add keyup listener to text input (to check input limits)\n    ctrl.textEl.addEventListener('keyup', updateCounterState, false);\n\n    // Add click listener to react on \"reset\", \"select\" and alike actions outside\n    $document[0].addEventListener('click', updateCounterState, false);\n\n    // Paste event should be handled next tick\n    ctrl.textEl.addEventListener('paste', () => {\n      $timeout(updateCounterState);\n    }, false);\n  }\n\n  Object.assign(ctrl, {\n    $onInit,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-char-counter-ng/scripts/controller.js","export const InitialConfig = {\n  maxChars: 140,\n  initStyling: 'text-left',\n  blockTyping: false,\n};\n\nexport const InitialState = {\n  counter: 0,\n  isValid: true,\n};\n\nexport const ValidElementsList = ['TEXTAREA', 'INPUT'];\n\nexport const KeyboardKeys = {\n  BackSpace: 8,\n  Delete: 46,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-char-counter-ng/scripts/constants.js"],"sourceRoot":""}