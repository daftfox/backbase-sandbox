{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6****","webpack:///webpack/bootstrap 3ef30015219e38414ee1?dc48****","webpack:///./ui-bb-change-period-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*","webpack:///./ui-bb-change-period-ng/scripts/index.js","webpack:///./ui-bb-change-period-ng/scripts/component.js","webpack:///./ui-bb-change-period-ng/scripts/controller.js"],"names":["angular","module","component","name","controller","uiBbChangePeriodController","bindings","periodStart","periodEnd","periodStep","onPeriodStartChange","onPeriodEndChange","periodFormatter","periodStartFormatter","periodEndFormatter","template","attrs","console","warn","$locale","$filter","$ctrl","MONTHS_LOCALE","DATETIME_FORMATS","MONTH","$onInit","startDate","Date","endDate","monthNumber","getMonth","firstDayOfMonth","getDate","lastDayOfMonth","monthName","selectedYear","getFullYear","formatPeriodLabel","day","formattingFn","date","fn","isButtonDisabled","month","year","now","changePeriod","period","newStartDateObj","newEndDateObj","Object","assign"],"mappings":"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","file":"ui-bb-change-period-ng/scripts/ui-bb-change-period-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-change-period-ng\", [\"vendor-bb-angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-change-period-ng\"] = factory(require(\"vendor-bb-angular\"));\n\telse\n\t\troot[\"ui-bb-change-period-ng\"] = factory(root[\"vendor-bb-angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_22__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ef30015219e38414ee1","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-change-period-ng/model.xml\n// module id = 0\n// module chunks = 5","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 22\n// module chunks = 3 4 5 6 7","/**\n * @module ui-bb-change-period-ng\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbChangePeriodKey from 'ui-bb-change-period-ng';\n *\n * export const dependencyKeys = [\n *   uiBbChangePeriodKey,\n * ];\n *\n * // file: templates/template.ng.html\n * <ui-bb-change-period-ng\n *  data-period-start=\"2017-06-01\"\n *  data-period-end=\"2017-06-31\"\n *  data-change-period=\"ext.helpers.onPeriodChange()\"\n * ></ui-bb-change-period-ng>\n */\nimport angular from 'vendor-bb-angular';\n\nimport component from './component';\n\nexport default angular\n  .module('ui-bb-change-period-ng', [])\n  .component('uiBbChangePeriodNg', component)\n  .name;\n\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-change-period-ng/scripts/index.js","import uiBbChangePeriodController from './controller';\n\n/**\n * @name uiBbChangePeriodNg\n * @type {object}\n * @description\n * Component used to change the date period.\n *\n * @property {string} periodStart Start date as a ISO string\n * @property {string} periodEnd End date as a ISO string\n * @property {number} periodStep Monthly interval\n * @property {?function} onPeriodStartChange Callback triggered after the period start is changed\n * @property {?function} onPeriodEndChange Callback triggered after the period end is changed\n * @property {?function} periodFormatter\n *  [Deprecated] Method called to format period start and end date labels\n * @property {?function} periodStartFormatter Method called to format period start date label\n * @property {?function} periodEndFormatter Method called to format period end date label\n */\nconst component = {\n  controller: ['$locale', '$filter', uiBbChangePeriodController],\n  bindings: {\n    periodStart: '<',\n    periodEnd: '<',\n    periodStep: '<',\n    onPeriodStartChange: '&',\n    onPeriodEndChange: '&',\n    periodFormatter: '&',\n    periodStartFormatter: '&',\n    periodEndFormatter: '&',\n  },\n  template: ['$attrs', (attrs) => {\n    // Deprecation message for period-formatter attribute\n    // This attribute should be removed in version 2.0.0\n    if ('periodFormatter' in attrs) {\n      // eslint-disable-next-line max-len, no-console\n      console.warn('DEPRECATED - [ui-bb-change-period-ng] period-formatter attribute will be ignored in the next component major release. Use \\'period-start-formatter and period-end-formatter\\' attributes instead.');\n    }\n\n    return `\n      <div class=\"row d-flex align-items-center\">\n        <div class=\"col-2 col-md-4 col-lg-5\">\n          <i class=\"fa fa-chevron-left btn float-right d-flex align-items-center\"\n            aria-hidden=\"true\"\n            data-ng-click=\"$ctrl.changePeriod(-$ctrl.periodStep)\"\n          ></i>\n        </div>\n        <div class=\"col-8 col-md-4 col-lg-2 text-center\">\n          <div><strong>{{ $ctrl.monthName }}</strong></div>\n\n          <div class=\"current-period text-muted small\">\n            {{ $ctrl.formatPeriodLabel($ctrl.firstDayOfMonth, $ctrl.periodStartFormatter) }}\n            -\n            {{ $ctrl.formatPeriodLabel($ctrl.lastDayOfMonth, $ctrl.periodEndFormatter) }}\n          </div>\n        </div>\n        <div class=\"col-2 col-md-4 col-lg-5\">\n          <i class=\"fa fa-chevron-right float-left btn d-flex align-items-center\"\n            aria-hidden=\"true\"\n            data-ng-class=\"{\n              disabled: $ctrl.isButtonDisabled($ctrl.monthNumber, $ctrl.selectedYear)\n            }\"\n            data-ng-click=\" $ctrl.isButtonDisabled($ctrl.monthNumber, $ctrl.selectedYear) ?\n              null : $ctrl.changePeriod($ctrl.periodStep)\"\n          ></i>\n        </div>\n      </div>\n    `;\n  }],\n};\n\nexport default component;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-change-period-ng/scripts/component.js","/**\n * @module ui-bb-change-period-ng\n * @name uiBbChangePeriodController\n *\n * @description\n * Main functionality for the component used to change the date period.\n */\nexport default function uiBbChangePeriodController($locale, $filter) {\n  const $ctrl = this;\n  const MONTHS_LOCALE = $locale.DATETIME_FORMATS.MONTH;\n\n  /**\n   * AngularJS Lifecycle hook used to initialize the controller\n   *\n   * @type {function}\n   * @name Controller#$onInit\n   * @returns {void}\n   */\n  const $onInit = () => {\n    const startDate = new Date($ctrl.periodStart);\n    const endDate = new Date($ctrl.periodEnd);\n\n    $ctrl.monthNumber = startDate.getMonth();\n    $ctrl.firstDayOfMonth = startDate.getDate();\n    $ctrl.lastDayOfMonth = endDate.getDate();\n    $ctrl.monthName = MONTHS_LOCALE[startDate.getMonth()];\n    $ctrl.selectedYear = startDate.getFullYear();\n  };\n\n  /**\n   * Period label formatter method. It uses provided custom formatter\n   * or formats date in format d MMM yyyy\n   *\n   * @name formatPeriodLabel\n   * @type {function}\n   * @param {number} day Period's day\n   * @param {function} formattingFn Formatting function\n   * @returns {string}\n   */\n  const formatPeriodLabel = (day, formattingFn) => {\n    const date = new Date(`${$ctrl.selectedYear}/${$ctrl.monthNumber + 1}/${day}`);\n    // Backwards compatibility. Property periodFormatter is deprecated.\n    const fn = formattingFn() || $ctrl.periodFormatter();\n\n    return fn ? fn(date) : $filter('date')(date, 'd MMM yyyy');\n  };\n\n  /**\n   * Checks if a button should be disabled\n   *\n   * @name isButtonDisabled\n   * @type {function}\n   * @param {number} month\n   * @param {number} year\n   * @returns {boolean} True if provided month and year are current month/year\n   */\n  const isButtonDisabled = (month, year) => {\n    const now = new Date();\n    return month === now.getMonth() && year === now.getFullYear();\n  };\n\n  /**\n   * Changes the to previous or next one based on a month number passed to it\n   *\n   * @name changePeriod\n   * @type {function}\n   * @param {any} period - Change period step\n   * @returns {void}\n   */\n  const changePeriod = (period) => {\n    $ctrl.monthNumber = $ctrl.monthNumber + period;\n    const now = new Date();\n    const newStartDateObj = new Date($ctrl.selectedYear, $ctrl.monthNumber, 1);\n    let newEndDateObj = new Date(\n      newStartDateObj.getFullYear(), newStartDateObj.getMonth() + 1, 0\n    );\n\n    // don't allow future date\n    if (newEndDateObj > now) {\n      newEndDateObj = now;\n    }\n\n    $ctrl.lastDayOfMonth = newEndDateObj.getDate();\n    $ctrl.monthName = MONTHS_LOCALE[newStartDateObj.getMonth()];\n    $ctrl.selectedYear = newStartDateObj.getFullYear();\n\n    if ($ctrl.monthNumber < 0) {\n      $ctrl.monthNumber = 11;\n    } else if ($ctrl.monthNumber > 11) {\n      $ctrl.monthNumber = 0;\n    }\n\n    if ($ctrl.onPeriodStartChange()) {\n      $ctrl.onPeriodStartChange()(newStartDateObj);\n    }\n\n    if ($ctrl.onPeriodEndChange()) {\n      $ctrl.onPeriodEndChange()(newEndDateObj);\n    }\n  };\n\n  Object.assign($ctrl, {\n    $onInit,\n\n    /**\n     * Changes the to previous or next one based on a month number passed to it\n     *\n     * @name uiBbChangePeriodController#changePeriod\n     * @type {function}\n     */\n    changePeriod,\n\n    /**\n     * Checks if a button is disabled\n     *\n     * @name uiBbChangePeriodController#isButtonDisabled\n     * @type {function}\n     */\n    isButtonDisabled,\n\n    /**\n     * Period label formatter method. It uses provided custom formatter\n     * or formats date in format d MMM yyyy\n     *\n     * @name uiBbChangePeriodController#formatPeriodLabel\n     * @type {function}\n     */\n    formatPeriodLabel,\n\n    /**\n     * @description\n     * Holds the value of the selected month\n     *\n     * @name uiBbChangePeriodController#monthNumber\n     * @type {number}\n     */\n    monthNumber: null,\n\n    /**\n     * @description\n     * Holds the value of the selected month name\n     *\n     * @name uiBbChangePeriodController#monthName\n     * @type {string}\n     */\n    monthName: '',\n\n    /**\n     * @description\n     * Holds the value of the selected year\n     *\n     * @name uiBbChangePeriodController#selectedYear\n     * @type {number}\n     */\n    selectedYear: null,\n\n    /**\n     * @description\n     * Holds the value of the first day in the selected month\n     *\n     * @name uiBbChangePeriodController#firstDayOfMonth\n     * @type {number}\n     */\n    firstDayOfMonth: null,\n\n    /**\n     * @description\n     * Holds the value of the last day in the selected month\n     *\n     * @name uiBbChangePeriodController#lastDayOfMonth\n     * @type {number}\n     */\n    lastDayOfMonth: null,\n\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-change-period-ng/scripts/controller.js"],"sourceRoot":""}