{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*********************","webpack:///webpack/bootstrap 59b29c6361f41ebec32c?d678*********************","webpack:///./ui-bb-scheduling-ng/model.xml","webpack:///external \"ui-bb-calendar-popup-ng\"?7edd******","webpack:///external \"vendor-bb-angular\"?a114************","webpack:///./ui-bb-scheduling-ng/scripts/index.js","webpack:///./ui-bb-scheduling-ng/scripts/component.js","webpack:///./ui-bb-scheduling-ng/templates/main.html","webpack:///./ui-bb-scheduling-ng/scripts/controller.js","webpack:///./ui-bb-scheduling-ng/scripts/constants.js"],"names":["angular","module","uiBbCalendarPopupKey","component","controller","name","bindings","config","payment","schedule","indicateSchedule","template","require","$filter","$ctrl","dateFilter","$onInit","recurrenceEnding","RecurrenceEnding","minOccurrences","maxOccurrences","submitButtonTypes","forEach","item","text","key","getScheduleText","words","today","Date","setHours","startDate","isToday","multipleOccurrences","transferFrequency","value","TransferFrequency","ONCE","hasEnd","endingType","NEVER","isEndingAfter","AFTER","push","labels","starting","todayString","toLowerCase","on","hasLimitedOccurences","isMinOccurences","repeat","length","ON","until","endDate","count","join","getMinDate","minDate","daysInMonth","month","year","getDate","addDays","toDate","days","getTime","addWeeks","weeks","addYears","years","getFullYear","getMonth","addMonths","months","newMonth","newYear","newDay","every","getFrequencies","SingleFrequency","concat","recurring","RecurrenceFrequencies","setDefaultOcurrencesValue","setEndDate","Object","assign","singleFrequency","DAILY","WEEKLY","MONTHLY","QUARTERLY","YEARLY"],"mappings":"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","file":"ui-bb-scheduling-ng/scripts/ui-bb-scheduling-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-calendar-popup-ng\"), require(\"vendor-bb-angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-scheduling-ng\", [\"ui-bb-calendar-popup-ng\", \"vendor-bb-angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-scheduling-ng\"] = factory(require(\"ui-bb-calendar-popup-ng\"), require(\"vendor-bb-angular\"));\n\telse\n\t\troot[\"ui-bb-scheduling-ng\"] = factory(root[\"ui-bb-calendar-popup-ng\"], root[\"vendor-bb-angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_18__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59b29c6361f41ebec32c","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-scheduling-ng/model.xml\n// module id = 0\n// module chunks = 22","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-calendar-popup-ng\"\n// module id = 8\n// module chunks = 0 1 8 9 10 13 14 22","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 18\n// module chunks = 0 8 9 10 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33","/**\n * @module ui-bb-scheduling-ng\n * @description\n * Schedule selector UI component\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbScheduleKey from 'ui-bb-scheduling-ng';\n *\n * export const dependencyKeys = [\n *   uiBbScheduleKey,\n * ];\n *\n * // file: templates/template.ng.html\n * <ui-bb-scheduling-ng\n *   data-config=\"{\n *     labels: {\n *       title: 'Schedule',\n *       execution: 'Execution',\n *       starting: 'Starting',\n *       today: 'Today',\n *       on: 'On',\n *       until: 'until',\n *       repeat: 'times',\n *       ending: 'Ending',\n *       never: 'Never',\n *       after: 'After',\n *       occurrences: 'occurrences',\n *       frequency: 'Frequency',\n *       once: 'Once',\n *       daily: 'Daily',\n *       weekly: 'Weekly',\n *       monthly: 'Monthly',\n *       quarterly: 'Quarterly',\n *       annually: 'Annually'\n *     },\n *     recurring: true\n *   }\"\n *   data-payment=\"$ctrl.payment\"\n *   data-schedule=\"$ctrl.schedule\"\n *   data-indicate-schedule=\"false\"\n * ></ui-bb-scheduling-ng>\n */\nimport angular from 'vendor-bb-angular';\nimport uiBbCalendarPopupKey from 'ui-bb-calendar-popup-ng';\n\nimport component from './component';\nimport controller from './controller';\n\nexport default angular\n  .module('ui-bb-scheduling-ng', [\n    uiBbCalendarPopupKey,\n  ])\n  .component('uiBbSchedulingNg', component)\n  .controller('uiBbSchedulingController', ['$filter', controller])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-scheduling-ng/scripts/index.js","/* eslint global-require: \"off\" */\n\n/**\n * @name component\n * @type {Object}\n *\n * @property {Object} config Scheduling component messages keys\n * @property {Object} payment Payment data object\n * @property {Object} schedule Payment schedule data object\n * @property {?Boolean} indicateSchedule True if should display selected schedule,\n * but hide controls (false by default)\n */\nconst component = {\n  bindings: {\n    config: '<',\n    payment: '<',\n    schedule: '<',\n    indicateSchedule: '<',\n  },\n  controller: 'uiBbSchedulingController',\n  template: require('../templates/main.html'),\n};\n\nexport default component;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-scheduling-ng/scripts/component.js","module.exports = \"<!-- Indicate selected schedule -->\\n<div data-ng-show=\\\"$ctrl.indicateSchedule\\\">\\n  {{ $ctrl.getScheduleText() }}\\n</div>\\n\\n<!-- Select schedule controls -->\\n<div data-ng-show=\\\"!$ctrl.indicateSchedule\\\">\\n  <h3>{{ ::$ctrl.config.labels.title | i18n }}</h3>\\n  <hr/>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-9 col-12\\\">\\n      <!-- schedule -->\\n      <ui-bb-expandable-ng data-chevron=\\\"true\\\">\\n        <ui-bb-expandable-summary-ng>\\n          {{ $ctrl.getScheduleText() }}\\n        </ui-bb-expandable-summary-ng>\\n      <ui-bb-expandable-details-ng>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-12\\\">\\n          <div class=\\\"form-group row\\\">\\n            <div class=\\\"col-12\\\">{{ ::$ctrl.config.labels.execution | i18n }}</div>\\n            <div class=\\\"col-6\\\">\\n              <ui-bb-calendar-popup-ng\\n                data-date=\\\"$ctrl.schedule.startDate\\\"\\n                aria-label=\\\"{{ ::$ctrl.config.labels.execution | i18n }}\\\">\\n              </ui-bb-calendar-popup-ng>\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\">\\n            <div class=\\\"col-12\\\">{{ ::$ctrl.config.labels.frequency | i18n }}</div>\\n            <div class=\\\"col-6\\\">\\n              <ui-bb-dropdown-select-ng name=\\\"repetition\\\"\\n                data-ng-change=\\\"$ctrl.setEndDate()\\\"\\n                data-ng-model=\\\"$ctrl.schedule.transferFrequency\\\"\\n                data-ng-disabled=\\\"!$ctrl.config.recurring\\\"\\n                data-selected-as=\\\"$option.name | i18n | lowercase\\\">\\n                <ui-bb-dropdown-option-ng\\n                  data-option=\\\"repeatType\\\"\\n                  data-arrow-navigation=\\\"true\\\"\\n                  class=\\\"list-group-item-text\\\"\\n                  data-ng-repeat=\\\"repeatType in $ctrl.getFrequencies() track by $index\\\">\\n                  {{ :: $option.name | i18n }}\\n                </ui-bb-dropdown-option-ng>\\n              </ui-bb-dropdown-select-ng>\\n            </div>\\n          </div>\\n          <div class=\\\"form-group\\\"\\n            data-ng-show=\\\"$ctrl.schedule.transferFrequency.value !== $ctrl.singleFrequency.value\\\">\\n            <div class=\\\"col-12 p-0 mb-2\\\">{{ ::$ctrl.config.labels.ending | i18n }}</div>\\n            <div class=\\\"row-fluid mb-4\\\">\\n              <div class=\\\"col-12 p-0 radio\\\">\\n                <label>\\n                  <input type=\\\"radio\\\" name=\\\"endingType\\\"\\n                    data-ng-model=\\\"$ctrl.payment.endingType\\\"\\n                    value=\\\"{{ $ctrl.recurrenceEnding.NEVER }}\\\"\\n                    data-ng-checked=\\\"$ctrl.payment.endingType === $ctrl.recurrenceEnding.NEVER\\\">\\n                    &nbsp;{{ :: $ctrl.config.labels.never | i18n }}\\n                </label>\\n              </div>\\n            </div>\\n            <div class=\\\"row-fluid mb-4\\\">\\n              <div class=\\\"col-lg-9 col-12 pl-0\\\">\\n                <div class=\\\"row justify-content-center align-items-center\\\">\\n                  <div class=\\\"col-4 radio\\\">\\n                    <label>\\n                      <input type=\\\"radio\\\" name=\\\"endingType\\\"\\n                        data-ng-model=\\\"$ctrl.payment.endingType\\\"\\n                        value=\\\"{{ $ctrl.recurrenceEnding.ON }}\\\"\\n                        data-ng-checked=\\\"$ctrl.payment.endingType === $ctrl.recurrenceEnding.ON\\\">\\n                        &nbsp;{{ :: $ctrl.config.labels.on | i18n }}\\n                    </label>\\n                  </div>\\n                  <div class=\\\"col-8 pl-0\\\">\\n                    <div class=\\\"w-50\\\">\\n                      <ui-bb-calendar-popup-ng\\n                        data-date=\\\"$ctrl.schedule.endDate\\\"\\n                        aria-label=\\\"$ctrl.config.labels.ending\\\"\\n                        data-disabled=\\\"$ctrl.payment.endingType !== $ctrl.recurrenceEnding.ON\\\"\\n                        data-config=\\\"{\\n                          minDate: $ctrl.getMinDate($ctrl.schedule.startDate, $ctrl.schedule.transferFrequency)\\n                        }\\\">\\n                      </ui-bb-calendar-popup-ng>\\n                    </div>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n            <div class=\\\"row-fluid\\\">\\n              <div class=\\\"col-lg-9 col-12 pl-0\\\">\\n                <div class=\\\"row justify-content-center align-items-center\\\">\\n                  <div class=\\\"col-4 radio\\\">\\n                    <label class=\\\"mb-0\\\">\\n                      <input type=\\\"radio\\\" name=\\\"endingType\\\"\\n                        data-ng-model=\\\"$ctrl.payment.endingType\\\"\\n                        value=\\\"{{ $ctrl.recurrenceEnding.AFTER }}\\\"\\n                        data-ng-checked=\\\"$ctrl.payment.endingType === $ctrl.recurrenceEnding.AFTER\\\">\\n                      &nbsp;{{ :: $ctrl.config.labels.after | i18n }}\\n                    </label>\\n                  </div>\\n                  <div class=\\\"col-8 pl-0\\\">\\n                    <input\\n                      name=\\\"repeat\\\"\\n                      type=\\\"number\\\"\\n                      data-ng-min=\\\"{{ $ctrl.minOccurrences }}\\\"\\n                      data-ng-max=\\\"{{ $ctrl.maxOccurrences }}\\\"\\n                      data-ng-pattern=\\\"/^[0-9]\\\\d*?$/\\\"\\n                      class=\\\"form-control occurence-field w-50\\\"\\n                      data-ng-required=\\\"$ctrl.payment.endingType === $ctrl.recurrenceEnding.AFTER\\\"\\n                      data-ng-disabled=\\\"$ctrl.payment.endingType !== $ctrl.recurrenceEnding.AFTER\\\"\\n                      data-ng-model=\\\"$ctrl.schedule.repeat\\\"\\n                      data-ng-init=\\\"$ctrl.setDefaultOcurrencesValue()\\\">\\n\\n                      <span\\n                        data-ng-class=\\\"{ 'text-muted': $ctrl.payment.endingType !== $ctrl.recurrenceEnding.AFTER }\\\">\\n                        {{ :: $ctrl.config.labels.occurrences | i18n }}\\n                      </span>\\n                    </div>\\n                  </div>\\n                </div>\\n                  <div data-ng-messages=\\\"paymentForm.repeat.$error\\\" role=\\\"alert\\\"\\n                    class=\\\"text-danger row\\\">\\n                    <div data-ng-message=\\\"required\\\">{{ $ctrl.config.labels.min | i18n: { min: $ctrl.minOccurrences } }}</div>\\n                    <div data-ng-message=\\\"min\\\">{{ $ctrl.config.labels.min | i18n: { min: $ctrl.minOccurrences } }}</div>\\n                    <div data-ng-message=\\\"max\\\">{{ $ctrl.config.labels.max | i18n: { max: $ctrl.maxOccurences } }}</div>\\n                    <div data-ng-message=\\\"pattern\\\">{{ $ctrl.config.labels.pattern | i18n }}</div>\\n                    <div data-ng-message=\\\"number\\\">{{ $ctrl.config.labels.number | i18n }}</div>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </ui-bb-expandable-details-ng>\\n      </ui-bb-expandable-ng>\\n      <!-- end schedule -->\\n    </div>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-scheduling-ng/templates/main.html\n// module id = 172\n// module chunks = 22","import {\n  SingleFrequency,\n  RecurrenceFrequencies,\n  RecurrenceEnding,\n  TransferFrequency,\n  minOccurrences,\n  maxOccurrences,\n} from './constants';\n\nexport default function controller($filter) {\n  const $ctrl = this;\n  const dateFilter = $filter('date');\n\n  function $onInit() {\n    $ctrl.recurrenceEnding = RecurrenceEnding;\n    $ctrl.minOccurrences = minOccurrences;\n    $ctrl.maxOccurrences = maxOccurrences;\n\n    if ($ctrl.submitButtonTypes) {\n      $ctrl.submitButtonTypes.forEach(item => {\n        // eslint-disable-next-line no-param-reassign\n        item.text = $filter('i18n')(item.key);\n      });\n    }\n  }\n\n  /**\n   * @description\n   * Compiles the scheduling description out of payment object params.\n   * In this process, following translation keys are being used:\n   * form.schedule.starting, for word \"Starting\"\n   * form.schedule.today, for word \"Today\"\n   * form.schedule.on, for word \"On\" (used before date to form \"on 01.01.2017\")\n   * form.schedule.until, for word \"until\" (used before date to form \"until 01.01.2017\")\n   * form.schedule.repeat.count, for word \"times\" (used after repeat count to form \"5 times\")\n   * and name of the transfer frequency set in constants file\n   *\n   * @name Helpers#getScheduleText\n   * @type {function}\n   * @returns {string} Compiled text that can be used as scheduling value in views\n   */\n  const getScheduleText = () => {\n    const words = [];\n    const today = (new Date()).setHours(0, 0, 0, 0);\n    const startDate = new Date($ctrl.schedule.startDate);\n    const isToday = startDate.setHours(0, 0, 0, 0) === today;\n    const multipleOccurrences = $ctrl.schedule.transferFrequency.value !== TransferFrequency.ONCE;\n    const hasEnd = $ctrl.payment.endingType !== RecurrenceEnding.NEVER;\n    const isEndingAfter = $ctrl.payment.endingType === RecurrenceEnding.AFTER;\n\n    // add frequency\n    words.push($filter('i18n')($ctrl.schedule.transferFrequency.name));\n    words.push('-');\n\n    // if there are multiple occurrences, add word starting\n    if (multipleOccurrences) {\n      words.push($filter('i18n')($ctrl.config.labels.starting));\n    }\n\n    // if start date is today use word instead of date\n    if (isToday) {\n      let todayString = $filter('i18n')($ctrl.config.labels.today);\n      // for multiple occurrences, there is a prefix word, so this on should be lowercase\n      if (multipleOccurrences) {\n        todayString = todayString.toLowerCase();\n      }\n\n      words.push(todayString);\n    }\n\n    // for single transfer in the future, we need prefix word on\n    if (!multipleOccurrences && !isToday) {\n      words.push($filter('i18n')($ctrl.config.labels.on).toLowerCase());\n    }\n\n    if (!isToday) {\n      words.push(dateFilter($ctrl.schedule.startDate));\n    }\n\n    const hasLimitedOccurences = hasEnd && multipleOccurrences;\n    const isMinOccurences = !$ctrl.schedule.repeat || $ctrl.schedule.repeat < minOccurrences;\n\n    // if there are limited number of occurrences,\n    // add comma for the last word, so that there is no space between them\n    if (hasLimitedOccurences && !(isEndingAfter && isMinOccurences)) {\n      words[words.length - 1] += ',';\n    }\n\n    if (hasEnd && multipleOccurrences) {\n      // there is an end for this schedule\n      // based on the type of ending construct words differently\n      if ($ctrl.payment.endingType === RecurrenceEnding.ON) {\n        words.push($filter('i18n')($ctrl.config.labels.until));\n        words.push(dateFilter($ctrl.schedule.endDate));\n      } else if ($ctrl.schedule.repeat >= minOccurrences) {\n        words.push($ctrl.schedule.repeat);\n        words.push($ctrl.schedule.repeat ? $filter('i18n')($ctrl.config.labels.count) : '');\n      }\n    }\n\n    // output everything together\n    return words.join(' ');\n  };\n\n  /**\n   * @name Helpers#getMinDate\n   * @type {function}\n   * @description\n   * Get the minimum available date for specific frequency\n   *\n   * @param {date} startDate\n   * @param {object} transferFrequency\n   * @return {date}\n   */\n  const getMinDate = (startDate, transferFrequency = {}) => {\n    let minDate;\n\n    const daysInMonth = (month, year) => new Date(year, month + 1, 0).getDate();\n    const addDays = (toDate, days) => new Date(toDate.getTime() + (days * 24 * 60 * 60 * 1000));\n    const addWeeks = (toDate, weeks) => addDays(toDate, weeks * 7);\n    const addYears = (toDate, years) => new Date(toDate.getFullYear() + years,\n      toDate.getMonth(), (toDate.getDate() > daysInMonth(toDate.getMonth(),\n        toDate.getFullYear()) ? daysInMonth(toDate.getMonth(),\n        toDate.getFullYear()) : toDate.getDate()));\n    const addMonths = (toDate, months) => {\n      const newMonth = toDate.getMonth() + months + 1 > 12 ?\n        ((toDate.getMonth() + months + 1) % 12) - 1 : toDate.getMonth() + months;\n      const newYear = toDate.getMonth() + months + 1 > 12 ?\n        addYears(toDate, 1).getFullYear() : toDate.getFullYear();\n      const newDay = toDate.getDate() > daysInMonth(newMonth, newYear) ?\n        daysInMonth(newMonth, newYear) : toDate.getDate();\n      return new Date(newYear, newMonth, newDay);\n    };\n\n    switch (transferFrequency.value) {\n      case 'DAILY':\n        minDate = addDays(startDate, transferFrequency.every);\n        break;\n      case 'WEEKLY':\n        minDate = addWeeks(startDate, transferFrequency.every);\n        break;\n      case 'MONTHLY':\n        minDate = addMonths(startDate, transferFrequency.every);\n        break;\n      case 'QUARTERLY':\n        minDate = addMonths(startDate, (transferFrequency.every * 3));\n        break;\n      case 'YEARLY':\n        minDate = addYears(startDate, transferFrequency.every);\n        break;\n      default:\n        minDate = startDate;\n    }\n\n    return minDate;\n  };\n\n  /**\n   * @description\n   * Returns frequencies for payment depending on occurences number\n   *\n   * @name Helpers#getFrequencies\n   * @type {function}\n   * @returns {array<object>} Array of transfer frequencies\n   */\n  const getFrequencies = () => [SingleFrequency]\n    .concat($ctrl.config.recurring ? RecurrenceFrequencies : []);\n\n  /**\n   * @description\n   * Sets starting ocurrences number if not defined use default one\n   *\n   * @name Helpers#setDefaultOcurrencesValue\n   * @type {function}\n   */\n  const setDefaultOcurrencesValue = () => {\n    if (!$ctrl.schedule.repeat) {\n      $ctrl.schedule.repeat = minOccurrences;\n    }\n  };\n\n  /**\n   * @description\n   * Updates scheduled end date\n   *\n   * @name Helpers#setEndDate\n   * @type {function}\n   */\n  const setEndDate = () => {\n    $ctrl.schedule.endDate = getMinDate($ctrl.schedule.startDate, $ctrl.schedule.transferFrequency);\n  };\n\n  Object.assign($ctrl, {\n    $onInit,\n    get singleFrequency() { return SingleFrequency; },\n    getMinDate,\n    getScheduleText,\n    setDefaultOcurrencesValue,\n    getFrequencies,\n    setEndDate,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-scheduling-ng/scripts/controller.js","/**\n * @description\n * Component recurrence ending enum\n *\n * @name Constants#RecurrenceEnding\n * @type {object}\n */\nexport const RecurrenceEnding = {\n  NEVER: 'NEVER',\n  ON: 'ON',\n  AFTER: 'AFTER',\n};\n\n/**\n * @description\n * Component transfer frequencies enum\n *\n * @name Constants#TransferFrequency\n * @type {object}\n */\nexport const TransferFrequency = {\n  ONCE: 'ONCE',\n  DAILY: 'DAILY',\n  WEEKLY: 'WEEKLY',\n  MONTHLY: 'MONTHLY',\n  QUARTERLY: 'QUARTERLY',\n  YEARLY: 'YEARLY',\n};\n\n/**\n * @description\n * Array of recurring frequency objects with the following properties (all mandatory)\n *\n * @property {string} name Translation key of the label\n * that will be displayed to the end user\n * @property {string} value Denotes frequency type of transfer.\n * Possible values: DAILY/WEEKLY/MONTHLY/YEARLY\n * @property {number} every Indicates skip interval of transfer.\n * 1 would mean execute every time, 2 - every other time\n *\n * @example\n * {\n *   name: 'form.schedule.frequency.weekly',\n *   value: 'WEEKLY',\n *   every: 1,\n * },\n * {\n *   name: 'form.schedule.frequency.bi.weekly',\n *   value: 'WEEKLY',\n *   every: 2,\n * }\n *\n * @name Constants#RecurrenceFrequencies\n * @type {array}\n */\nexport const RecurrenceFrequencies = [\n  {\n    name: 'form.schedule.frequency.daily',\n    value: TransferFrequency.DAILY,\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.weekly',\n    value: TransferFrequency.WEEKLY,\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.monthly',\n    value: TransferFrequency.MONTHLY,\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.quarterly',\n    value: TransferFrequency.QUARTERLY,\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.annually',\n    value: TransferFrequency.YEARLY,\n    every: 1,\n  },\n];\n\n/**\n * @description\n * Object representing single payment\n *\n * @property {string} name Translation key of the label\n * that will be displayed to the end user\n * @property {string} value Denotes frequency, holds value 'ONCE'\n *\n * @name Constants#SingleFrequency\n * @type {object}\n */\nexport const SingleFrequency = {\n  name: 'form.schedule.frequency.once',\n  value: TransferFrequency.ONCE,\n};\n\n/**\n * @name Constants#minOccurrences\n * @type {number}\n */\nexport const minOccurrences = 2;\n\n/**\n * @name Constants#maxOccurrences\n * @type {number}\n */\nexport const maxOccurrences = 200;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-scheduling-ng/scripts/constants.js"],"sourceRoot":""}