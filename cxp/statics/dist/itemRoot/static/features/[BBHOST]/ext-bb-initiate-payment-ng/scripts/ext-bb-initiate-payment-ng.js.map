{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*","webpack:///webpack/bootstrap 59b29c6361f41ebec32c?d678*","webpack:///./ext-bb-initiate-payment-ng/model.xml","webpack:///external \"vendor-bb-angular-ng-aria\"?9d0e","webpack:///external \"ui-bb-i18n-ng\"?dc01*","webpack:///external \"ui-bb-loading-overlay-ng\"?3561","webpack:///external \"ui-bb-account-selector-ng\"?7f70","webpack:///external \"ui-bb-currency-input-ng\"?3ab2","webpack:///external \"ui-bb-char-counter-ng\"?e680","webpack:///external \"ui-bb-calendar-popup-ng\"?7edd","webpack:///external \"ui-bb-expandable-ng\"?18ac","webpack:///external \"vendor-bb-angular-ng-messages\"?7dc7","webpack:///external \"ui-bb-account-card-ng\"?b7d3","webpack:///external \"vendor-bb-uib-alert\"?7299","webpack:///external \"ui-bb-confirm-ng\"?ed9c","webpack:///external \"ui-bb-switcher-ng\"?b444","webpack:///./ext-bb-initiate-payment-ng/scripts/index.js","webpack:///external \"vendor-bb-uib-popover\"","webpack:///external \"vendor-bb-angular-sanitize\"","webpack:///external \"ui-bb-substitute-error-ng\"","webpack:///external \"ui-bb-parent-responsiveness-ng\"","webpack:///external \"ui-bb-credit-suggest-ng\"","webpack:///external \"ui-bb-number-input-ng\"","webpack:///external \"ui-bb-button-spinner-ng\"","webpack:///./ext-bb-initiate-payment-ng/scripts/hooks.js","webpack:///./ext-bb-initiate-payment-ng/scripts/constants.js","webpack:///./ext-bb-initiate-payment-ng/scripts/helpers.js"],"names":["extHooks","dependencyKeys","ngAriaModuleKey","bbAngularNgMessagesKey","uibPopoverKey","ngSanitizeKey","vendorBbUibAlertKey","uiBbSubstituteErrorKey","i18nKey","uiBbAccountSelectorKey","uiBbCurrencyInputKey","uiBbParentResponsivenessKey","uiBbCreditSuggestKey","uiBbSwitcherKey","uiBbExpandableKey","uiBbCalendarPopupKey","uiBbNumberInputKey","uiBbAccountCardKey","uiBbConfirmKey","uiBbLoadingOverlayKey","uiBbCharCounterKey","uiBbButtonSpinnerNg","hooks","helpers","extHelpers","events","processAccountsTo","debitAccount","getCreditAccounts","getExternalAccounts","id","then","externalTransferAllowed","accounts","concat","contacts","catch","getRecurringTransactionDay","schedule","transferFrequency","value","startDate","getMonth","getDate","getDay","processCurrencies","currencies","defaultCurrency","filter","item","name","DEFAULT_CURRENCY","length","transferFrequencies","every","Step","FORM","REVIEW","CONFIRMATION","crossCurrencyMessages","minOccurrences","maxOccurences","maxDigits","expanded","charCounterConfig","description","maxChars","showCrossCurrencyMessage","isRateVisible","$ctrl","paymentPreferences","showExchangeRate","rate","payment","from","parseFloat","amount","isDifferentCurrencies","currency","canSelectUrgentPayment","urgent","urgentTransferAllowed","resetPayment","scope","Object","assign","step","makePayment","window","scrollTo","onAccountChange","selectedAccount","onAccountFromChange","toggleCreditSuggestGroup","event","model","ctrl","stopPropagation","more","less","open","scrollToFirstError","form","firstError","$$controls","find","control","$invalid","$$element","bodyRect","document","body","getBoundingClientRect","elemRect","offset","top","navBar","querySelector","navBarRect","navBarStyles","getComputedStyle","position","height","behavior","reviewPayment","paymentForm","showSpecialValidationMessages","clearPaymentError","context","i18nFilter","$filter","dateFilter","normalizeAccounts","internalAccountView","account","external","externalAccountView","forEach","contact","contactAccounts","identifier","IBAN","accountNumber","accountName","bankName","contactPerson","push","getScheduleText","EndingType","singleTransfer","words","today","Date","setHours","isToday","multipleOccurrences","hasEnd","endingType","NEVER","todayString","toLowerCase","hasLimitedOccurences","isMinOccurences","repeat","AFTER","ON","endDate","join","getFrequencies","recurring","getMinDate","minDate","daysInMonth","month","year","addDays","toDate","days","getTime","addWeeks","weeks","addYears","years","getFullYear","addMonths","months","newMonth","newYear","newDay","setFormPristine","stepFrom","destroyWatch","$watch","newValue","$evalAsync","$setPristine","editPaymentFromReview","editRole"],"mappings":"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","file":"ext-bb-initiate-payment-ng/scripts/ext-bb-initiate-payment-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-loading-overlay-ng\"), require(\"ui-bb-account-selector-ng\"), require(\"ui-bb-currency-input-ng\"), require(\"ui-bb-char-counter-ng\"), require(\"ui-bb-calendar-popup-ng\"), require(\"ui-bb-expandable-ng\"), require(\"vendor-bb-angular-ng-messages\"), require(\"ui-bb-account-card-ng\"), require(\"vendor-bb-uib-alert\"), require(\"ui-bb-confirm-ng\"), require(\"ui-bb-switcher-ng\"), require(\"vendor-bb-uib-popover\"), require(\"vendor-bb-angular-sanitize\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-parent-responsiveness-ng\"), require(\"ui-bb-credit-suggest-ng\"), require(\"ui-bb-number-input-ng\"), require(\"ui-bb-button-spinner-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bb-initiate-payment-ng\", [\"vendor-bb-angular-ng-aria\", \"ui-bb-i18n-ng\", \"ui-bb-loading-overlay-ng\", \"ui-bb-account-selector-ng\", \"ui-bb-currency-input-ng\", \"ui-bb-char-counter-ng\", \"ui-bb-calendar-popup-ng\", \"ui-bb-expandable-ng\", \"vendor-bb-angular-ng-messages\", \"ui-bb-account-card-ng\", \"vendor-bb-uib-alert\", \"ui-bb-confirm-ng\", \"ui-bb-switcher-ng\", \"vendor-bb-uib-popover\", \"vendor-bb-angular-sanitize\", \"ui-bb-substitute-error-ng\", \"ui-bb-parent-responsiveness-ng\", \"ui-bb-credit-suggest-ng\", \"ui-bb-number-input-ng\", \"ui-bb-button-spinner-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bb-initiate-payment-ng\"] = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-loading-overlay-ng\"), require(\"ui-bb-account-selector-ng\"), require(\"ui-bb-currency-input-ng\"), require(\"ui-bb-char-counter-ng\"), require(\"ui-bb-calendar-popup-ng\"), require(\"ui-bb-expandable-ng\"), require(\"vendor-bb-angular-ng-messages\"), require(\"ui-bb-account-card-ng\"), require(\"vendor-bb-uib-alert\"), require(\"ui-bb-confirm-ng\"), require(\"ui-bb-switcher-ng\"), require(\"vendor-bb-uib-popover\"), require(\"vendor-bb-angular-sanitize\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-parent-responsiveness-ng\"), require(\"ui-bb-credit-suggest-ng\"), require(\"ui-bb-number-input-ng\"), require(\"ui-bb-button-spinner-ng\"));\n\telse\n\t\troot[\"ext-bb-initiate-payment-ng\"] = factory(root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-loading-overlay-ng\"], root[\"ui-bb-account-selector-ng\"], root[\"ui-bb-currency-input-ng\"], root[\"ui-bb-char-counter-ng\"], root[\"ui-bb-calendar-popup-ng\"], root[\"ui-bb-expandable-ng\"], root[\"vendor-bb-angular-ng-messages\"], root[\"ui-bb-account-card-ng\"], root[\"vendor-bb-uib-alert\"], root[\"ui-bb-confirm-ng\"], root[\"ui-bb-switcher-ng\"], root[\"vendor-bb-uib-popover\"], root[\"vendor-bb-angular-sanitize\"], root[\"ui-bb-substitute-error-ng\"], root[\"ui-bb-parent-responsiveness-ng\"], root[\"ui-bb-credit-suggest-ng\"], root[\"ui-bb-number-input-ng\"], root[\"ui-bb-button-spinner-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_29__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59b29c6361f41ebec32c","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bb-initiate-payment-ng/model.xml\n// module id = 0\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 2\n// module chunks = 0 1 2 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 8 9 10 11 12 13 14 19 24","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-loading-overlay-ng\"\n// module id = 4\n// module chunks = 0 1 2 8 9 10 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-account-selector-ng\"\n// module id = 5\n// module chunks = 0 1 2 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-currency-input-ng\"\n// module id = 6\n// module chunks = 0 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-char-counter-ng\"\n// module id = 7\n// module chunks = 0 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-calendar-popup-ng\"\n// module id = 8\n// module chunks = 0 1 8 9 10 13 14 22","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-expandable-ng\"\n// module id = 9\n// module chunks = 0 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-messages\"\n// module id = 10\n// module chunks = 0 1 3 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-account-card-ng\"\n// module id = 11\n// module chunks = 0 1 8","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-alert\"\n// module id = 12\n// module chunks = 0 1 8 9 10 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-confirm-ng\"\n// module id = 13\n// module chunks = 0 1 2 8 9 10 11 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-switcher-ng\"\n// module id = 16\n// module chunks = 0 1 8 9 10","/**\n * @module ext-bb-initiate-payment-ng\n *\n * @description\n * Default extension for widget-bb-initiate-payment-ng\n */\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport bbAngularNgMessagesKey from 'vendor-bb-angular-ng-messages';\nimport uibPopoverKey from 'vendor-bb-uib-popover';\nimport ngSanitizeKey from 'vendor-bb-angular-sanitize';\nimport vendorBbUibAlertKey from 'vendor-bb-uib-alert';\nimport uiBbSubstituteErrorKey from 'ui-bb-substitute-error-ng';\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbAccountSelectorKey from 'ui-bb-account-selector-ng';\nimport uiBbCurrencyInputKey from 'ui-bb-currency-input-ng';\nimport uiBbParentResponsivenessKey from 'ui-bb-parent-responsiveness-ng';\nimport uiBbCreditSuggestKey from 'ui-bb-credit-suggest-ng';\nimport uiBbSwitcherKey from 'ui-bb-switcher-ng';\nimport uiBbExpandableKey from 'ui-bb-expandable-ng';\nimport uiBbCalendarPopupKey from 'ui-bb-calendar-popup-ng';\nimport uiBbNumberInputKey from 'ui-bb-number-input-ng';\nimport uiBbAccountCardKey from 'ui-bb-account-card-ng';\nimport uiBbConfirmKey from 'ui-bb-confirm-ng';\nimport uiBbLoadingOverlayKey from 'ui-bb-loading-overlay-ng';\nimport uiBbCharCounterKey from 'ui-bb-char-counter-ng';\nimport uiBbButtonSpinnerNg from 'ui-bb-button-spinner-ng';\n\nimport * as extHooks from './hooks';\nimport extHelpers from './helpers';\n\nexport const dependencyKeys = [\n  ngAriaModuleKey,\n  bbAngularNgMessagesKey,\n  uibPopoverKey,\n  ngSanitizeKey,\n  vendorBbUibAlertKey,\n  uiBbSubstituteErrorKey,\n  i18nKey,\n  uiBbAccountSelectorKey,\n  uiBbCurrencyInputKey,\n  uiBbParentResponsivenessKey,\n  uiBbCreditSuggestKey,\n  uiBbSwitcherKey,\n  uiBbExpandableKey,\n  uiBbCalendarPopupKey,\n  uiBbNumberInputKey,\n  uiBbAccountCardKey,\n  uiBbConfirmKey,\n  uiBbLoadingOverlayKey,\n  uiBbCharCounterKey,\n  uiBbButtonSpinnerNg,\n];\n\nexport const hooks = extHooks;\n\nexport const helpers = extHelpers;\n\nexport const events = {};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-initiate-payment-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-popover\"\n// module id = 23\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-sanitize\"\n// module id = 24\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-substitute-error-ng\"\n// module id = 25\n// module chunks = 1 2 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_26__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-parent-responsiveness-ng\"\n// module id = 26\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-credit-suggest-ng\"\n// module id = 27\n// module chunks = 1 8 9 10","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-number-input-ng\"\n// module id = 28\n// module chunks = 1 8","module.exports = __WEBPACK_EXTERNAL_MODULE_29__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-button-spinner-ng\"\n// module id = 29\n// module chunks = 1 8 9 10 23","import { DEFAULT_CURRENCY } from './constants';\n/**\n * @name Hooks#processAccountsTo\n * @type {function}\n *\n * @description\n * Hook for processing account list in 'to' field (credit).\n * Assigned to $ctrl.accountsTo.\n *\n * @param {object} debitAccount Selected debit account (can be null).\n * @param {function} getCreditAccounts Function to retrieve all credit accounts\n * @param {function} getExternalContacts Function to retrieve all external contacts\n * formatted like Product kind\n * @returns {Promise.<any[]>} Promise that retrieves array of accounts.\n */\nexport const processAccountsTo = (debitAccount, getCreditAccounts, getExternalAccounts) =>\n  getCreditAccounts(debitAccount.id || null)\n    .then(accounts => {\n      if (!debitAccount.id || debitAccount.externalTransferAllowed) {\n        return getExternalAccounts()\n          .then(contacts => accounts.concat(contacts))\n          // Failing loading contacts should not stop payments\n          .catch(() => []);\n      }\n      return accounts;\n    });\n\n/**\n * @name Hooks#getRecurringTransactionDay\n * @type {function}\n *\n * @description\n * Denotes day on which transfer should be executed.\n * For weekly it will be 1..7 indicating weekday.\n * For monthly it will be 1..31 indicating day of month.\n * For yearly it will be 1..12 indicating month of the year\n *\n * @param {object} schedule Recurring payment schedule object\n * @returns {number} Recurring transaction day\n */\nexport const getRecurringTransactionDay = schedule => {\n  switch (schedule.transferFrequency.value) {\n    case 'YEARLY':\n      return schedule.startDate.getMonth() + 1;\n    case 'MONTHLY':\n      return schedule.startDate.getDate();\n    default:\n      return schedule.startDate.getDay() + 1;\n  }\n};\n\n/**\n * @name Hooks#processCurrencies\n * @type {function}\n *\n * @description\n * Processes currencies array returned from the service\n * Returns only 'EUR' | DEFAULT_CURRENCY For SEPA payment\n *\n * @param {object[]} currencies Initial currencies\n * @returns {object[]} Processed currencies\n */\nexport const processCurrencies = (currencies = []) => {\n  const defaultCurrency = currencies.filter(item => item.name === DEFAULT_CURRENCY);\n  return !currencies.length ? [{ name: DEFAULT_CURRENCY }] : defaultCurrency;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-initiate-payment-ng/scripts/hooks.js","/**\n * @description\n * Array of recurring frequency objects with the following properties (all mandatory)\n *\n * @property {string} object.name Translation key of the label\n * that will be displayed to the end user\n * @property {string} object.value Denotes frequency type of transfer.\n * Possible values: DAILY/WEEKLY/MONTHLY/YEARLY\n * @property {number} object.every Indicates skip interval of transfer.\n * 1 would mean execute every time, 2 - every other time\n *\n * @example\n * {\n *   name: 'form.schedule.frequency.weekly',\n *   value: 'WEEKLY',\n *   every: 1,\n * },\n * {\n *   name: 'form.schedule.frequency.bi.weekly',\n *   value: 'WEEKLY',\n *   every: 2,\n * }\n *\n * @name transferFrequencies\n * @type {array}\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const transferFrequencies = [\n  {\n    name: 'form.schedule.frequency.daily',\n    value: 'DAILY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.weekly',\n    value: 'WEEKLY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.monthly',\n    value: 'MONTHLY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.quarterly',\n    value: 'QUARTERLY',\n    every: 1,\n  },\n  {\n    name: 'form.schedule.frequency.annually',\n    value: 'YEARLY',\n    every: 1,\n  },\n];\n\n/**\n * @description\n * Payment steps\n *\n * @name Constants#Step\n * @type {object}\n */\nexport const Step = {\n  FORM: 'form',\n  REVIEW: 'review',\n  CONFIRMATION: 'confirmation',\n};\n\n\n/**\n * @description\n * default currency code\n * @inner\n *\n * @type {string}\n */\nexport const DEFAULT_CURRENCY = 'EUR';\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-initiate-payment-ng/scripts/constants.js","/* globals window, document */\nimport { transferFrequencies, Step } from './constants';\n\nconst crossCurrencyMessages = { 'cross-currency': true };\nconst minOccurrences = 2;\nconst maxOccurences = 200;\nconst maxDigits = 13;\nconst expanded = {};\nconst charCounterConfig = {\n  description: {\n    maxChars: 140,\n  },\n};\n\n/**\n * @description\n * Returns cross currency messages if they should be shown\n *\n * @name showCrossCurrencyMessage\n * @type {function}\n * @param {object} controller Widget controller\n * @returns {object} Cross currency messages\n */\nconst showCrossCurrencyMessage = $ctrl => {\n  const isRateVisible = $ctrl.paymentPreferences.showExchangeRate && $ctrl.rate &&\n    $ctrl.payment.from && parseFloat($ctrl.payment.amount.value);\n  const isDifferentCurrencies = $ctrl.payment.amount.currency !==\n    ($ctrl.payment.from ? $ctrl.payment.from.currency : $ctrl.payment.amount.currency);\n\n  return isRateVisible && isDifferentCurrencies ? crossCurrencyMessages : null;\n};\n\n/**\n * @description\n * Checks if layout should show 'Urgent payment' switcher\n *\n * @name canSelectUrgentPayment\n * @type {function}\n * @param {object} $ctrl Widget controller\n * @returns {boolean} True if urget payment switchet should be shown, false otherwise\n */\nconst canSelectUrgentPayment = $ctrl => {\n  const debitAccount = $ctrl.payment.from || {};\n  return !!($ctrl.paymentPreferences.urgent && debitAccount && debitAccount.urgentTransferAllowed);\n};\n\n/**\n * @description\n * Resets payment order\n *\n * @name resetPayment\n * @type {function}\n * @param {object} $ctrl Widget controller\n * @param {object} scope Template scope\n *\n * @returns {Promise<any>}\n */\nconst resetPayment = ($ctrl, scope) =>\n  $ctrl.resetPayment().then(() => {\n    Object.assign(scope, { step: Step.FORM });\n  });\n\n/**\n * @description\n * Makes new payment request and changes step on success\n *\n * @name makePayment\n * @type {function}\n * @param {object} $ctrl Payment controller\n * @param {object} scope Parent ng scope\n * @returns {object} Payment request Promise\n */\nconst makePayment = ($ctrl, scope) => $ctrl.makePayment($ctrl.payment)\n  .then(() => {\n    Object.assign(scope, { step: Step.CONFIRMATION });\n    window.scrollTo(0, 0);\n  })\n  .catch(() => { }); // Intentional empty catch block to prevent uncaught reject error\n\n/**\n * @description\n * Handler for Account From change action\n *\n * @name onAccountChange\n * @type {function}\n * @param {object} $ctrl Payment controller\n * @param {object} selectedAccount\n * @returns {object} A Promise object\n */\nconst onAccountChange = ($ctrl, selectedAccount) => {\n  // eslint-disable-next-line no-param-reassign\n  $ctrl.payment.from = Object.assign({}, selectedAccount);\n  return $ctrl.onAccountFromChange();\n};\n\n/**\n * @description\n * Toggle group in credit suggest component\n *\n * @name toggleCreditSuggestGroup\n * @type {function}\n * @param {object} event Event object\n * @param {object} model\n * @param {object} ctrl Widget's controller\n */\nconst toggleCreditSuggestGroup = (event, model, ctrl) => {\n  // Prevent suggestion list to be closed\n  event.stopPropagation();\n\n  expanded[model.more || model.less] = !!model.more;\n\n  ctrl.open();\n};\n\n/**\n * @name scrollToFirstError\n * @description Focus or scroll to first error in ```form``` depending if it is visible or not.\n * @inner\n * @type {Function}\n * @param {Object} form Angular form object to check errors\n * @returns {Object} First angular element that is invalid\n */\nconst scrollToFirstError = (form) => {\n  const firstError = form.$$controls.find((control) => control.$invalid).$$element;\n  const bodyRect = document.body.getBoundingClientRect();\n  const elemRect = firstError[0].getBoundingClientRect();\n  let offset = elemRect.top - bodyRect.top;\n\n  // Correct position to navigation bar's height\n  const navBar = document.querySelector('nav');\n  if (navBar) {\n    const navBarRect = navBar.getBoundingClientRect();\n    const navBarStyles = window.getComputedStyle(navBar, null);\n\n    if (navBarStyles.position === 'fixed' && navBarRect.top === 0) {\n      offset -= navBarRect.height;\n    }\n  }\n\n  window.scrollTo({\n    top: offset,\n    behavior: 'smooth',\n  });\n\n  return firstError;\n};\n\n/**\n * @name reviewPayment\n * @type {function}\n *\n * @description\n * Called when submitting payment for review, it actually calls a hook that\n * can be customized with all the validations needed by the specific project.\n *\n * @param {object} $ctrl Payment controller\n * @param {object} scope Parent ng scope\n * @returns {Promise|HTMLElement}\n */\nconst reviewPayment = ($ctrl, scope) => {\n  const form = scope.paymentForm;\n\n  if (form.$invalid) {\n    // Show validation messages for complex fields\n    Object.assign(form, { showSpecialValidationMessages: true });\n    return scrollToFirstError(form);\n  }\n\n  // Hide validation messages for complex fields (if any)\n  Object.assign(form, { showSpecialValidationMessages: false });\n\n  return $ctrl.reviewPayment($ctrl.payment)\n    .then(() => {\n      $ctrl.clearPaymentError();\n      Object.assign(scope, { step: Step.REVIEW });\n      window.scrollTo(0, 0);\n    });\n};\n\nconst helpers = (context) => {\n  const i18nFilter = context.$filter('i18n');\n  const dateFilter = context.$filter('date');\n\n  /**\n   * @description\n   * Transforms provided accounts to custom structure. External contacts account list will be\n   * flattened to be molded to same structure as internal accounts\n   * (identifier=IBAN/BBAN, name=contactperson).\n   *\n   * @name getAccounts\n   * @type {function}\n   * @param {array<object>} accounts\n   * @returns {array<object>} View accounts\n   */\n  const normalizeAccounts = (accounts) => {\n    if (!accounts) {\n      return [].concat(accounts || []);\n    }\n\n    const internalAccountView = accounts.filter(account => !account.external);\n\n    let externalAccountView = [];\n\n    // add group names per contact for externals\n    accounts.filter(account => account.external).forEach((contact) => {\n      const contactAccounts = [];\n      if (contact.accounts) {\n        for (const account of contact.accounts) {\n          Object.assign(account, contact, {\n            identifier: account.IBAN || account.accountNumber,\n            accountName: account.bankName || account.name,\n            name: contact.name,\n            contactPerson: contact.contactPerson || contact.name,\n          });\n          contactAccounts.push(account);\n        }\n      }\n      externalAccountView = externalAccountView.concat(contactAccounts);\n    });\n\n    return [...internalAccountView, ...externalAccountView];\n  };\n\n  /**\n   * @description\n   * Compiles the scheduling description out of payment object params.\n   *\n   * In this process, following translation keys are being used:\n   *\n   * form.schedule.starting, for word \"Starting\"\n   *\n   * form.schedule.today, for word \"Today\"\n   *\n   * form.schedule.on, for word \"On\" (used before date to form \"on 01.01.2017\")\n   *\n   * form.schedule.until, for word \"until\" (used before date to form \"until 01.01.2017\")\n   *\n   * form.schedule.repeat.count, for word \"times\" (used after repeat count to form \"5 times\")\n   *\n   * and name of the transfer frequency set in constants file\n   *\n   * @name getScheduleText\n   * @type {function}\n   * @param {object} $ctrl Widget controller\n   * @returns {string} Compiled text that can be used as scheduling value in views\n   */\n  const getScheduleText = $ctrl => {\n    const { payment, EndingType, singleTransfer } = $ctrl;\n    const words = [];\n    const today = (new Date()).setHours(0, 0, 0, 0);\n    const startDate = new Date(payment.schedule.startDate);\n    const isToday = startDate.setHours(0, 0, 0, 0) === today;\n    const multipleOccurrences = payment.schedule.transferFrequency.value !== singleTransfer.value;\n    const hasEnd = payment.endingType !== EndingType.NEVER;\n\n    // add frequency\n    words.push(i18nFilter(payment.schedule.transferFrequency.name));\n    words.push('-');\n\n    // if there are multiple occurrences, add word starting\n    if (multipleOccurrences) {\n      words.push(i18nFilter('form.schedule.starting'));\n    }\n\n    // if start date is today use word instead of date\n    if (isToday) {\n      let todayString = i18nFilter('form.schedule.today');\n      // for multiple occurrences, there is a prefix word, so this on should be lowercase\n      if (multipleOccurrences) {\n        todayString = todayString.toLowerCase();\n      }\n\n      words.push(todayString);\n    }\n\n    // for single transfer in the future, we need prefix word on\n    if (!multipleOccurrences && !isToday) {\n      words.push(i18nFilter('form.schedule.on').toLowerCase());\n    }\n\n    if (!isToday) {\n      words.push(dateFilter(payment.schedule.startDate));\n    }\n\n    const hasLimitedOccurences = hasEnd && multipleOccurrences;\n    const isMinOccurences = !payment.schedule.repeat || payment.schedule.repeat < minOccurrences;\n\n    // if there are limited number of occurrences,\n    // add comma for the last word, so that there is no space between them\n    if (hasLimitedOccurences && !(payment.endingType === EndingType.AFTER && isMinOccurences)) {\n      words[words.length - 1] += ',';\n    }\n\n    if (hasEnd && multipleOccurrences) {\n      // there is an end for this schedule\n      // based on the type of ending construct words differently\n      if (payment.endingType === EndingType.ON) {\n        words.push(i18nFilter('form.schedule.until'));\n        words.push(dateFilter(payment.schedule.endDate));\n      } else if (payment.schedule.repeat >= minOccurrences) {\n        words.push(payment.schedule.repeat);\n        words.push(payment.schedule.repeat ? i18nFilter('form.schedule.repeat.count') : '');\n      }\n    }\n\n    // output everything together\n    return words.join(' ');\n  };\n\n  /**\n   * @description\n   * Returns frequencies for payment depending on occurences number\n   *\n   * @name getFrequencies\n   * @type {function}\n   * @param {object} $ctrl Widget controller\n   * @returns {array<object>} Array of transfer frequencies\n   */\n  const getFrequencies = $ctrl => [$ctrl.singleTransfer].concat(\n    $ctrl.paymentPreferences.recurring ? transferFrequencies : []);\n\n  /**\n   * @name getMinDate\n   * @type {function}\n   * @description\n   * Get the minimum available date for specific frequency\n   *\n   * @param {date} startDate\n   * @param {object} transferFrequency\n   * @return {date}\n   */\n  const getMinDate = (startDate, transferFrequency = {}) => {\n    let minDate;\n\n    const daysInMonth = (month, year) => new Date(year, month + 1, 0).getDate();\n    const addDays = (toDate, days) => new Date(toDate.getTime() + (days * 24 * 60 * 60 * 1000));\n    const addWeeks = (toDate, weeks) => addDays(toDate, weeks * 7);\n    const addYears = (toDate, years) => new Date(toDate.getFullYear() + years,\n      toDate.getMonth(), (toDate.getDate() > daysInMonth(toDate.getMonth(),\n        toDate.getFullYear()) ? daysInMonth(toDate.getMonth(),\n          toDate.getFullYear()) : toDate.getDate()));\n    const addMonths = (toDate, months) => {\n      const newMonth = toDate.getMonth() + months + 1 > 12 ?\n        ((toDate.getMonth() + months + 1) % 12) - 1 : toDate.getMonth() + months;\n      const newYear = toDate.getMonth() + months + 1 > 12 ?\n        addYears(toDate, 1).getFullYear() : toDate.getFullYear();\n      const newDay = toDate.getDate() > daysInMonth(newMonth, newYear) ?\n        daysInMonth(newMonth, newYear) : toDate.getDate();\n      return new Date(newYear, newMonth, newDay);\n    };\n\n    switch (transferFrequency.value) {\n      case 'DAILY':\n        minDate = addDays(startDate, transferFrequency.every);\n        break;\n      case 'WEEKLY':\n        minDate = addWeeks(startDate, transferFrequency.every);\n        break;\n      case 'MONTHLY':\n        minDate = addMonths(startDate, transferFrequency.every);\n        break;\n      case 'QUARTERLY':\n        minDate = addMonths(startDate, (transferFrequency.every * 3));\n        break;\n      case 'YEARLY':\n        minDate = addYears(startDate, transferFrequency.every);\n        break;\n      default:\n        minDate = startDate;\n    }\n\n    return minDate;\n  };\n\n  /**\n   * Transforms the form into a pristine state after binding all fields\n   *\n   * @name setFormPristine\n   * @type {function}\n   * @param {object} scope Current ng scope with form\n   */\n  const setFormPristine = (scope) => {\n    if (scope.stepFrom !== Step.REVIEW) {\n      const destroyWatch = scope.$watch('paymentForm.$pristine', (newValue) => {\n        if (!newValue) {\n          scope.$evalAsync(() => {\n            scope.paymentForm.$setPristine();\n          });\n\n          destroyWatch();\n        }\n      });\n    }\n  };\n\n  /**\n * @name editPaymentFromReview\n * @type {function}\n *\n * @description\n * Called when submitting payment for edit from review, it actually changes step value\n * and adds extra step from value for edit role.\n *\n * @param {object} ctrl Payment controller\n * @param {object} scope Parent ng scope\n */\n  const editPaymentFromReview = (scope, ctrl) => {\n    if (ctrl.paymentPreferences.editRole) {\n      Object.assign(scope, { stepFrom: scope.step, step: Step.FORM });\n    } else {\n      Object.assign(scope, { step: Step.FORM });\n    }\n  };\n\n  return {\n    minOccurrences,\n    maxOccurences,\n    maxDigits,\n    charCounterConfig,\n    showCrossCurrencyMessage,\n    normalizeAccounts,\n    canSelectUrgentPayment,\n    getScheduleText,\n    getFrequencies,\n    resetPayment,\n    makePayment,\n    reviewPayment,\n    toggleCreditSuggestGroup,\n    onAccountChange,\n    getMinDate,\n    setFormPristine,\n    editPaymentFromReview,\n  };\n};\n\nexport default helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-initiate-payment-ng/scripts/helpers.js"],"sourceRoot":""}