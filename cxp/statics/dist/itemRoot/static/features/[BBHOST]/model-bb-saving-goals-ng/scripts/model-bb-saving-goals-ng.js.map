{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap f2bcf63b501845cde614?5600","webpack:///./model-bb-saving-goals-ng/model.xml","webpack:///./model-bb-saving-goals-ng/scripts/index.js","webpack:///external \"vendor-bb-angular\"","webpack:///external \"data-bb-saving-goals-http-ng\"","webpack:///external \"data-bb-product-summary-http-ng\"","webpack:///external \"lib-bb-storage-ng\"","webpack:///./model-bb-saving-goals-ng/scripts/saving-goals.js","webpack:///external \"lib-bb-model-errors\"","webpack:///./model-bb-saving-goals-ng/scripts/constants.js"],"names":["moduleKey","modelSavingGoalsKey","angular","module","savingGoalsDataModuleKey","productSummaryDataModuleKey","bbStorageModuleKey","factory","savingGoalsDataKey","productSummaryDataKey","bbStorageServiceKey","savingGoalsModel","name","Promise","savingGoalsData","productSummaryData","bbStorage","defaultErrorHandler","httpErrorResponse","loadProducts","getProductsummary","then","data","setItem","BbStorageKeys","PRODUCT_SUMMARY","catch","e","productKindHasProducts","productKind","products","length","getProducts","getItem","getProductsArray","keepEmptyProducts","Object","keys","filter","kind","reduce","extendedProducts","map","assign","product","concat","getProductByID","productId","defaultProduct","find","id","getSelectedProduct","PRODUCT_SELECTED","getSchema","schemas","postSavinggoalsRecord","properties","getSavingGoals","params","getSavinggoals","items","response","createSavingGoal","item","updateSavingGoal","savingGoalId","savingGoal","putSavinggoalsRecord","deleteSavingGoal","deleteSavinggoalsRecord"],"mappings":"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","file":"model-bb-saving-goals-ng/scripts/model-bb-saving-goals-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"data-bb-saving-goals-http-ng\"), require(\"data-bb-product-summary-http-ng\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-model-errors\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"model-bb-saving-goals-ng\", [\"vendor-bb-angular\", \"data-bb-saving-goals-http-ng\", \"data-bb-product-summary-http-ng\", \"lib-bb-storage-ng\", \"lib-bb-model-errors\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"model-bb-saving-goals-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"data-bb-saving-goals-http-ng\"), require(\"data-bb-product-summary-http-ng\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-model-errors\"));\n\telse\n\t\troot[\"model-bb-saving-goals-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"data-bb-saving-goals-http-ng\"], root[\"data-bb-product-summary-http-ng\"], root[\"lib-bb-storage-ng\"], root[\"lib-bb-model-errors\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_21__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2bcf63b501845cde614","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./model-bb-saving-goals-ng/model.xml\n// module id = 0\n// module chunks = 1","/**\n * @module model-bb-saving-goals-ng\n *\n * @description\n * Saving goals widget model\n *\n * @example\n * import modelSavingGoalsModuleKey, { modelSavingGoalsKey } from 'model-bb-saving-goals-ng';\n */\nimport angular from 'vendor-bb-angular';\nimport savingGoalsDataModuleKey, { savingGoalsDataKey } from 'data-bb-saving-goals-http-ng';\nimport productSummaryDataModuleKey, { productSummaryDataKey }\n  from 'data-bb-product-summary-http-ng';\nimport bbStorageModuleKey, { bbStorageServiceKey } from 'lib-bb-storage-ng';\n\nimport savingGoalsModel from './saving-goals';\n\nconst moduleKey = 'model-bb-saving-goals-ng';\nexport const modelSavingGoalsKey = `${moduleKey}:model`;\n\nexport default angular\n  .module(moduleKey, [\n    savingGoalsDataModuleKey,\n    productSummaryDataModuleKey,\n    bbStorageModuleKey,\n  ])\n\n  .factory(modelSavingGoalsKey, [\n    '$q',\n    savingGoalsDataKey,\n    productSummaryDataKey,\n    bbStorageServiceKey,\n    savingGoalsModel,\n  ])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-saving-goals-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 16\n// module chunks = 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_17__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-saving-goals-http-ng\"\n// module id = 17\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-product-summary-http-ng\"\n// module id = 18\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-storage-ng\"\n// module id = 19\n// module chunks = 1","/* eslint max-len: [\"error\", 100, { \"ignoreComments\": true }]*/\nimport { fromHttpError } from 'lib-bb-model-errors';\nimport { BbStorageKeys } from './constants';\n\n/**\n * @inner\n * @type {function}\n * @param {object} Promise An ES2015 compatible `Promise` object.\n * @param {object} savingGoalsData saving goals data module\n *\n * @return {object} model object\n */\nexport default function savingGoalsModel(Promise, savingGoalsData, productSummaryData, bbStorage) {\n  const defaultErrorHandler = httpErrorResponse => {\n    throw fromHttpError(httpErrorResponse);\n  };\n\n  /**\n   * @name savingGoalsModel#loadProducts\n   * @inner\n   * @type {function}\n   *\n   * @description\n   * Load products from API.\n   *\n   * @returns {Promise.<module:model-bb-product-summary-ng.ProductKinds, module:lib-bb-model-errors.ModelError>}\n   * A Promise resolving to object with ProductsKinds and TotalBalance.\n   */\n  const loadProducts = () => productSummaryData\n    .getProductsummary()\n    .then(({ data }) => {\n      bbStorage.setItem(BbStorageKeys.PRODUCT_SUMMARY, data);\n      return data;\n    })\n    .catch((e) => {\n      throw fromHttpError(e);\n    });\n\n  /**\n   * @name savingGoalsModel#productKindHasProducts\n   * @inner\n   * @type {function}\n   *\n   * @description\n   * Checks if product kind has any products\n   *\n   * @param {Object} productKind a product kind object\n   * @return {boolean} 'true' if has any products\n   */\n  const productKindHasProducts = productKind => productKind.products && productKind.products.length;\n\n  /**\n   * @name savingGoalsModel#getProducts\n   * @type {function}\n   *\n   * @description\n   * Get products either from storage or from the service\n   *\n   * @returns {Promise.<module:model-bb-product-summary-ng.ProductKinds, module:lib-bb-model-errors.ModelError>}\n   * A Promise resolving to object with ProductsKinds and TotalBalance.\n   */\n  const getProducts = () =>\n    bbStorage.getItem(BbStorageKeys.PRODUCT_SUMMARY)\n      .then(data => data || loadProducts());\n\n  /**\n   * @name savingGoalsModel#getProductsArray\n   * @type {function}\n   *\n   * @description\n   * Get products.\n   *\n   * @param {boolean} keepEmptyProducts defines if empty product kinds should be passed.\n   *\n   * @returns {Promise.<module:model-bb-product-summary-ng.Product[], module:lib-bb-model-errors.ModelError>}\n   * A Promise resolving to array with Products.\n   */\n  const getProductsArray = (keepEmptyProducts = false) =>\n    getProducts()\n      .then(data => Object.keys(data)\n        .filter(kind => keepEmptyProducts || productKindHasProducts(data[kind]))\n        .reduce((products, kind) => {\n          const extendedProducts = data[kind].products\n            .map(product => Object.assign(product, { kind }));\n          return products.concat(extendedProducts);\n        }, [])\n      );\n\n  /**\n   * @name savingGoalsModel#getProductByID\n   * @inner\n   * @type {function}\n   *\n   * @description\n   * Get product by id\n   *\n   * @param {any} productId product ID to get a stored product record\n   *\n   * @returns {Promise.<module:model-bb-product-summary-ng.Product, module:lib-bb-model-errors.ModelError>}\n   * A Promise resolving to a product with specified id\n   */\n  const getProductByID = (productId) => getProductsArray()\n    .then(products => {\n      const defaultProduct = products[0] || null;\n\n      return productId\n        ? products.find(product => product.id === productId)\n        : defaultProduct;\n    });\n\n  /**\n   * @name savingGoalsModel#getSelectedProduct\n   * @type {function}\n   *\n   * @description\n   * Get current selected product.\n   *\n   * @returns {Promise.<module:model-bb-product-summary-ng.Product, module:lib-bb-model-errors.ModelError>}\n   * A Promise resolving to a selected product object.\n   */\n  const getSelectedProduct = () => bbStorage.getItem(BbStorageKeys.PRODUCT_SELECTED)\n    .then(id => getProductByID(id));\n\n  /**\n   * @name savingGoalsModel#getSchema\n   * @type {function}\n   *\n   * @description\n   * Gets the saving goals item schema from the data (RAML)\n   *\n   * @returns {SavingGoalsSchema}\n   */\n  const getSchema = () => savingGoalsData.schemas.postSavinggoalsRecord.properties;\n\n  /**\n   * @name savingGoalsModel#getSavingGoals\n   * @type {function}\n   *\n   * @description\n   * Gets the list of saving goals\n   *\n   * @param {object} params Parameters to be passed.\n   * @returns {Promise.<SavingGoalsResponse>} A Promise with an array of saving goals\n   */\n  const getSavingGoals = (params = {}) =>\n    savingGoalsData.getSavinggoals(params)\n      .then(response => ({\n        items: response.data,\n      }))\n      .catch(defaultErrorHandler);\n\n  /**\n   * @name savingGoalsModel#createSavingGoal\n   * @type {function}\n   *\n   * @description\n   * Creates a new saving goal\n   *\n   * @param {object} item Saving goal data\n   * @returns {Promise} A Promise with response data\n   */\n  const createSavingGoal = (item) => savingGoalsData.postSavinggoalsRecord(item)\n    .catch(defaultErrorHandler);\n\n  /**\n   * @name savingGoalsModel#updateSavingGoal\n   * @type {function}\n   *\n   * @description\n   * Updates an existing saving goal\n   *\n   * @param {string} savingGoalId Saving goal id\n   * @param {object} savingGoal Saving goal object\n   * @returns {Promise} A Promise with response data\n   */\n  const updateSavingGoal = (savingGoalId, savingGoal) =>\n    savingGoalsData.putSavinggoalsRecord(savingGoalId, savingGoal)\n      .catch(defaultErrorHandler);\n\n  /**\n   * @name savingGoalsModel#deleteSavingGoal\n   * @type {function}\n   *\n   * @description\n   * Deletes a saving goal\n   *\n   * @param {string} savingGoalId Saving goal id\n   * @param {object} savingGoal Saving goal data\n   * @returns {Promise} A Promise with response data\n   */\n  const deleteSavingGoal = (savingGoalId, savingGoal) =>\n    savingGoalsData.deleteSavinggoalsRecord(savingGoalId, savingGoal)\n      .catch(defaultErrorHandler);\n\n  /**\n   * @name savingGoalsModel\n   * @type {Object}\n   */\n  return {\n    getSchema,\n    getSelectedProduct,\n    getSavingGoals,\n    createSavingGoal,\n    updateSavingGoal,\n    deleteSavingGoal,\n  };\n}\n\n/**\n * @typedef {object} SavingGoalsResponse\n * @property {Array.<SavingGoalItem>} data\n */\n\n/**\n * @typedef {object} SavingGoalItem\n * @extends module:data-bb-saving-goals-http-ng.savingGoalsData\n */\n\n/**\n * @typedef {object} SavingGoalsSchema\n * @extends module:data-bb-saving-goals-http-ng.schemas\n */\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-saving-goals-ng/scripts/saving-goals.js","module.exports = __WEBPACK_EXTERNAL_MODULE_21__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 21\n// module chunks = 1 2","/* eslint-disable import/prefer-default-export */\n\n/**\n * @name BbStorageKeys\n * @description\n * bbStorage keys enum\n * @type {object}\n */\nexport const BbStorageKeys = {\n  PRODUCT_SELECTED: 'bb.product.selected',\n  PRODUCT_SUMMARY: 'bb.product.summary.data',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-saving-goals-ng/scripts/constants.js"],"sourceRoot":""}