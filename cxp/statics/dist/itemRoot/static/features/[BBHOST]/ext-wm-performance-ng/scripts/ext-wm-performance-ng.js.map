{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6****","webpack:///webpack/bootstrap d0309a746b17cd403690?c295****","webpack:///./ext-wm-performance-ng/model.xml","webpack:///external \"ui-bb-loading-indicator-ng\"?8f10****","webpack:///external \"ui-bb-i18n-ng\"?dc01****","webpack:///external \"ui-bb-empty-state-ng\"?88ee****","webpack:///external \"lib-bb-model-errors\"?7567****","webpack:///external \"lib-wm-compose-selectors\"?7338","webpack:///external \"lib-bb-styles\"?c155**","webpack:///external \"vendor-bb-angular-ng-aria\"?9d0e*","webpack:///./ext-wm-performance-ng/scripts/index.js","webpack:///external \"ui-bb-chartjs-chart-line-ng\"","webpack:///external \"ui-bb-dropdown-select-ng\"","webpack:///./ext-wm-performance-ng/scripts/helpers.js","webpack:///./ext-wm-performance-ng/scripts/constants.js"],"names":["helpers","extHelpers","dependencyKeys","ngAriaModuleKey","uiBbLoadingIndicatorKey","uiBbChartjsChartLineKey","i18nKey","uiBbEmptyStateKey","uiBbDropdownSelectKey","errors","E_AUTH","message","title","icon","E_CONNECTIVITY","E_USER","E_UNEXPECTED","chartPaddingStyles","top","bottom","left","right","chartPadding","length","parseFloat","REM_TO_PIXEL_RATIO","tooltipCornerRadius","ticksPadding","performanceChartColorPositive","CSS_SELECTORS","performanceChartPositive","performanceChartColorNegative","performanceChartNegative","performanceChartBgPositive","performanceChartBgNegative","performanceSeriesPrototype","labels","datasets","borderColor","backgroundColor","pointBorderColor","pointBackgroundColor","pointRadius","pointBorderWidth","pointHitRadius","POINT_HIT_RADIUS","lineTension","LINE_TENSION","fill","data","getPeriods","today","Date","month3ago","month6ago","month12ago","startOfYear","getFullYear","setMonth","getMonth","value","dateTo","dateFrom","processPerformanceLineColor","unshift","color","setDataSetColor","dataset","findXOnZero","x1","x","y1","y","x2","y2","differentSign","value1","value2","processLabelAndValue","series","xOnZeroY","label","getTime","lastLabel","lastDataset","previousValue","previousValuePresent","datasetOptions","push","POINT_RADIUS","newDataset","Object","assign","transformPerformance","chartData","reduce","item","angular","copy","$filter","stateContainer","dateFilter","chartPerformanceOptions","maxX","Math","max","map","tooltips","enabled","cornerRadius","displayColors","callbacks","tooltipItem","yLabel","xLabel","hover","mode","scales","yAxes","ticks","callback","round","padding","xAxes","type","time","unit","displayFormats","month","afterTickToLabelConversion","scaleInstance","splice","layout","performanceDataSelector","createSelector","state","portfolioPerformance","getChartPerformanceOptions","performanceData","getError","code","changeDropdownSide","document","querySelector","classList","add","PERIOD","performanceChart"],"mappings":"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","file":"ext-wm-performance-ng/scripts/ext-wm-performance-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-wm-compose-selectors\"), require(\"lib-bb-styles\"), require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-chartjs-chart-line-ng\"), require(\"ui-bb-dropdown-select-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-wm-performance-ng\", [\"ui-bb-loading-indicator-ng\", \"ui-bb-i18n-ng\", \"ui-bb-empty-state-ng\", \"lib-bb-model-errors\", \"lib-wm-compose-selectors\", \"lib-bb-styles\", \"vendor-bb-angular-ng-aria\", \"ui-bb-chartjs-chart-line-ng\", \"ui-bb-dropdown-select-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-wm-performance-ng\"] = factory(require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-wm-compose-selectors\"), require(\"lib-bb-styles\"), require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-chartjs-chart-line-ng\"), require(\"ui-bb-dropdown-select-ng\"));\n\telse\n\t\troot[\"ext-wm-performance-ng\"] = factory(root[\"ui-bb-loading-indicator-ng\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-empty-state-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-wm-compose-selectors\"], root[\"lib-bb-styles\"], root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-chartjs-chart-line-ng\"], root[\"ui-bb-dropdown-select-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_27__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0309a746b17cd403690","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-wm-performance-ng/model.xml\n// module id = 0\n// module chunks = 4","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-loading-indicator-ng\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-empty-state-ng\"\n// module id = 4\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 8\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 21","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-wm-compose-selectors\"\n// module id = 10\n// module chunks = 0 4 5 14","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-styles\"\n// module id = 15\n// module chunks = 1 2 3 4 5 14 15","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 18\n// module chunks = 2 4 5 6 7 9 10 11 12 13 14","/**\n * @module ext-wm-performance-ng\n *\n * @description\n * Portfolio performance, shows porftfolio performance indicators\n * in form of line chart\n *\n * @example\n * <!-- portfolio widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *  <value type=\"string\">ext-wm-performance-ng</value>\n * </property>\n *\n */\n\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport uiBbLoadingIndicatorKey from 'ui-bb-loading-indicator-ng';\nimport uiBbChartjsChartLineKey from 'ui-bb-chartjs-chart-line-ng';\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbEmptyStateKey from 'ui-bb-empty-state-ng';\nimport uiBbDropdownSelectKey from 'ui-bb-dropdown-select-ng';\n\nimport extHelpers from './helpers';\n\nexport const helpers = extHelpers;\n\nexport const dependencyKeys = [\n  ngAriaModuleKey,\n  uiBbLoadingIndicatorKey,\n  uiBbChartjsChartLineKey,\n  i18nKey,\n  uiBbEmptyStateKey,\n  uiBbDropdownSelectKey,\n];\n\n/**\n * Performance type definition\n * @typedef {Object} Performance\n * @property {string}\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-performance-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_26__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-chartjs-chart-line-ng\"\n// module id = 26\n// module chunks = 4","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-dropdown-select-ng\"\n// module id = 27\n// module chunks = 4 5 8 14 27","/* global angular */\nimport getStyle from 'lib-bb-styles';\nimport { E_AUTH, E_CONNECTIVITY, E_UNEXPECTED, E_USER } from 'lib-bb-model-errors';\nimport composeSelectors from 'lib-wm-compose-selectors';\nimport {\n  CSS_SELECTORS,\n  POINT_RADIUS,\n  POINT_HIT_RADIUS,\n  LINE_TENSION,\n  REM_TO_PIXEL_RATIO,\n} from './constants';\n\n/**\n * @typedef {Object} errorMessageDescriptor\n * @property {string} message Localization key of the error message\n * @property {string} title Localization key of the error message`s title\n * @property {string} icon CSS class for icon\n */\n\n/**\n * @description\n * Map of error code to message, title and icon to display to user\n *\n * @public\n * @name errors\n * @type {object.<E_AUTH | E_CONNECTIVITY | E_UNEXPECTED | E_USER, errorMessageDescriptor>}\n */\nconst errors = {\n  [E_AUTH]: {\n    message: 'model.error.auth.message',\n    title: 'model.error.auth.title',\n    icon: 'fa-sign-in-alt',\n  },\n  [E_CONNECTIVITY]: {\n    message: 'model.error.connectivity.message',\n    title: 'model.error.connectivity.title',\n    icon: 'fa-exclamation-triangle',\n  },\n  [E_USER]: {\n    message: 'model.error.user.message',\n    title: 'model.error.user.title',\n    icon: 'fa-user',\n  },\n  [E_UNEXPECTED]: {\n    message: 'model.error.unexpected.message',\n    title: 'model.error.unexpected.title',\n    icon: 'fa-server',\n  },\n};\n\nconst chartPaddingStyles = {\n  top: getStyle('.p-0', 'paddingTop'),\n  bottom: getStyle('.p-4', 'paddingBottom'),\n  left: getStyle('.p-4', 'paddingLeft'),\n  right: getStyle('.p-4', 'paddingRight'),\n};\n\nconst chartPadding = {\n  top: chartPaddingStyles.top && chartPaddingStyles.top.length > 0 ?\n    parseFloat(chartPaddingStyles.top) * REM_TO_PIXEL_RATIO : 0,\n  bottom: chartPaddingStyles.bottom && chartPaddingStyles.bottom.length > 0 ?\n    parseFloat(chartPaddingStyles.bottom) * REM_TO_PIXEL_RATIO : 0,\n  left: chartPaddingStyles.left && chartPaddingStyles.left.length > 0 ?\n    parseFloat(chartPaddingStyles.left) * REM_TO_PIXEL_RATIO : 0,\n  right: chartPaddingStyles.right && chartPaddingStyles.right.length > 0 ?\n    parseFloat(chartPaddingStyles.right) * REM_TO_PIXEL_RATIO : 0,\n};\n\nconst tooltipCornerRadius = parseFloat(getStyle('.rounded', 'borderRadius')) * REM_TO_PIXEL_RATIO;\n\nconst ticksPadding = parseFloat(getStyle('.p-3', 'padding')) * REM_TO_PIXEL_RATIO;\n\nconst performanceChartColorPositive\n  = getStyle(CSS_SELECTORS.performanceChartPositive, 'borderColor');\nconst performanceChartColorNegative\n  = getStyle(CSS_SELECTORS.performanceChartNegative, 'borderColor');\nconst performanceChartBgPositive\n  = getStyle(CSS_SELECTORS.performanceChartBgPositive, 'backgroundColor');\nconst performanceChartBgNegative\n  = getStyle(CSS_SELECTORS.performanceChartBgNegative, 'backgroundColor');\n\n/**\n * @description\n * Prototype for performance series\n *\n * @private\n * @name performanceSeriesPrototype\n * @type {object}\n *\n */\nconst performanceSeriesPrototype = {\n  labels: [],\n  datasets: [\n    {\n      borderColor: performanceChartColorPositive,\n      backgroundColor: performanceChartBgPositive,\n      pointBorderColor: [],\n      pointBackgroundColor: [],\n      pointRadius: [],\n      pointBorderWidth: 0,\n      pointHitRadius: POINT_HIT_RADIUS,\n      lineTension: LINE_TENSION,\n      fill: true,\n      data: [],\n    },\n  ],\n};\n\n/**\n * @description\n * Generates periods to be displayed in periods select\n *\n * @public\n * @name getPeriods\n * @type {function}\n *\n * @returns {Array} Periods to be used in periods select\n */\nconst getPeriods = () => {\n  const today = new Date();\n  const month3ago = new Date();\n  const month6ago = new Date();\n  const month12ago = new Date();\n\n  const startOfYear = new Date(today.getFullYear(), 0, 1);\n  month3ago.setMonth(today.getMonth() - 3);\n  month6ago.setMonth(today.getMonth() - 6);\n  month12ago.setMonth(today.getMonth() - 12);\n\n  return [\n    {\n      i18nKey: 'performance.period.12months',\n      value: { dateTo: today, dateFrom: month12ago },\n    },\n    {\n      i18nKey: 'performance.period.6months',\n      value: { dateTo: today, dateFrom: month6ago },\n    },\n    {\n      i18nKey: 'performance.period.3months',\n      value: { dateTo: today, dateFrom: month3ago },\n    },\n    {\n      i18nKey: 'performance.period.ytd',\n      value: { dateTo: today, dateFrom: startOfYear },\n    },\n  ];\n};\n\n/**\n * @description\n * Populates datasets with bar`s color depending on value sign\n *\n * @private\n * @name processVariationLineColor\n * @type {function}\n * @param {object} series Chart series to extend datasets in\n * @param {number} value Value to decide which color to use\n *\n */\nconst processPerformanceLineColor = (datasets, value, unshift) => {\n  const color = value < 0 ? performanceChartColorNegative :\n    performanceChartColorPositive;\n  datasets.pointBackgroundColor[unshift ? 'unshift' : 'push'](color);\n  datasets.pointBorderColor[unshift ? 'unshift' : 'push'](color);\n};\n\n/**\n * @description\n * Set colors to dataset line chart depending on value sign\n *\n * @private\n * @name setDataSetColor\n * @type {function}\n * @param {object} dataset Chart dataset\n * @param {number} value Value to decide which color to use\n *\n */\nconst setDataSetColor = (dataset, value) => {\n  const data = dataset;\n  if (value < 0) {\n    data.backgroundColor = performanceChartBgNegative;\n    data.borderColor = performanceChartColorNegative;\n  }\n};\n\n/**\n * @description\n * Find x value with y = 0\n *\n * @private\n * @name findXOnZero\n * @type {function}\n * @param {object} { x: x1, y: y1 } Point with x: x1, y: y1 coordinates\n * @param {object} { x: x2, y: y2 } Point with x: x2, y: y2 coordinates\n *\n * @returns {number} x value coordinate with y = 0\n */\nconst findXOnZero = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => (\n  (((-y1) * (x2 - x1)) / (y2 - y1)) + x1\n);\n\n/**\n * @description\n * Check if values have different sign\n *\n * @private\n * @name differentSign\n * @type {function}\n * @param {number} value1 Chart dataset\n * @param {number} value2 Value to decide which color to use\n *\n * @returns {boolean}\n */\nconst differentSign = (value1, value2) => (\n  (value1 > 0 && value2 < 0)\n  || (value1 < 0 && value2 > 0)\n);\n\n/**\n * @description\n * Populates datasets and labels.\n *\n * @private\n * @name processLabelAndValue\n * @type {function}\n * @param {object} series Chart series to extend datasets and labels in\n * @param {string} dateFrom Date to display value from\n * @param {string} dateTo Date to display value to\n * @param {value} value Value to display in chart\n *\n */\nconst processLabelAndValue = (series, dateFrom, dateTo, value) => {\n  let xOnZeroY;\n  const label = (new Date(dateFrom).getTime() + new Date(dateTo).getTime()) / 2;\n  const lastLabel = series.labels[series.labels.length - 1];\n  const lastDataset = series.datasets[series.datasets.length - 1];\n  const previousValue = lastDataset.data[lastDataset.data.length - 1];\n  const previousValuePresent = typeof previousValue !== 'undefined';\n\n  /**\n   * @description\n   * Object options for dataset\n   *\n   * @private\n   * @name datasetOptions\n   * @type {object}\n   *\n   */\n  const datasetOptions = {\n    data: [{\n      x: label,\n      y: value,\n    }],\n    borderColor: performanceChartColorPositive,\n    backgroundColor: performanceChartBgPositive,\n    pointBorderColor: [],\n    pointBackgroundColor: [],\n  };\n\n  if (value !== 0 && previousValuePresent && differentSign(value, previousValue.y)) {\n    xOnZeroY = findXOnZero({ x: lastLabel, y: previousValue.y }, { x: label, y: value });\n\n    series.labels.push(xOnZeroY);\n    lastDataset.data.push({\n      x: xOnZeroY,\n      y: 0,\n    });\n    lastDataset.pointRadius.push(0);\n    processPerformanceLineColor(lastDataset, 0);\n  } else {\n    lastDataset.data.push({\n      x: label,\n      y: value,\n    });\n\n    lastDataset.pointRadius.push(POINT_RADIUS);\n    processPerformanceLineColor(lastDataset, value);\n\n    setDataSetColor(lastDataset, value);\n  }\n\n  series.labels.push(label);\n\n  if (value === 0 && previousValuePresent && previousValue.y !== 0) {\n    const newDataset = Object.assign({}, lastDataset, datasetOptions, {\n      pointRadius: [0],\n    });\n    processPerformanceLineColor(newDataset, value);\n\n    series.datasets.push(newDataset);\n  }\n\n  if (previousValuePresent && differentSign(value, previousValue.y)) {\n    const newDataset = Object.assign({}, lastDataset, datasetOptions, {\n      pointRadius: [],\n    });\n\n    processPerformanceLineColor(newDataset, value);\n\n    if (xOnZeroY) {\n      newDataset.data.unshift({\n        x: xOnZeroY,\n        y: 0,\n      });\n      processPerformanceLineColor(newDataset, 0, true);\n      newDataset.pointRadius.push(0);\n    }\n\n    series.datasets.push(newDataset);\n    newDataset.pointRadius.push(POINT_RADIUS);\n    setDataSetColor(newDataset, value);\n  }\n};\n\n/**\n * @description\n * Transforms loaded performance data into structure applicable for performance chart\n *\n * @private\n * @name transformPerformance\n * @type {function}\n * @param {object} data Loaded performance data\n *\n * @returns {object} Performance data in format applicable for performance chart\n */\nconst transformPerformance = (data) => (\n  data && data.chartData && data.chartData.reduce((series, item) => {\n    processLabelAndValue(series, item.dateFrom, item.dateTo, item.value);\n    return series;\n  }, angular.copy(performanceSeriesPrototype))\n);\n\nconst helpers = ({ $filter, stateContainer }) => {\n  const dateFilter = $filter('date');\n\n  /**\n   * @description\n   * Configuration of performance chart\n   *\n   * @public\n   * @name chartPerformanceOptions\n   * @type {function}\n   * @returns {object} Configuration of performance chart\n   */\n  const chartPerformanceOptions = (data) => {\n    let maxX = 0;\n    if (data) {\n      maxX = Math.max(\n        ...data.chartData.map(item => new Date(item.dateTo))\n      );\n    }\n\n    return ({\n      tooltips: {\n        enabled: true,\n        cornerRadius: tooltipCornerRadius,\n        displayColors: false,\n        callbacks: {\n          title() {\n          },\n          label(tooltipItem) {\n            return `${tooltipItem.yLabel} %, ${dateFilter(tooltipItem.xLabel, 'MMM y')}`;\n          },\n        },\n      },\n      hover: {\n        mode: null,\n      },\n      scales: {\n        yAxes: [\n          {\n            ticks: {\n              callback(label) {\n                return `${Math.round(label * 100) / 100}%`;\n              },\n              padding: ticksPadding,\n            },\n          },\n        ],\n        xAxes: [\n          {\n            type: 'time',\n            time: {\n              unit: 'month',\n              displayFormats: {\n                month: 'MMM, YYYY',\n              },\n              max: maxX,\n            },\n            afterTickToLabelConversion: scaleInstance => {\n              scaleInstance.ticks.splice(-1, 1);\n            },\n          },\n        ],\n      },\n      layout: {\n        padding: chartPadding,\n      },\n    });\n  };\n\n  /**\n   * @name performanceDataSelector\n   * @inner\n   * @description Selector for getting performance data from state\n   * @type function\n   * @returns {Array} Performance data\n   */\n  const performanceDataSelector = stateContainer.createSelector(\n    state => state.portfolioPerformance.data\n  );\n\n  /**\n   * @description\n   * Selector for performance chart options\n   *\n   * @public\n   * @name getChartPerformanceOptions\n   * @type {function}\n   * @returns {object} Performance chart options\n   */\n  const getChartPerformanceOptions = composeSelectors(\n    performanceDataSelector,\n    chartPerformanceOptions\n  );\n\n  /**\n   * @description\n   * Selector for performance data transformation into data applicable for chart\n   *\n   * @public\n   * @name performanceData\n   * @type {function}\n   */\n  const performanceData = composeSelectors(\n    performanceDataSelector,\n    transformPerformance\n  );\n\n  /**\n   * @description\n   * Returns error object by error code\n   *\n   * @public\n   * @name getError\n   * @type {function}\n   * @returns {errorMessageDescriptor} Descriptor of the error\n   */\n  const getError = (code) => errors[code];\n\n\n  /**\n   * @description\n   * Align dropdown to the right side instead of default left side\n   *\n   * @public\n   * @name changeDropdownSide\n   * @type {function}\n   */\n  const changeDropdownSide = () => {\n    // eslint-disable-next-line no-undef\n    document.querySelector('.dropdown-menu').classList.add('dropdown-menu-right');\n  };\n\n  return {\n    chartPerformanceOptions,\n    PERIOD: getPeriods(),\n    performanceData,\n    getChartPerformanceOptions,\n    getError,\n    changeDropdownSide,\n  };\n};\n\nexport default helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-performance-ng/scripts/helpers.js","// eslint-disable-next-line import/prefer-default-export\nexport const CSS_SELECTORS = {\n  performanceChart: '.chart-primary-background',\n  performanceChartPositive: '.chart-positive-border',\n  performanceChartBgPositive: '.chart-positive-light-background',\n  performanceChartNegative: '.chart-negative-border',\n  performanceChartBgNegative: '.chart-negative-light-background',\n};\n\nexport const POINT_RADIUS = 4;\nexport const POINT_HIT_RADIUS = 10;\nexport const LINE_TENSION = 0.1;\nexport const REM_TO_PIXEL_RATIO = 16;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-performance-ng/scripts/constants.js"],"sourceRoot":""}