{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**************","webpack:///webpack/bootstrap d0309a746b17cd403690?c295**************","webpack:///./ext-wm-valuation-ng/model.xml","webpack:///external \"ui-bb-loading-indicator-ng\"?8f10*************","webpack:///external \"ui-bb-i18n-ng\"?dc01*************","webpack:///external \"ui-bb-empty-state-ng\"?88ee*************","webpack:///external \"ui-bb-format-amount-ng\"?8f72************","webpack:///external \"lib-bb-model-errors\"?7567*************","webpack:///external \"lib-wm-compose-selectors\"?7338**","webpack:///external \"lib-bb-styles\"?c155****","webpack:///external \"vendor-bb-angular-ng-aria\"?9d0e*********","webpack:///external \"ui-bb-dropdown-select-ng\"?4101**","webpack:///external \"ui-bb-chartjs-chart-bar-ng\"?9799","webpack:///./ext-wm-valuation-ng/scripts/index.js","webpack:///./ext-wm-valuation-ng/scripts/helpers.js","webpack:///./ext-wm-valuation-ng/scripts/constants.js","webpack:///./widget-wm-valuation-ng/scripts/constants.js"],"names":["helpers","extHelpers","dependencyKeys","uiBbFormatAmountKey","ngAriaModuleKey","uiBbLoadingIndicatorKey","uiBbChartjsChartBarKey","uiBBDropdownSelect","i18nKey","uiBbEmptyStateKey","errors","E_AUTH","message","title","icon","E_CONNECTIVITY","E_USER","E_UNEXPECTED","chartPaddingStyles","top","bottom","left","right","chartPadding","length","parseFloat","tooltipCornerRadius","ticksPadding","getPeriods","today","Date","month1ago","setMonth","getMonth","month3ago","month6ago","month12ago","value","dateTo","dateFrom","GRANULARITY_DAILY","GRANULARITY_WEEKLY","GRANULARITY_MONTHLY","GRANULARITY_QUARTERLY","GRANULARITY","GRANULARITY_TO_DATE_FORMAT","$filter","getRule","stateContainer","widget","dateFilter","currencyFilter","getSymbol","code","symbol","valuationChartBarColor","CSS_SELECTORS","valuationChartBar","valuationChartBarColorPositive","valuationChartBarPositive","valuationChartBarColorNegative","valuationChartBarNegative","valuationDataSetPrototype","label","backgroundColor","borderWidth","yAxisID","data","variationDataSetPrototype","processLabelAndValue","series","labels","push","getTime","datasets","processVariationBarColor","color","transformValuation","chartData","reduce","item","amount","angular","copy","original","updated","transformVariation","valuePct","valuationDataStateSelector","createSelector","state","valuation","valuationData","variation","getGranularity","granularity","ticksCallback","tick","index","result","lastItem","isValuation","route","name","VALUATION_ROUTE","valuationYAxisConfig","ticks","beginAtZero","callback","toFixed","Math","round","padding","type","display","position","id","gridLines","drawOnChartArea","drawBorder","variationYAxisConfig","min","max","map","suggestedMin","floor","suggestedMax","chartValuationOptions","tooltips","enabled","xAlign","yAlign","cornerRadius","displayColors","callbacks","tooltipItem","currencyCode","yLabel","initXLabel","filter","date","hover","mode","scales","yAxes","xAxes","layout","chartVariationOptions","initLabel","getVariationOptions","getError","areBothChartsDisplayed","getBooleanPreference","Preferences","DISPLAY_VALUATION_CHART","DISPLAY_VARIATION_CHART","PERIOD","VARIATION_ROUTE"],"mappings":"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","file":"ext-wm-valuation-ng/scripts/ext-wm-valuation-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-wm-compose-selectors\"), require(\"lib-bb-styles\"), require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-dropdown-select-ng\"), require(\"ui-bb-chartjs-chart-bar-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-wm-valuation-ng\", [\"ui-bb-loading-indicator-ng\", \"ui-bb-i18n-ng\", \"ui-bb-empty-state-ng\", \"ui-bb-format-amount-ng\", \"lib-bb-model-errors\", \"lib-wm-compose-selectors\", \"lib-bb-styles\", \"vendor-bb-angular-ng-aria\", \"ui-bb-dropdown-select-ng\", \"ui-bb-chartjs-chart-bar-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-wm-valuation-ng\"] = factory(require(\"ui-bb-loading-indicator-ng\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"ui-bb-format-amount-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-wm-compose-selectors\"), require(\"lib-bb-styles\"), require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-dropdown-select-ng\"), require(\"ui-bb-chartjs-chart-bar-ng\"));\n\telse\n\t\troot[\"ext-wm-valuation-ng\"] = factory(root[\"ui-bb-loading-indicator-ng\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-empty-state-ng\"], root[\"ui-bb-format-amount-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-wm-compose-selectors\"], root[\"lib-bb-styles\"], root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-dropdown-select-ng\"], root[\"ui-bb-chartjs-chart-bar-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_31__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0309a746b17cd403690","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-wm-valuation-ng/model.xml\n// module id = 0\n// module chunks = 14","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-loading-indicator-ng\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-empty-state-ng\"\n// module id = 4\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount-ng\"\n// module id = 6\n// module chunks = 0 1 2 3 5 6 7 8 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 8\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 21","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-wm-compose-selectors\"\n// module id = 10\n// module chunks = 0 4 5 14","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-styles\"\n// module id = 15\n// module chunks = 1 2 3 4 5 14 15","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 18\n// module chunks = 2 4 5 6 7 9 10 11 12 13 14","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-dropdown-select-ng\"\n// module id = 27\n// module chunks = 4 5 8 14 27","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-chartjs-chart-bar-ng\"\n// module id = 31\n// module chunks = 5 14","/**\n * @module ext-wm-valuation-ng\n *\n * @description\n * Default extension for valuation widget.\n *\n *\n * @requires ui-bb-chartjs-chart-bar-ng\n * @requires ui-bb-dropdown-select\n * @example\n * <!-- valuation widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *  <value type=\"string\">ext-wm-valuation-ng</value>\n * </property>\n *\n */\n\nimport uiBbFormatAmountKey from 'ui-bb-format-amount-ng';\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport uiBbLoadingIndicatorKey from 'ui-bb-loading-indicator-ng';\nimport i18nKey from 'ui-bb-i18n-ng';\nimport uiBbEmptyStateKey from 'ui-bb-empty-state-ng';\nimport uiBbChartjsChartBarKey from 'ui-bb-chartjs-chart-bar-ng';\nimport uiBBDropdownSelect from 'ui-bb-dropdown-select-ng';\n\nimport extHelpers from './helpers';\n\nexport const helpers = extHelpers;\n\nexport const dependencyKeys = [\n  uiBbFormatAmountKey,\n  ngAriaModuleKey,\n  uiBbLoadingIndicatorKey,\n  uiBbChartjsChartBarKey,\n  uiBBDropdownSelect,\n  i18nKey,\n  uiBbEmptyStateKey,\n];\n\n/**\n * @description BBSeries data object used to draw charts\n * @typedef {object} BBSeries\n * @property {string[]} labels Array chart slices labels\n * @property {Dataset[]} datasets Array of chart datasets\n */\n\n/**\n * @description Dataset object for chart data\n * @typedef {object} Dataset\n * @property {number[]} data Array of data points for chart slices\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-valuation-ng/scripts/index.js","/* global angular */\nimport getStyle from 'lib-bb-styles';\nimport { E_AUTH, E_CONNECTIVITY, E_UNEXPECTED, E_USER } from 'lib-bb-model-errors';\nimport composeSelectors from 'lib-wm-compose-selectors';\nimport { CSS_SELECTORS } from './constants';\nimport { VALUATION_ROUTE, Preferences } from './../../widget-wm-valuation-ng/scripts/constants';\n\n\n/**\n * @typedef {Object} errorMessageDescriptor\n * @property {string} message Localization key of the error message\n * @property {string} title Localization key of the error message`s title\n * @property {string} icon CSS class for icon\n */\n\n/**\n * @description\n * Map of error code to message, title and icon to display to user\n *\n * @public\n * @name errors\n * @type {object.<E_AUTH | E_CONNECTIVITY | E_UNEXPECTED | E_USER, errorMessageDescriptor>}\n */\nconst errors = {\n  [E_AUTH]: {\n    message: 'model.error.auth.message',\n    title: 'model.error.auth.title',\n    icon: 'fa-sign-in-alt',\n  },\n  [E_CONNECTIVITY]: {\n    message: 'model.error.connectivity.message',\n    title: 'model.error.connectivity.title',\n    icon: 'fa-exclamation-triangle',\n  },\n  [E_USER]: {\n    message: 'model.error.user.message',\n    title: 'model.error.user.title',\n    icon: 'fa-user',\n  },\n  [E_UNEXPECTED]: {\n    message: 'model.error.unexpected.message',\n    title: 'model.error.unexpected.title',\n    icon: 'fa-server',\n  },\n};\n\nconst chartPaddingStyles = {\n  top: getStyle('.p-4', 'paddingTop'),\n  bottom: getStyle('.p-4', 'paddingBottom'),\n  left: getStyle('.p-4', 'paddingLeft'),\n  right: getStyle('.p-4', 'paddingRight'),\n};\n\nconst chartPadding = {\n  top: chartPaddingStyles.top && chartPaddingStyles.top.length > 0 ?\n    parseFloat(chartPaddingStyles.top) * 16 : 0,\n  bottom: chartPaddingStyles.bottom && chartPaddingStyles.bottom.length > 0 ?\n    parseFloat(chartPaddingStyles.bottom) * 16 : 0,\n  left: chartPaddingStyles.left && chartPaddingStyles.left.length > 0 ?\n    parseFloat(chartPaddingStyles.left) * 16 : 0,\n  right: chartPaddingStyles.right && chartPaddingStyles.right.length > 0 ?\n    parseFloat(chartPaddingStyles.right) * 16 : 0,\n};\n\nconst tooltipCornerRadius = parseFloat(getStyle('.rounded', 'borderRadius')) * 16;\n\nconst ticksPadding = parseFloat(getStyle('.p-3', 'padding')) * 16;\n\n/**\n * @description\n * Generates periods to be displayed in periods select\n *\n * @public\n * @name getPeriods\n * @type {function}\n *\n * @returns {Array} Periods to be used in periods select\n */\nconst getPeriods = () => {\n  const today = new Date();\n\n  const month1ago = new Date();\n  month1ago.setMonth(today.getMonth() - 1);\n\n  const month3ago = new Date();\n  month3ago.setMonth(today.getMonth() - 3);\n\n  const month6ago = new Date(today);\n  month6ago.setMonth(today.getMonth() - 6);\n\n  const month12ago = new Date(today);\n  month12ago.setMonth(today.getMonth() - 12);\n\n  return [\n    {\n      i18nKey: 'valuation.period.12months',\n      value: { dateTo: today, dateFrom: month12ago },\n    },\n    {\n      i18nKey: 'valuation.period.6months',\n      value: { dateTo: today, dateFrom: month6ago },\n    },\n    {\n      i18nKey: 'valuation.period.3months',\n      value: { dateTo: today, dateFrom: month3ago },\n    },\n    {\n      i18nKey: 'valuation.period.1month',\n      value: { dateTo: today, dateFrom: month1ago },\n    },\n  ];\n};\n\nconst GRANULARITY_DAILY = 'daily';\nconst GRANULARITY_WEEKLY = 'weekly';\nconst GRANULARITY_MONTHLY = 'monthly';\nconst GRANULARITY_QUARTERLY = 'quarterly';\n\n/**\n * @description\n * List of granularity options to be used in granularity select\n *\n * @public\n * @name GRANULARITY\n * @type {array}\n */\nconst GRANULARITY = [\n  {\n    i18nKey: 'valuation.granularity.daily',\n    value: GRANULARITY_DAILY,\n  },\n  {\n    i18nKey: 'valuation.granularity.weekly',\n    value: GRANULARITY_WEEKLY,\n  },\n  {\n    i18nKey: 'valuation.granularity.monthly',\n    value: GRANULARITY_MONTHLY,\n  },\n  {\n    i18nKey: 'valuation.granularity.quarterly',\n    value: GRANULARITY_QUARTERLY,\n  },\n];\n\n/**\n * @description\n * Map of granularity to date formats\n *\n * @private\n * @name GRANULARITY_TO_DATE_FORMAT\n * @type {object.<GRANULARITY_DAILY\n * | GRANULARITY_WEEKLY\n * | GRANULARITY_MONTHLY\n * | GRANULARITY_QUARTERLY, number>}\n */\nconst GRANULARITY_TO_DATE_FORMAT = {\n  [GRANULARITY_DAILY]: 'mediumDate',\n  [GRANULARITY_WEEKLY]: 'mediumDate',\n  [GRANULARITY_MONTHLY]: 'MMM y',\n  [GRANULARITY_QUARTERLY]: 'MMM y',\n};\n\nconst helpers = ({ $filter, getRule, stateContainer, widget }) => {\n  const dateFilter = $filter('date');\n  const currencyFilter = $filter('currency');\n  const getSymbol = (code) => getRule(code).symbol || code;\n\n  const valuationChartBarColor\n    = getStyle(CSS_SELECTORS.valuationChartBar, 'backgroundColor');\n  const valuationChartBarColorPositive\n    = getStyle(CSS_SELECTORS.valuationChartBarPositive, 'backgroundColor');\n  const valuationChartBarColorNegative\n    = getStyle(CSS_SELECTORS.valuationChartBarNegative, 'backgroundColor');\n\n\n  /**\n   * @description\n   * Prototype for valuation datasets\n   *\n   * @private\n   * @name valuationDataSetPrototype\n   * @type {object}\n   *\n   */\n  const valuationDataSetPrototype = {\n    label: 'Valuation',\n    backgroundColor: valuationChartBarColor,\n    borderWidth: 0,\n    yAxisID: 'y-axis-1',\n    data: [],\n  };\n\n  /**\n   * @description\n   * Prototype for variation datasets\n   *\n   * @private\n   * @name variationDataSetPrototype\n   * @type {object}\n   *\n   */\n  const variationDataSetPrototype = {\n    label: 'Variation',\n    backgroundColor: [],\n    borderWidth: 0,\n    yAxisID: 'y-axis-1',\n    data: [],\n  };\n\n  /**\n   * @description\n   * Populates datasets and labels.\n   *\n   * @private\n   * @name processLabelAndValue\n   * @type {function}\n   * @param {BBSeries} series Chart series to extend datasets and labels in\n   * @param {string | Date} Date to display value from\n   * @param {string | Date} Date to display value to\n   * @param {value} value Value to display in chart\n   *\n   */\n  const processLabelAndValue = (series, dateFrom, dateTo, value) => {\n    series.labels.push((new Date(dateFrom).getTime() + new Date(dateTo).getTime()) / 2);\n    series.datasets[0].data.push(value);\n  };\n\n  /**\n   * @description\n   * Populates datasets with bar`s color depending on value sign\n   *\n   * @private\n   * @name processVariationBarColor\n   * @type {function}\n   * @param {BBSeries} series Chart series to extend datasets in\n   * @param {number} value Value to decide which color to use\n   *\n   */\n  const processVariationBarColor = (series, value) => {\n    const color = value > 0\n      ? valuationChartBarColorPositive\n      : valuationChartBarColorNegative;\n    series.datasets[0].backgroundColor.push(color);\n  };\n\n\n  /**\n   * @description\n   * Transforms loaded valuation data into structure applicable for valuation chart\n   *\n   * @private\n   * @name transformValuation\n   * @type {function}\n   * @param {object} data Loaded valuation data\n   *\n   * @returns {BBSeries} Valuation data in format applicable for valuation chart\n   */\n  const transformValuation = (data) => (\n    data && data.chartData && data.chartData.reduce((series, item) => {\n      processLabelAndValue(series, item.dateFrom, item.dateTo, item.value.amount);\n      return series;\n    }, {\n      labels: [],\n      datasets: [angular.copy(valuationDataSetPrototype)],\n      original: data,\n      updated: true,\n    })\n  );\n\n  /**\n   * @description\n   * Transforms loaded valuation data into structure applicable for variation chart\n   *\n   * @private\n   * @name transformVariation\n   * @type {function}\n   * @param {object} data Loaded valuation data\n   *\n   * @returns {BBSeries} Valuation data in format applicable for variation chart\n   */\n  const transformVariation = (data) => (\n    data && data.chartData && data.chartData.reduce((series, item) => {\n      processLabelAndValue(series, item.dateFrom, item.dateTo, item.valuePct);\n      processVariationBarColor(series, item.valuePct);\n      return series;\n    }, {\n      labels: [],\n      datasets: [angular.copy(variationDataSetPrototype)],\n      original: data,\n      updated: true,\n    })\n  );\n\n  /**\n   * @description Data in format applicable for charts\n   * @typedef {object} ValuationChartsData\n   * @property {BBSeries} data series for charts\n   * @property {BBSeries} data series for charts\n   */\n\n  /**\n   * @name valuationDataStateSelector\n   * @inner\n   * @description Selector for getting valuation data from state\n   * @type function\n   * @returns {Array} Valuation data\n   */\n  const valuationDataStateSelector = stateContainer.createSelector(\n    state => state.valuation.data\n  );\n\n  /**\n   * @description\n   * Transforms loaded valuation data into structure applicable for charts\n   *\n   * @public\n   * @name valuationData\n   * @type {function}\n   * @param {object} data Loaded valuation data\n   * @returns {ValuationChartsData} Valuation data in format applicable for charts\n   */\n  const valuationData = composeSelectors(\n    valuationDataStateSelector,\n    (data) => ({\n      valuation: transformValuation(data),\n      variation: transformVariation(data),\n    })\n  );\n\n  /**\n   * @description\n   * Retrieves selected granularity from stateContainer\n   *\n   * @public\n   * @name getGranularity\n   * @type {function}\n   *\n   * @returns {GRANULARITY_DAILY\n   * | GRANULARITY_WEEKLY\n   * | GRANULARITY_MONTHLY\n   * | GRANULARITY_QUARTERLY} selected granularity\n   */\n  const getGranularity = stateContainer.createSelector(\n    state => state.valuation.granularity\n  );\n\n  /**\n   * @description\n   * Method to make charts` ticks more rare\n   *\n   * @private\n   * @name ticksCallback\n   * @type {function}\n   * @param {object} tick Chart tick\n   * @param {index} index Index of the tick in the array of all ticks\n   * @param {object} ticks Array of all ticks\n   */\n  const ticksCallback = (tick, index, data) => {\n    let result = null;\n    const granularity = getGranularity();\n\n    if (granularity === GRANULARITY_DAILY || granularity === GRANULARITY_WEEKLY) {\n      const lastItem = index === data.length - 1;\n      result = (index % 2 === 0 || lastItem) && tick;\n    } else {\n      result = tick;\n    }\n\n    return result ? dateFilter(result, GRANULARITY_TO_DATE_FORMAT[granularity]) : null;\n  };\n\n  /**\n   * @description\n   * Whether\n   *\n   * @private\n   * @name valuationYAxisConfig\n   * @type {object}\n   */\n  const isValuation = (route) => route.name === VALUATION_ROUTE;\n\n  /**\n   * @description\n   * Configuration for valuation chart`s Y axis\n   *\n   * @private\n   * @name valuationYAxisConfig\n   * @type {object}\n   */\n  const valuationYAxisConfig = {\n    ticks: {\n      beginAtZero: true,\n      callback(label) {\n        const value = label / 1000000;\n        if (value === 0) {\n          return `${value}`;\n        }\n        return value < 1\n          ? `${value.toFixed(2)}M`\n          : `${Math.round(value)}M`;\n      },\n      padding: ticksPadding,\n    },\n    type: 'linear',\n    display: true,\n    position: 'left',\n    id: 'y-axis-1',\n    gridLines: {\n      display: true,\n      drawOnChartArea: true,\n      drawBorder: false,\n    },\n  };\n\n  /**\n   * @description\n   * Configuration for variation chart`s Y axis\n   *\n   * @private\n   * @name variationYAxisConfig\n   * @type {function}\n   * @returns {object} Configuration for variation chart`s Y axis\n   */\n  const variationYAxisConfig = data => {\n    let min = 0;\n    let max = 0;\n    if (data) {\n      min = Math.min(...data.chartData.map(item => item.valuePct));\n      max = Math.max(...data.chartData.map(item => item.valuePct));\n    }\n    const suggestedMin = min === 0 ? 0 : Math.floor(min) - 1;\n    const suggestedMax = Math.floor(max) + 1;\n\n    return {\n      ticks: {\n        callback(label) {\n          return `${label}%`;\n        },\n        padding: ticksPadding,\n        suggestedMin,\n        suggestedMax,\n      },\n      type: 'linear',\n      display: true,\n      position: 'left',\n      id: 'y-axis-1',\n      gridLines: {\n        display: true,\n        drawOnChartArea: true,\n        drawBorder: false,\n      },\n    };\n  };\n\n  /**\n   * @description\n   * Configuration of valuation chart\n   *\n   * @public\n   * @name chartValuationOptions\n   * @type {object}\n   */\n  const chartValuationOptions = {\n    tooltips: {\n      enabled: true,\n      position: 'average',\n      xAlign: 'center',\n      yAlign: 'bottom',\n      cornerRadius: tooltipCornerRadius,\n      displayColors: false,\n      callbacks: {\n        title() {\n        },\n        label(tooltipItem, data) {\n          const { currencyCode } = data.original.chartData[0].value;\n          const value = currencyFilter(tooltipItem.yLabel, getSymbol(currencyCode));\n          const granularity = getGranularity();\n\n          const initXLabel = data.labels[tooltipItem.index];\n          const filter = GRANULARITY_TO_DATE_FORMAT[granularity];\n          const date = dateFilter(initXLabel, filter);\n\n          return `${value} - ${date}`;\n        },\n      },\n    },\n    hover: {\n      mode: null,\n    },\n    scales: {\n      yAxes: [\n        valuationYAxisConfig,\n      ],\n      xAxes: [\n        {\n          ticks: {\n            callback: ticksCallback,\n          },\n        },\n      ],\n    },\n    layout: {\n      padding: chartPadding,\n    },\n  };\n\n  /**\n   * @description\n   * Configuration of variation chart\n   *\n   * @public\n   * @name chartVariationOptions\n   * @type {function}\n   * @returns {object} Configuration of variation chart\n   */\n  const chartVariationOptions = valuation => ({\n    tooltips: {\n      enabled: true,\n      xAlign: 'center',\n      yAlign: 'bottom',\n      cornerRadius: tooltipCornerRadius,\n      displayColors: false,\n      callbacks: {\n        title() {\n        },\n        label(tooltipItem, data) {\n          const initLabel = data.labels[tooltipItem.index];\n          const granularity = getGranularity();\n          const filter = GRANULARITY_TO_DATE_FORMAT[granularity];\n          return `${tooltipItem.yLabel} %, ${dateFilter(initLabel, filter)}`;\n        },\n      },\n    },\n    hover: {\n      mode: null,\n    },\n    scales: {\n      yAxes: [\n        variationYAxisConfig(valuation),\n      ],\n      xAxes: [\n        {\n          ticks: {\n            callback: ticksCallback,\n          },\n        },\n      ],\n    },\n    layout: {\n      padding: chartPadding,\n    },\n  });\n\n\n  /**\n   * @description\n   * Gets options for variation chart\n   *\n   * @public\n   * @name getVariationOptions\n   * @type {function}\n   * @returns {object} Variation chart options\n   */\n  const getVariationOptions = composeSelectors(\n    valuationDataStateSelector,\n    chartVariationOptions\n  );\n\n  /**\n   * @description\n   * Returns error object by error code\n   *\n   * @public\n   * @name getError\n   * @type {function}\n   * @returns {errorMessageDescriptor} Descriptor of the error\n   */\n  const getError = (code) => errors[code];\n\n  /**\n   * @description\n   * Detects whether both charts (valuation and variation) should be displayed to user\n   *\n   * @public\n   * @name areBothChartsDisplayed\n   * @type {function}\n   * @returns {boolean}\n   */\n  const areBothChartsDisplayed = () => (\n    widget.getBooleanPreference(Preferences.DISPLAY_VALUATION_CHART)\n    && widget.getBooleanPreference(Preferences.DISPLAY_VARIATION_CHART)\n  );\n\n  return {\n    getError,\n    chartValuationOptions,\n    GRANULARITY,\n    PERIOD: getPeriods(),\n    valuationData,\n    isValuation,\n    areBothChartsDisplayed,\n    getVariationOptions,\n  };\n};\n\n\nexport default helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-valuation-ng/scripts/helpers.js","// eslint-disable-next-line import/prefer-default-export\nexport const CSS_SELECTORS = {\n  valuationChartBar: '.chart-primary-background',\n  valuationChartBarPositive: '.chart-positive-background',\n  valuationChartBarNegative: '.chart-negative-background',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-wm-valuation-ng/scripts/constants.js","/**\n * @name VALUATION_ROUTE\n * @type {string}\n * @description\n * Constant for valuation route\n */\nexport const VALUATION_ROUTE = 'VALUATION_ROUTE';\n/**\n * @name VARIATION_ROUTE\n * @type {string}\n * @description\n * Constant for variation route\n */\nexport const VARIATION_ROUTE = 'VARIATION_ROUTE';\n\n/**\n * @name Preferences\n * @type {Object}\n * @description\n * Const for widget properties/preferences\n */\nexport const Preferences = {\n  DISPLAY_VALUATION_CHART: 'displayValuationChart',\n  DISPLAY_VARIATION_CHART: 'displayVariationChart',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-wm-valuation-ng/scripts/constants.js"],"sourceRoot":""}